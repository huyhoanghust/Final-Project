ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mqtt.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.mqtt_disconnectServer.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 41542B43 		.ascii	"AT+CMQTTDISC=%d,%d\015\012\000"
  20      4D515454 
  20      44495343 
  20      3D25642C 
  20      25640D0A 
  21 0015 000000   		.align	2
  22              	.LC1:
  23 0018 2B434D51 		.ascii	"+CMQTTDISC: 0,0\015\012\000"
  23      54544449 
  23      53433A20 
  23      302C300D 
  23      0A00
  24 002a 0000     		.align	2
  25              	.LC2:
  26 002c 41542B43 		.ascii	"AT+CMQTTREL=%d\015\012\000"
  26      4D515454 
  26      52454C3D 
  26      25640D0A 
  26      00
  27 003d 000000   		.align	2
  28              	.LC3:
  29 0040 2B434D51 		.ascii	"+CMQTTSTOP: 0\015\012\000"
  29      54545354 
  29      4F503A20 
  29      300D0A00 
  30              		.align	2
  31              	.LC4:
  32 0050 41542B43 		.ascii	"AT+CMQTTSTOP\015\012\000"
  32      4D515454 
  32      53544F50 
  32      0D0A00
  33              		.section	.text.mqtt_disconnectServer,"ax",%progbits
  34              		.align	1
  35              		.global	mqtt_disconnectServer
  36              		.syntax unified
  37              		.thumb
  38              		.thumb_func
  40              	mqtt_disconnectServer:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 2


  41              	.LFB68:
  42              		.file 1 "Core/Src/mqtt.c"
   1:Core/Src/mqtt.c **** /**
   2:Core/Src/mqtt.c ****  * @file mqtt.c
   3:Core/Src/mqtt.c ****  * @author hoanghuyhust (hoangnh191855@sis.hust.edu.vn)
   4:Core/Src/mqtt.c ****  * @brief 
   5:Core/Src/mqtt.c ****  * @version 0.1
   6:Core/Src/mqtt.c ****  * @date 2023-12-01
   7:Core/Src/mqtt.c ****  * 
   8:Core/Src/mqtt.c ****  * @copyright Copyright (c) 2023
   9:Core/Src/mqtt.c ****  * 
  10:Core/Src/mqtt.c ****  */
  11:Core/Src/mqtt.c **** #include "mqtt.h"
  12:Core/Src/mqtt.c **** 
  13:Core/Src/mqtt.c **** mqttServer_t mqttServer ={
  14:Core/Src/mqtt.c ****     .host = "demo.thingsboard.io",
  15:Core/Src/mqtt.c ****     .port = 1883,
  16:Core/Src/mqtt.c ****     .serverType=0,  //TCP
  17:Core/Src/mqtt.c **** };
  18:Core/Src/mqtt.c **** 
  19:Core/Src/mqtt.c **** mqttClient_t mqttClient={
  20:Core/Src/mqtt.c ****     .clientID="DATN_Tracking_20191855",
  21:Core/Src/mqtt.c ****     .keepAliveInterval = 90,
  22:Core/Src/mqtt.c ****     .username="",
  23:Core/Src/mqtt.c ****     .pass="",
  24:Core/Src/mqtt.c ****     .clientIndex=0,
  25:Core/Src/mqtt.c ****     .QoS=0,
  26:Core/Src/mqtt.c **** };
  27:Core/Src/mqtt.c **** 
  28:Core/Src/mqtt.c **** mqttData_t mqttData;
  29:Core/Src/mqtt.c **** 
  30:Core/Src/mqtt.c **** char ATcommand[200]={0};
  31:Core/Src/mqtt.c **** 
  32:Core/Src/mqtt.c **** extern char simRxResponse[100];
  33:Core/Src/mqtt.c **** 
  34:Core/Src/mqtt.c **** void mqtt_disconnectServer()
  35:Core/Src/mqtt.c **** {
  43              		.loc 1 35 1 view -0
  44              		.cfi_startproc
  45              		@ args = 0, pretend = 0, frame = 0
  46              		@ frame_needed = 0, uses_anonymous_args = 0
  47 0000 38B5     		push	{r3, r4, r5, lr}
  48              	.LCFI0:
  49              		.cfi_def_cfa_offset 16
  50              		.cfi_offset 3, -16
  51              		.cfi_offset 4, -12
  52              		.cfi_offset 5, -8
  53              		.cfi_offset 14, -4
  36:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
  54              		.loc 1 36 5 view .LVU1
  55 0002 204C     		ldr	r4, .L9
  56 0004 C825     		movs	r5, #200
  57 0006 2A46     		mov	r2, r5
  58 0008 0021     		movs	r1, #0
  59 000a 2046     		mov	r0, r4
  60 000c FFF7FEFF 		bl	memset
  61              	.LVL0:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 3


  37:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTDISC=%d,%d\r\n",mqttClient.clientIndex, mqttClient.keepAliveInterval
  62              		.loc 1 37 5 view .LVU2
  63              		.loc 1 37 82 is_stmt 0 view .LVU3
  64 0010 1D4A     		ldr	r2, .L9+4
  65              		.loc 1 37 5 view .LVU4
  66 0012 9389     		ldrh	r3, [r2, #12]
  67 0014 1269     		ldr	r2, [r2, #16]
  68 0016 1D49     		ldr	r1, .L9+8
  69 0018 2046     		mov	r0, r4
  70 001a FFF7FEFF 		bl	sprintf
  71              	.LVL1:
  38:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand,"+CMQTTDISC: 0,0\r\n",TIME_VERY_SHORT))
  72              		.loc 1 38 5 is_stmt 1 view .LVU5
  73              		.loc 1 38 8 is_stmt 0 view .LVU6
  74 001e 2A46     		mov	r2, r5
  75 0020 1B49     		ldr	r1, .L9+12
  76 0022 2046     		mov	r0, r4
  77 0024 FFF7FEFF 		bl	sim7672_send_command
  78              	.LVL2:
  79              		.loc 1 38 7 view .LVU7
  80 0028 10BB     		cbnz	r0, .L6
  81              	.L2:
  39:Core/Src/mqtt.c ****     {
  40:Core/Src/mqtt.c ****         sim7672_errorHandle();
  41:Core/Src/mqtt.c ****     }
  42:Core/Src/mqtt.c ****     HAL_Delay(100);
  82              		.loc 1 42 5 is_stmt 1 view .LVU8
  83 002a 6420     		movs	r0, #100
  84 002c FFF7FEFF 		bl	HAL_Delay
  85              	.LVL3:
  43:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
  86              		.loc 1 43 5 view .LVU9
  87 0030 144C     		ldr	r4, .L9
  88 0032 C825     		movs	r5, #200
  89 0034 2A46     		mov	r2, r5
  90 0036 0021     		movs	r1, #0
  91 0038 2046     		mov	r0, r4
  92 003a FFF7FEFF 		bl	memset
  93              	.LVL4:
  44:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTREL=%d\r\n",mqttClient.clientIndex);
  94              		.loc 1 44 5 view .LVU10
  95 003e 124B     		ldr	r3, .L9+4
  96 0040 1A69     		ldr	r2, [r3, #16]
  97 0042 1449     		ldr	r1, .L9+16
  98 0044 2046     		mov	r0, r4
  99 0046 FFF7FEFF 		bl	sprintf
 100              	.LVL5:
  45:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand, "+CMQTTDISC: 0,0\r\n",TIME_VERY_SHORT))
 101              		.loc 1 45 5 view .LVU11
 102              		.loc 1 45 8 is_stmt 0 view .LVU12
 103 004a 2A46     		mov	r2, r5
 104 004c 1049     		ldr	r1, .L9+12
 105 004e 2046     		mov	r0, r4
 106 0050 FFF7FEFF 		bl	sim7672_send_command
 107              	.LVL6:
 108              		.loc 1 45 7 view .LVU13
 109 0054 78B9     		cbnz	r0, .L7
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 4


 110              	.L3:
  46:Core/Src/mqtt.c ****     {
  47:Core/Src/mqtt.c ****         sim7672_errorHandle();
  48:Core/Src/mqtt.c ****     }
  49:Core/Src/mqtt.c ****     HAL_Delay(100);
 111              		.loc 1 49 5 is_stmt 1 view .LVU14
 112 0056 6420     		movs	r0, #100
 113 0058 FFF7FEFF 		bl	HAL_Delay
 114              	.LVL7:
  50:Core/Src/mqtt.c ****     if(sim7672_send_command("AT+CMQTTSTOP\r\n","+CMQTTSTOP: 0\r\n",TIME_VERY_SHORT))
 115              		.loc 1 50 5 view .LVU15
 116              		.loc 1 50 8 is_stmt 0 view .LVU16
 117 005c C822     		movs	r2, #200
 118 005e 0E49     		ldr	r1, .L9+20
 119 0060 0E48     		ldr	r0, .L9+24
 120 0062 FFF7FEFF 		bl	sim7672_send_command
 121              	.LVL8:
 122              		.loc 1 50 7 view .LVU17
 123 0066 48B9     		cbnz	r0, .L8
 124              	.L4:
  51:Core/Src/mqtt.c ****     {
  52:Core/Src/mqtt.c ****         sim7672_errorHandle();
  53:Core/Src/mqtt.c ****     }
  54:Core/Src/mqtt.c ****     HAL_Delay(100);
 125              		.loc 1 54 5 is_stmt 1 view .LVU18
 126 0068 6420     		movs	r0, #100
 127 006a FFF7FEFF 		bl	HAL_Delay
 128              	.LVL9:
  55:Core/Src/mqtt.c **** }
 129              		.loc 1 55 1 is_stmt 0 view .LVU19
 130 006e 38BD     		pop	{r3, r4, r5, pc}
 131              	.L6:
  40:Core/Src/mqtt.c ****     }
 132              		.loc 1 40 9 is_stmt 1 view .LVU20
 133 0070 FFF7FEFF 		bl	sim7672_errorHandle
 134              	.LVL10:
 135 0074 D9E7     		b	.L2
 136              	.L7:
  47:Core/Src/mqtt.c ****     }
 137              		.loc 1 47 9 view .LVU21
 138 0076 FFF7FEFF 		bl	sim7672_errorHandle
 139              	.LVL11:
 140 007a ECE7     		b	.L3
 141              	.L8:
  52:Core/Src/mqtt.c ****     }
 142              		.loc 1 52 9 view .LVU22
 143 007c FFF7FEFF 		bl	sim7672_errorHandle
 144              	.LVL12:
 145 0080 F2E7     		b	.L4
 146              	.L10:
 147 0082 00BF     		.align	2
 148              	.L9:
 149 0084 00000000 		.word	.LANCHOR0
 150 0088 00000000 		.word	.LANCHOR1
 151 008c 00000000 		.word	.LC0
 152 0090 18000000 		.word	.LC1
 153 0094 2C000000 		.word	.LC2
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 5


 154 0098 40000000 		.word	.LC3
 155 009c 50000000 		.word	.LC4
 156              		.cfi_endproc
 157              	.LFE68:
 159              		.section	.rodata.mqtt_connectServer.str1.4,"aMS",%progbits,1
 160              		.align	2
 161              	.LC5:
 162 0000 2B434D51 		.ascii	"+CMQTTSTART: 0\015\012\000"
 162      54545354 
 162      4152543A 
 162      20300D0A 
 162      00
 163 0011 000000   		.align	2
 164              	.LC6:
 165 0014 41542B43 		.ascii	"AT+CMQTTSTART\015\012\000"
 165      4D515454 
 165      53544152 
 165      540D0A00 
 166              		.align	2
 167              	.LC7:
 168 0024 41542B43 		.ascii	"AT+CMQTTACCQ=%d,\"%s\",%d\015\012\000"
 168      4D515454 
 168      41434351 
 168      3D25642C 
 168      22257322 
 169 003e 0000     		.align	2
 170              	.LC8:
 171 0040 4F4B0D0A 		.ascii	"OK\015\012\000"
 171      00
 172 0045 000000   		.align	2
 173              	.LC9:
 174 0048 41542B43 		.ascii	"AT+CMQTTCONNECT=%d,\"tcp://%s:%d\",%d,1,\"%s\",\"%s"
 174      4D515454 
 174      434F4E4E 
 174      4543543D 
 174      25642C22 
 175 0076 220D0A00 		.ascii	"\"\015\012\000"
 176 007a 0000     		.align	2
 177              	.LC10:
 178 007c 33623530 		.ascii	"3b50e5e0-998d-11ee-bf05-ef1fe94b65d9\000"
 178      65356530 
 178      2D393938 
 178      642D3131 
 178      65652D62 
 179 00a1 000000   		.align	2
 180              	.LC11:
 181 00a4 706D6161 		.ascii	"pmaaTVZMDASsADuo1wBG\000"
 181      54565A4D 
 181      44415373 
 181      4144756F 
 181      31774247 
 182 00b9 000000   		.align	2
 183              	.LC12:
 184 00bc 2B434D51 		.ascii	"+CMQTTCONNECT: 0,0\015\012\000"
 184      5454434F 
 184      4E4E4543 
 184      543A2030 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 6


 184      2C300D0A 
 185              		.section	.text.mqtt_connectServer,"ax",%progbits
 186              		.align	1
 187              		.global	mqtt_connectServer
 188              		.syntax unified
 189              		.thumb
 190              		.thumb_func
 192              	mqtt_connectServer:
 193              	.LFB69:
  56:Core/Src/mqtt.c **** 
  57:Core/Src/mqtt.c **** void mqtt_connectServer()
  58:Core/Src/mqtt.c **** {
 194              		.loc 1 58 1 view -0
 195              		.cfi_startproc
 196              		@ args = 0, pretend = 0, frame = 0
 197              		@ frame_needed = 0, uses_anonymous_args = 0
 198 0000 30B5     		push	{r4, r5, lr}
 199              	.LCFI1:
 200              		.cfi_def_cfa_offset 12
 201              		.cfi_offset 4, -12
 202              		.cfi_offset 5, -8
 203              		.cfi_offset 14, -4
 204 0002 85B0     		sub	sp, sp, #20
 205              	.LCFI2:
 206              		.cfi_def_cfa_offset 32
  59:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
 207              		.loc 1 59 5 view .LVU24
 208 0004 C824     		movs	r4, #200
 209 0006 2246     		mov	r2, r4
 210 0008 0021     		movs	r1, #0
 211 000a 2748     		ldr	r0, .L19
 212 000c FFF7FEFF 		bl	memset
 213              	.LVL13:
  60:Core/Src/mqtt.c ****     //start MQTT
  61:Core/Src/mqtt.c ****     if(sim7672_send_command("AT+CMQTTSTART\r\n","+CMQTTSTART: 0\r\n",TIME_VERY_SHORT)!=SIM_TRUE)
 214              		.loc 1 61 5 view .LVU25
 215              		.loc 1 61 8 is_stmt 0 view .LVU26
 216 0010 2246     		mov	r2, r4
 217 0012 2649     		ldr	r1, .L19+4
 218 0014 2648     		ldr	r0, .L19+8
 219 0016 FFF7FEFF 		bl	sim7672_send_command
 220              	.LVL14:
 221              		.loc 1 61 7 view .LVU27
 222 001a 0128     		cmp	r0, #1
 223 001c 3AD1     		bne	.L16
 224              	.L12:
  62:Core/Src/mqtt.c ****     {
  63:Core/Src/mqtt.c ****         sim7672_errorHandle();
  64:Core/Src/mqtt.c ****     }
  65:Core/Src/mqtt.c ****     HAL_Delay(100);
 225              		.loc 1 65 5 is_stmt 1 view .LVU28
 226 001e 6420     		movs	r0, #100
 227 0020 FFF7FEFF 		bl	HAL_Delay
 228              	.LVL15:
  66:Core/Src/mqtt.c ****     //accquire MQTT client
  67:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTACCQ=%d,\"%s\",%d\r\n",mqttClient.clientIndex,mqttClient.clientID,mq
 229              		.loc 1 67 5 view .LVU29
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 7


 230 0024 234A     		ldr	r2, .L19+12
 231 0026 204C     		ldr	r4, .L19
 232 0028 234B     		ldr	r3, .L19+16
 233 002a 9B68     		ldr	r3, [r3, #8]
 234 002c 0093     		str	r3, [sp]
 235 002e 9368     		ldr	r3, [r2, #8]
 236 0030 1269     		ldr	r2, [r2, #16]
 237 0032 2249     		ldr	r1, .L19+20
 238 0034 2046     		mov	r0, r4
 239 0036 FFF7FEFF 		bl	sprintf
 240              	.LVL16:
  68:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand,"OK\r\n",TIME_VERY_SHORT)!=SIM_TRUE)
 241              		.loc 1 68 5 view .LVU30
 242              		.loc 1 68 8 is_stmt 0 view .LVU31
 243 003a C822     		movs	r2, #200
 244 003c 2049     		ldr	r1, .L19+24
 245 003e 2046     		mov	r0, r4
 246 0040 FFF7FEFF 		bl	sim7672_send_command
 247              	.LVL17:
 248              		.loc 1 68 7 view .LVU32
 249 0044 0128     		cmp	r0, #1
 250 0046 28D1     		bne	.L17
 251              	.L13:
  69:Core/Src/mqtt.c ****     {
  70:Core/Src/mqtt.c ****         sim7672_errorHandle();
  71:Core/Src/mqtt.c ****     }
  72:Core/Src/mqtt.c ****     HAL_Delay(100);
 252              		.loc 1 72 5 is_stmt 1 view .LVU33
 253 0048 6420     		movs	r0, #100
 254 004a FFF7FEFF 		bl	HAL_Delay
 255              	.LVL18:
  73:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
 256              		.loc 1 73 5 view .LVU34
 257 004e 164C     		ldr	r4, .L19
 258 0050 C822     		movs	r2, #200
 259 0052 0021     		movs	r1, #0
 260 0054 2046     		mov	r0, r4
 261 0056 FFF7FEFF 		bl	memset
 262              	.LVL19:
  74:Core/Src/mqtt.c ****     //connect to MQTT server
  75:Core/Src/mqtt.c ****     //AT+CMQTTCONNECT=0,"tcp://demo.thingsboard.io:1883",90,1,"57OrAgUzdWLWjWE760Ir","5437ac10-9460
  76:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTCONNECT=%d,\"tcp://%s:%d\",%d,1,\"%s\",\"%s\"\r\n",\
 263              		.loc 1 76 5 view .LVU35
  77:Core/Src/mqtt.c ****     mqttClient.clientIndex,mqttServer.host,mqttServer.port,mqttClient.keepAliveInterval,DEVICE_USER
 264              		.loc 1 77 54 is_stmt 0 view .LVU36
 265 005a 174B     		ldr	r3, .L19+16
 266 005c 9988     		ldrh	r1, [r3, #4]
 267              		.loc 1 77 70 view .LVU37
 268 005e 154A     		ldr	r2, .L19+12
 269 0060 9089     		ldrh	r0, [r2, #12]
  76:Core/Src/mqtt.c ****     mqttClient.clientIndex,mqttServer.host,mqttServer.port,mqttClient.keepAliveInterval,DEVICE_USER
 270              		.loc 1 76 5 view .LVU38
 271 0062 184D     		ldr	r5, .L19+28
 272 0064 0395     		str	r5, [sp, #12]
 273 0066 184D     		ldr	r5, .L19+32
 274 0068 0295     		str	r5, [sp, #8]
 275 006a 0190     		str	r0, [sp, #4]
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 8


 276 006c 0091     		str	r1, [sp]
 277 006e 1B68     		ldr	r3, [r3]
 278 0070 1269     		ldr	r2, [r2, #16]
 279 0072 1649     		ldr	r1, .L19+36
 280 0074 2046     		mov	r0, r4
 281 0076 FFF7FEFF 		bl	sprintf
 282              	.LVL20:
  78:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand,"+CMQTTCONNECT: 0,0\r\n",TIME_LONG)!=SIM_TRUE)
 283              		.loc 1 78 5 is_stmt 1 view .LVU39
 284              		.loc 1 78 8 is_stmt 0 view .LVU40
 285 007a 40F2DC52 		movw	r2, #1500
 286 007e 1449     		ldr	r1, .L19+40
 287 0080 2046     		mov	r0, r4
 288 0082 FFF7FEFF 		bl	sim7672_send_command
 289              	.LVL21:
 290              		.loc 1 78 7 view .LVU41
 291 0086 0128     		cmp	r0, #1
 292 0088 0AD1     		bne	.L18
 293              	.L14:
  79:Core/Src/mqtt.c ****     {
  80:Core/Src/mqtt.c ****         sim7672_errorHandle();
  81:Core/Src/mqtt.c ****     }
  82:Core/Src/mqtt.c ****     HAL_Delay(100);
 294              		.loc 1 82 5 is_stmt 1 view .LVU42
 295 008a 6420     		movs	r0, #100
 296 008c FFF7FEFF 		bl	HAL_Delay
 297              	.LVL22:
  83:Core/Src/mqtt.c **** }
 298              		.loc 1 83 1 is_stmt 0 view .LVU43
 299 0090 05B0     		add	sp, sp, #20
 300              	.LCFI3:
 301              		.cfi_remember_state
 302              		.cfi_def_cfa_offset 12
 303              		@ sp needed
 304 0092 30BD     		pop	{r4, r5, pc}
 305              	.L16:
 306              	.LCFI4:
 307              		.cfi_restore_state
  63:Core/Src/mqtt.c ****     }
 308              		.loc 1 63 9 is_stmt 1 view .LVU44
 309 0094 FFF7FEFF 		bl	sim7672_errorHandle
 310              	.LVL23:
 311 0098 C1E7     		b	.L12
 312              	.L17:
  70:Core/Src/mqtt.c ****     }
 313              		.loc 1 70 9 view .LVU45
 314 009a FFF7FEFF 		bl	sim7672_errorHandle
 315              	.LVL24:
 316 009e D3E7     		b	.L13
 317              	.L18:
  80:Core/Src/mqtt.c ****     }
 318              		.loc 1 80 9 view .LVU46
 319 00a0 FFF7FEFF 		bl	sim7672_errorHandle
 320              	.LVL25:
 321 00a4 F1E7     		b	.L14
 322              	.L20:
 323 00a6 00BF     		.align	2
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 9


 324              	.L19:
 325 00a8 00000000 		.word	.LANCHOR0
 326 00ac 00000000 		.word	.LC5
 327 00b0 14000000 		.word	.LC6
 328 00b4 00000000 		.word	.LANCHOR1
 329 00b8 00000000 		.word	.LANCHOR2
 330 00bc 24000000 		.word	.LC7
 331 00c0 40000000 		.word	.LC8
 332 00c4 7C000000 		.word	.LC10
 333 00c8 A4000000 		.word	.LC11
 334 00cc 48000000 		.word	.LC9
 335 00d0 BC000000 		.word	.LC12
 336              		.cfi_endproc
 337              	.LFE69:
 339              		.section	.rodata.mqtt_pub.str1.4,"aMS",%progbits,1
 340              		.align	2
 341              	.LC13:
 342 0000 41542B43 		.ascii	"AT+CMQTTTOPIC=%d,%d\015\012\000"
 342      4D515454 
 342      544F5049 
 342      433D2564 
 342      2C25640D 
 343 0016 0000     		.align	2
 344              	.LC14:
 345 0018 3E00     		.ascii	">\000"
 346 001a 0000     		.align	2
 347              	.LC15:
 348 001c 41542B43 		.ascii	"AT+CMQTTPAYLOAD=%d,%d\015\012\000"
 348      4D515454 
 348      5041594C 
 348      4F41443D 
 348      25642C25 
 349              		.align	2
 350              	.LC16:
 351 0034 41542B43 		.ascii	"AT+CMQTTPUB=%d,%d,%d\015\012\000"
 351      4D515454 
 351      5055423D 
 351      25642C25 
 351      642C2564 
 352 004b 00       		.align	2
 353              	.LC17:
 354 004c 2B434D51 		.ascii	"+CMQTTPUB: 0,0\015\012\000"
 354      54545055 
 354      423A2030 
 354      2C300D0A 
 354      00
 355              		.section	.text.mqtt_pub,"ax",%progbits
 356              		.align	1
 357              		.global	mqtt_pub
 358              		.syntax unified
 359              		.thumb
 360              		.thumb_func
 362              	mqtt_pub:
 363              	.LVL26:
 364              	.LFB70:
  84:Core/Src/mqtt.c **** 
  85:Core/Src/mqtt.c **** void mqtt_pub(char *topic, char *payload)
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 10


  86:Core/Src/mqtt.c **** {
 365              		.loc 1 86 1 view -0
 366              		.cfi_startproc
 367              		@ args = 0, pretend = 0, frame = 0
 368              		@ frame_needed = 0, uses_anonymous_args = 0
 369              		.loc 1 86 1 is_stmt 0 view .LVU48
 370 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 371              	.LCFI5:
 372              		.cfi_def_cfa_offset 36
 373              		.cfi_offset 4, -36
 374              		.cfi_offset 5, -32
 375              		.cfi_offset 6, -28
 376              		.cfi_offset 7, -24
 377              		.cfi_offset 8, -20
 378              		.cfi_offset 9, -16
 379              		.cfi_offset 10, -12
 380              		.cfi_offset 11, -8
 381              		.cfi_offset 14, -4
 382 0004 83B0     		sub	sp, sp, #12
 383              	.LCFI6:
 384              		.cfi_def_cfa_offset 48
 385 0006 8146     		mov	r9, r0
 386 0008 0F46     		mov	r7, r1
  87:Core/Src/mqtt.c ****     int len_topic = strlen(topic);
 387              		.loc 1 87 5 is_stmt 1 view .LVU49
 388              		.loc 1 87 21 is_stmt 0 view .LVU50
 389 000a FFF7FEFF 		bl	strlen
 390              	.LVL27:
 391              		.loc 1 87 21 view .LVU51
 392 000e 8246     		mov	r10, r0
 393              	.LVL28:
  88:Core/Src/mqtt.c ****     int len_payload=strlen(payload);
 394              		.loc 1 88 5 is_stmt 1 view .LVU52
 395              		.loc 1 88 21 is_stmt 0 view .LVU53
 396 0010 3846     		mov	r0, r7
 397              	.LVL29:
 398              		.loc 1 88 21 view .LVU54
 399 0012 FFF7FEFF 		bl	strlen
 400              	.LVL30:
 401 0016 8046     		mov	r8, r0
 402              	.LVL31:
  89:Core/Src/mqtt.c **** 
  90:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
 403              		.loc 1 90 5 is_stmt 1 view .LVU55
 404 0018 224C     		ldr	r4, .L23
 405 001a C825     		movs	r5, #200
 406 001c 2A46     		mov	r2, r5
 407 001e 0021     		movs	r1, #0
 408 0020 2046     		mov	r0, r4
 409              	.LVL32:
 410              		.loc 1 90 5 is_stmt 0 view .LVU56
 411 0022 FFF7FEFF 		bl	memset
 412              	.LVL33:
  91:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTTOPIC=%d,%d\r\n",mqttClient.clientIndex,len_topic);
 413              		.loc 1 91 5 is_stmt 1 view .LVU57
 414 0026 204E     		ldr	r6, .L23+4
 415 0028 5346     		mov	r3, r10
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 11


 416 002a 3269     		ldr	r2, [r6, #16]
 417 002c 1F49     		ldr	r1, .L23+8
 418 002e 2046     		mov	r0, r4
 419 0030 FFF7FEFF 		bl	sprintf
 420              	.LVL34:
  92:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand,">",TIME_VERY_SHORT)!=SIM_TRUE)
 421              		.loc 1 92 5 view .LVU58
 422              		.loc 1 92 8 is_stmt 0 view .LVU59
 423 0034 DFF878B0 		ldr	fp, .L23+12
 424 0038 2A46     		mov	r2, r5
 425 003a 5946     		mov	r1, fp
 426 003c 2046     		mov	r0, r4
 427 003e FFF7FEFF 		bl	sim7672_send_command
 428              	.LVL35:
  93:Core/Src/mqtt.c ****     {
  94:Core/Src/mqtt.c ****         //sim7672_errorHandle();
  95:Core/Src/mqtt.c ****     }
 429              		.loc 1 95 5 is_stmt 1 view .LVU60
  96:Core/Src/mqtt.c ****     //HAL_Delay(100);
  97:Core/Src/mqtt.c ****     //sim7672_sendcmd_notresp(topic);
  98:Core/Src/mqtt.c ****     if(sim7672_send_command(topic,"OK\r\n",TIME_VERY_SHORT)!=SIM_TRUE)
 430              		.loc 1 98 5 view .LVU61
 431              		.loc 1 98 8 is_stmt 0 view .LVU62
 432 0042 DFF870A0 		ldr	r10, .L23+16
 433              	.LVL36:
 434              		.loc 1 98 8 view .LVU63
 435 0046 2A46     		mov	r2, r5
 436 0048 5146     		mov	r1, r10
 437 004a 4846     		mov	r0, r9
 438 004c FFF7FEFF 		bl	sim7672_send_command
 439              	.LVL37:
  99:Core/Src/mqtt.c ****     {
 100:Core/Src/mqtt.c ****         //sim7672_errorHandle();
 101:Core/Src/mqtt.c ****     }
 440              		.loc 1 101 5 is_stmt 1 view .LVU64
 102:Core/Src/mqtt.c ****     //HAL_Delay(100);
 103:Core/Src/mqtt.c **** 
 104:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
 441              		.loc 1 104 5 view .LVU65
 442 0050 2A46     		mov	r2, r5
 443 0052 0021     		movs	r1, #0
 444 0054 2046     		mov	r0, r4
 445 0056 FFF7FEFF 		bl	memset
 446              	.LVL38:
 105:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTPAYLOAD=%d,%d\r\n",mqttClient.clientIndex,len_payload);
 447              		.loc 1 105 5 view .LVU66
 448 005a 4346     		mov	r3, r8
 449 005c 3269     		ldr	r2, [r6, #16]
 450 005e 1649     		ldr	r1, .L23+20
 451 0060 2046     		mov	r0, r4
 452 0062 FFF7FEFF 		bl	sprintf
 453              	.LVL39:
 106:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand,">",TIME_VERY_SHORT)!=SIM_TRUE)
 454              		.loc 1 106 5 view .LVU67
 455              		.loc 1 106 8 is_stmt 0 view .LVU68
 456 0066 2A46     		mov	r2, r5
 457 0068 5946     		mov	r1, fp
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 12


 458 006a 2046     		mov	r0, r4
 459 006c FFF7FEFF 		bl	sim7672_send_command
 460              	.LVL40:
 107:Core/Src/mqtt.c ****     {
 108:Core/Src/mqtt.c ****         //sim7672_errorHandle();
 109:Core/Src/mqtt.c ****     }
 461              		.loc 1 109 5 is_stmt 1 view .LVU69
 110:Core/Src/mqtt.c ****     //HAL_Delay(100);
 111:Core/Src/mqtt.c ****     if(sim7672_send_command(payload,"OK\r\n",TIME_VERY_SHORT)!=SIM_TRUE)
 462              		.loc 1 111 5 view .LVU70
 463              		.loc 1 111 8 is_stmt 0 view .LVU71
 464 0070 2A46     		mov	r2, r5
 465 0072 5146     		mov	r1, r10
 466 0074 3846     		mov	r0, r7
 467 0076 FFF7FEFF 		bl	sim7672_send_command
 468              	.LVL41:
 112:Core/Src/mqtt.c ****     {
 113:Core/Src/mqtt.c ****         //sim7672_errorHandle();
 114:Core/Src/mqtt.c ****     }
 469              		.loc 1 114 5 is_stmt 1 view .LVU72
 115:Core/Src/mqtt.c ****     //HAL_Delay(100);
 116:Core/Src/mqtt.c **** 
 117:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
 470              		.loc 1 117 5 view .LVU73
 471 007a 2A46     		mov	r2, r5
 472 007c 0021     		movs	r1, #0
 473 007e 2046     		mov	r0, r4
 474 0080 FFF7FEFF 		bl	memset
 475              	.LVL42:
 118:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTPUB=%d,%d,%d\r\n",mqttClient.clientIndex,mqttClient.QoS,mqttClient.k
 476              		.loc 1 118 5 view .LVU74
 477              		.loc 1 118 98 is_stmt 0 view .LVU75
 478 0084 B389     		ldrh	r3, [r6, #12]
 479              		.loc 1 118 5 view .LVU76
 480 0086 0093     		str	r3, [sp]
 481 0088 7369     		ldr	r3, [r6, #20]
 482 008a 3269     		ldr	r2, [r6, #16]
 483 008c 0B49     		ldr	r1, .L23+24
 484 008e 2046     		mov	r0, r4
 485 0090 FFF7FEFF 		bl	sprintf
 486              	.LVL43:
 119:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand,"+CMQTTPUB: 0,0\r\n",TIME_VERY_SHORT)!=SIM_TRUE)
 487              		.loc 1 119 5 is_stmt 1 view .LVU77
 488              		.loc 1 119 8 is_stmt 0 view .LVU78
 489 0094 2A46     		mov	r2, r5
 490 0096 0A49     		ldr	r1, .L23+28
 491 0098 2046     		mov	r0, r4
 492 009a FFF7FEFF 		bl	sim7672_send_command
 493              	.LVL44:
 120:Core/Src/mqtt.c ****     {
 121:Core/Src/mqtt.c ****         //sim7672_errorHandle();
 122:Core/Src/mqtt.c ****     }
 494              		.loc 1 122 5 is_stmt 1 view .LVU79
 123:Core/Src/mqtt.c ****     //HAL_Delay(100);
 124:Core/Src/mqtt.c **** }
 495              		.loc 1 124 1 is_stmt 0 view .LVU80
 496 009e 03B0     		add	sp, sp, #12
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 13


 497              	.LCFI7:
 498              		.cfi_def_cfa_offset 36
 499              		@ sp needed
 500 00a0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 501              	.LVL45:
 502              	.L24:
 503              		.loc 1 124 1 view .LVU81
 504              		.align	2
 505              	.L23:
 506 00a4 00000000 		.word	.LANCHOR0
 507 00a8 00000000 		.word	.LANCHOR1
 508 00ac 00000000 		.word	.LC13
 509 00b0 18000000 		.word	.LC14
 510 00b4 40000000 		.word	.LC8
 511 00b8 1C000000 		.word	.LC15
 512 00bc 34000000 		.word	.LC16
 513 00c0 4C000000 		.word	.LC17
 514              		.cfi_endproc
 515              	.LFE70:
 517              		.section	.rodata.mqtt_sub.str1.4,"aMS",%progbits,1
 518              		.align	2
 519              	.LC18:
 520 0000 41542B43 		.ascii	"AT+CMQTTSUBTOPIC=%d,%d,%d\015\012\000"
 520      4D515454 
 520      53554254 
 520      4F504943 
 520      3D25642C 
 521              		.align	2
 522              	.LC19:
 523 001c 41542B43 		.ascii	"AT+CMQTTSUB=%d\015\012\000"
 523      4D515454 
 523      5355423D 
 523      25640D0A 
 523      00
 524 002d 000000   		.align	2
 525              	.LC20:
 526 0030 2B434D51 		.ascii	"+CMQTTSUB: 0,0\015\012\000"
 526      54545355 
 526      423A2030 
 526      2C300D0A 
 526      00
 527 0041 000000   		.align	2
 528              	.LC21:
 529 0044 2B434D51 		.ascii	"+CMQTTRXPAYLOAD:\000"
 529      54545258 
 529      5041594C 
 529      4F41443A 
 529      00
 530 0055 000000   		.align	2
 531              	.LC22:
 532 0058 7061796C 		.ascii	"payload:\000"
 532      6F61643A 
 532      00
 533              		.section	.text.mqtt_sub,"ax",%progbits
 534              		.align	1
 535              		.global	mqtt_sub
 536              		.syntax unified
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 14


 537              		.thumb
 538              		.thumb_func
 540              	mqtt_sub:
 541              	.LVL46:
 542              	.LFB71:
 125:Core/Src/mqtt.c **** /*
 126:Core/Src/mqtt.c **** AT+CMQTTSUB=0
 127:Core/Src/mqtt.c **** OK
 128:Core/Src/mqtt.c **** 
 129:Core/Src/mqtt.c **** +CMQTTRXSTART: 0,6,18
 130:Core/Src/mqtt.c **** 
 131:Core/Src/mqtt.c **** +CMQTTRXTOPIC: 0,6
 132:Core/Src/mqtt.c **** test1z
 133:Core/Src/mqtt.c **** 
 134:Core/Src/mqtt.c **** +CMQTTRXPAYLOAD: 0,18
 135:Core/Src/mqtt.c **** payload
 136:Core/Src/mqtt.c **** 
 137:Core/Src/mqtt.c **** +CMQTTRXEND: 0
 138:Core/Src/mqtt.c **** 
 139:Core/Src/mqtt.c **** +CMQTTSUB: 0,0
 140:Core/Src/mqtt.c **** */
 141:Core/Src/mqtt.c **** void mqtt_sub(char *topic)
 142:Core/Src/mqtt.c **** {
 543              		.loc 1 142 1 is_stmt 1 view -0
 544              		.cfi_startproc
 545              		@ args = 0, pretend = 0, frame = 0
 546              		@ frame_needed = 0, uses_anonymous_args = 0
 547              		.loc 1 142 1 is_stmt 0 view .LVU83
 548 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 549              	.LCFI8:
 550              		.cfi_def_cfa_offset 20
 551              		.cfi_offset 4, -20
 552              		.cfi_offset 5, -16
 553              		.cfi_offset 6, -12
 554              		.cfi_offset 7, -8
 555              		.cfi_offset 14, -4
 556 0002 83B0     		sub	sp, sp, #12
 557              	.LCFI9:
 558              		.cfi_def_cfa_offset 32
 559 0004 0446     		mov	r4, r0
 143:Core/Src/mqtt.c ****     int len_topic = strlen(topic);
 560              		.loc 1 143 5 is_stmt 1 view .LVU84
 561              		.loc 1 143 21 is_stmt 0 view .LVU85
 562 0006 FFF7FEFF 		bl	strlen
 563              	.LVL47:
 564              		.loc 1 143 21 view .LVU86
 565 000a 0646     		mov	r6, r0
 566              	.LVL48:
 144:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
 567              		.loc 1 144 5 is_stmt 1 view .LVU87
 568 000c 334D     		ldr	r5, .L34
 569 000e C827     		movs	r7, #200
 570 0010 3A46     		mov	r2, r7
 571 0012 0021     		movs	r1, #0
 572 0014 2846     		mov	r0, r5
 573              	.LVL49:
 574              		.loc 1 144 5 is_stmt 0 view .LVU88
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 15


 575 0016 FFF7FEFF 		bl	memset
 576              	.LVL50:
 145:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTSUBTOPIC=%d,%d,%d\r\n",mqttClient.clientIndex,len_topic,mqttClient.Q
 577              		.loc 1 145 5 is_stmt 1 view .LVU89
 578 001a 314A     		ldr	r2, .L34+4
 579 001c 5369     		ldr	r3, [r2, #20]
 580 001e 0093     		str	r3, [sp]
 581 0020 3346     		mov	r3, r6
 582 0022 1269     		ldr	r2, [r2, #16]
 583 0024 2F49     		ldr	r1, .L34+8
 584 0026 2846     		mov	r0, r5
 585 0028 FFF7FEFF 		bl	sprintf
 586              	.LVL51:
 146:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand,">",TIME_VERY_SHORT)!=SIM_TRUE)
 587              		.loc 1 146 5 view .LVU90
 588              		.loc 1 146 8 is_stmt 0 view .LVU91
 589 002c 3A46     		mov	r2, r7
 590 002e 2E49     		ldr	r1, .L34+12
 591 0030 2846     		mov	r0, r5
 592 0032 FFF7FEFF 		bl	sim7672_send_command
 593              	.LVL52:
 594              		.loc 1 146 7 view .LVU92
 595 0036 0128     		cmp	r0, #1
 596 0038 47D1     		bne	.L31
 597              	.L26:
 147:Core/Src/mqtt.c ****     {
 148:Core/Src/mqtt.c ****         sim7672_errorHandle();
 149:Core/Src/mqtt.c ****     }
 150:Core/Src/mqtt.c ****     HAL_Delay(100);
 598              		.loc 1 150 5 is_stmt 1 view .LVU93
 599 003a 6420     		movs	r0, #100
 600 003c FFF7FEFF 		bl	HAL_Delay
 601              	.LVL53:
 151:Core/Src/mqtt.c ****     //sim7672_sendcmd_notresp(topic);
 152:Core/Src/mqtt.c ****     if(sim7672_send_command(topic,"OK\r\n",TIME_VERY_SHORT)!=SIM_TRUE)
 602              		.loc 1 152 5 view .LVU94
 603              		.loc 1 152 8 is_stmt 0 view .LVU95
 604 0040 C822     		movs	r2, #200
 605 0042 2A49     		ldr	r1, .L34+16
 606 0044 2046     		mov	r0, r4
 607 0046 FFF7FEFF 		bl	sim7672_send_command
 608              	.LVL54:
 609              		.loc 1 152 7 view .LVU96
 610 004a 0128     		cmp	r0, #1
 611 004c 40D1     		bne	.L32
 612              	.L27:
 153:Core/Src/mqtt.c ****     {
 154:Core/Src/mqtt.c ****         sim7672_errorHandle();
 155:Core/Src/mqtt.c ****     }
 156:Core/Src/mqtt.c ****     HAL_Delay(100);
 613              		.loc 1 156 5 is_stmt 1 view .LVU97
 614 004e 6420     		movs	r0, #100
 615 0050 FFF7FEFF 		bl	HAL_Delay
 616              	.LVL55:
 157:Core/Src/mqtt.c ****     memset(ATcommand,'\0',sizeof(ATcommand));
 617              		.loc 1 157 5 view .LVU98
 618 0054 214C     		ldr	r4, .L34
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 16


 619              	.LVL56:
 620              		.loc 1 157 5 is_stmt 0 view .LVU99
 621 0056 C822     		movs	r2, #200
 622 0058 0021     		movs	r1, #0
 623 005a 2046     		mov	r0, r4
 624 005c FFF7FEFF 		bl	memset
 625              	.LVL57:
 158:Core/Src/mqtt.c ****     sprintf(ATcommand,"AT+CMQTTSUB=%d\r\n",mqttClient.clientIndex);
 626              		.loc 1 158 5 is_stmt 1 view .LVU100
 627 0060 1F4B     		ldr	r3, .L34+4
 628 0062 1A69     		ldr	r2, [r3, #16]
 629 0064 2249     		ldr	r1, .L34+20
 630 0066 2046     		mov	r0, r4
 631 0068 FFF7FEFF 		bl	sprintf
 632              	.LVL58:
 159:Core/Src/mqtt.c ****     if(sim7672_send_command(ATcommand,"+CMQTTSUB: 0,0\r\n",TIME_LONG)!=SIM_TRUE)
 633              		.loc 1 159 5 view .LVU101
 634              		.loc 1 159 8 is_stmt 0 view .LVU102
 635 006c 40F2DC52 		movw	r2, #1500
 636 0070 2049     		ldr	r1, .L34+24
 637 0072 2046     		mov	r0, r4
 638 0074 FFF7FEFF 		bl	sim7672_send_command
 639              	.LVL59:
 640              		.loc 1 159 7 view .LVU103
 641 0078 0128     		cmp	r0, #1
 642 007a 2CD1     		bne	.L33
 643              	.L28:
 160:Core/Src/mqtt.c ****     {
 161:Core/Src/mqtt.c ****         sim7672_errorHandle();
 162:Core/Src/mqtt.c ****     }
 163:Core/Src/mqtt.c ****     HAL_Delay(100);
 644              		.loc 1 163 5 is_stmt 1 view .LVU104
 645 007c 6420     		movs	r0, #100
 646 007e FFF7FEFF 		bl	HAL_Delay
 647              	.LVL60:
 164:Core/Src/mqtt.c ****     //FInd Topic
 165:Core/Src/mqtt.c **** 
 166:Core/Src/mqtt.c ****     //Find Payload
 167:Core/Src/mqtt.c ****     char *payloadStart = strstr(simRxResponse,"+CMQTTRXPAYLOAD:");
 648              		.loc 1 167 5 view .LVU105
 649              		.loc 1 167 26 is_stmt 0 view .LVU106
 650 0082 1D49     		ldr	r1, .L34+28
 651 0084 1D48     		ldr	r0, .L34+32
 652 0086 FFF7FEFF 		bl	strstr
 653              	.LVL61:
 168:Core/Src/mqtt.c ****     if(payloadStart!=NULL)
 654              		.loc 1 168 5 is_stmt 1 view .LVU107
 655              		.loc 1 168 7 is_stmt 0 view .LVU108
 656 008a E0B1     		cbz	r0, .L25
 169:Core/Src/mqtt.c ****     {
 170:Core/Src/mqtt.c ****         // Di chuyển con trỏ đến sau dấu xuống dòng đầu tiên
 171:Core/Src/mqtt.c ****         payloadStart=strchr(payloadStart,'\n');
 657              		.loc 1 171 9 is_stmt 1 view .LVU109
 658              		.loc 1 171 22 is_stmt 0 view .LVU110
 659 008c 0A21     		movs	r1, #10
 660 008e FFF7FEFF 		bl	strchr
 661              	.LVL62:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 17


 172:Core/Src/mqtt.c ****         if (payloadStart != NULL) {
 662              		.loc 1 172 9 is_stmt 1 view .LVU111
 663              		.loc 1 172 12 is_stmt 0 view .LVU112
 664 0092 0446     		mov	r4, r0
 665 0094 B8B1     		cbz	r0, .L25
 666              	.LBB2:
 173:Core/Src/mqtt.c ****             // Tìm vị trí bắt đầu thực sự của payload
 174:Core/Src/mqtt.c ****             payloadStart++;
 667              		.loc 1 174 13 is_stmt 1 view .LVU113
 668              		.loc 1 174 25 is_stmt 0 view .LVU114
 669 0096 0134     		adds	r4, r4, #1
 670              	.LVL63:
 175:Core/Src/mqtt.c ****             
 176:Core/Src/mqtt.c ****             // Tìm vị trí kết thúc của payload
 177:Core/Src/mqtt.c ****             char *payloadEnd = strstr(payloadStart, "\n");
 671              		.loc 1 177 13 is_stmt 1 view .LVU115
 672              		.loc 1 177 32 is_stmt 0 view .LVU116
 673 0098 0A21     		movs	r1, #10
 674 009a 2046     		mov	r0, r4
 675 009c FFF7FEFF 		bl	strchr
 676              	.LVL64:
 178:Core/Src/mqtt.c ****             
 179:Core/Src/mqtt.c ****             if (payloadEnd != NULL) {
 677              		.loc 1 179 13 is_stmt 1 view .LVU117
 678              		.loc 1 179 16 is_stmt 0 view .LVU118
 679 00a0 88B1     		cbz	r0, .L25
 180:Core/Src/mqtt.c ****                 // Copy payload vào một buffer mới để xử lý
 181:Core/Src/mqtt.c ****                 strncpy(mqttData.payload, payloadStart, payloadEnd - payloadStart);
 680              		.loc 1 181 17 is_stmt 1 view .LVU119
 681              		.loc 1 181 68 is_stmt 0 view .LVU120
 682 00a2 051B     		subs	r5, r0, r4
 683              		.loc 1 181 17 view .LVU121
 684 00a4 164E     		ldr	r6, .L34+36
 685              	.LVL65:
 686              		.loc 1 181 17 view .LVU122
 687 00a6 06F11407 		add	r7, r6, #20
 688 00aa 2A46     		mov	r2, r5
 689 00ac 2146     		mov	r1, r4
 690 00ae 3846     		mov	r0, r7
 691              	.LVL66:
 692              		.loc 1 181 17 view .LVU123
 693 00b0 FFF7FEFF 		bl	strncpy
 694              	.LVL67:
 182:Core/Src/mqtt.c ****                 mqttData.payload[payloadEnd - payloadStart] = '\0';
 695              		.loc 1 182 17 is_stmt 1 view .LVU124
 696              		.loc 1 182 61 is_stmt 0 view .LVU125
 697 00b4 3544     		add	r5, r5, r6
 698 00b6 0023     		movs	r3, #0
 699 00b8 2B75     		strb	r3, [r5, #20]
 183:Core/Src/mqtt.c ****                 log_data("payload:");
 700              		.loc 1 183 17 is_stmt 1 view .LVU126
 701 00ba 1248     		ldr	r0, .L34+40
 702 00bc FFF7FEFF 		bl	log_data
 703              	.LVL68:
 184:Core/Src/mqtt.c ****                 log_data(mqttData.payload);
 704              		.loc 1 184 17 view .LVU127
 705 00c0 3846     		mov	r0, r7
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 18


 706 00c2 FFF7FEFF 		bl	log_data
 707              	.LVL69:
 708              	.L25:
 709              		.loc 1 184 17 is_stmt 0 view .LVU128
 710              	.LBE2:
 185:Core/Src/mqtt.c ****             }
 186:Core/Src/mqtt.c ****         }
 187:Core/Src/mqtt.c ****     }
 188:Core/Src/mqtt.c **** }...
 711              		.loc 1 188 1 view .LVU129
 712 00c6 03B0     		add	sp, sp, #12
 713              	.LCFI10:
 714              		.cfi_remember_state
 715              		.cfi_def_cfa_offset 20
 716              		@ sp needed
 717 00c8 F0BD     		pop	{r4, r5, r6, r7, pc}
 718              	.LVL70:
 719              	.L31:
 720              	.LCFI11:
 721              		.cfi_restore_state
 148:Core/Src/mqtt.c ****         sim7672_errorHandle();
 722              		.loc 1 148 9 is_stmt 1 view .LVU130
 723 00ca FFF7FEFF 		bl	sim7672_errorHandle
 724              	.LVL71:
 725 00ce B4E7     		b	.L26
 726              	.L32:
 154:Core/Src/mqtt.c ****         sim7672_errorHandle();
 727              		.loc 1 154 9 view .LVU131
 728 00d0 FFF7FEFF 		bl	sim7672_errorHandle
 729              	.LVL72:
 730 00d4 BBE7     		b	.L27
 731              	.LVL73:
 732              	.L33:
 161:Core/Src/mqtt.c ****         sim7672_errorHandle();
 733              		.loc 1 161 9 view .LVU132
 734 00d6 FFF7FEFF 		bl	sim7672_errorHandle
 735              	.LVL74:
 736 00da CFE7     		b	.L28
 737              	.L35:
 738              		.align	2
 739              	.L34:
 740 00dc 00000000 		.word	.LANCHOR0
 741 00e0 00000000 		.word	.LANCHOR1
 742 00e4 00000000 		.word	.LC18
 743 00e8 18000000 		.word	.LC14
 744 00ec 40000000 		.word	.LC8
 745 00f0 1C000000 		.word	.LC19
 746 00f4 30000000 		.word	.LC20
 747 00f8 44000000 		.word	.LC21
 748 00fc 00000000 		.word	simRxResponse
 749 0100 00000000 		.word	.LANCHOR3
 750 0104 58000000 		.word	.LC22
 751              		.cfi_endproc
 752              	.LFE71:
 754              		.global	ATcommand
 755              		.global	mqttData
 756              		.global	mqttClient
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 19


 757              		.section	.rodata.str1.4,"aMS",%progbits,1
 758              		.align	2
 759              	.LC23:
 760 0000 00       		.ascii	"\000"
 761 0001 000000   		.align	2
 762              	.LC24:
 763 0004 4441544E 		.ascii	"DATN_Tracking_20191855\000"
 763      5F547261 
 763      636B696E 
 763      675F3230 
 763      31393138 
 764              		.global	mqttServer
 765 001b 00       		.align	2
 766              	.LC25:
 767 001c 64656D6F 		.ascii	"demo.thingsboard.io\000"
 767      2E746869 
 767      6E677362 
 767      6F617264 
 767      2E696F00 
 768              		.section	.bss.ATcommand,"aw",%nobits
 769              		.align	2
 770              		.set	.LANCHOR0,. + 0
 773              	ATcommand:
 774 0000 00000000 		.space	200
 774      00000000 
 774      00000000 
 774      00000000 
 774      00000000 
 775              		.section	.bss.mqttData,"aw",%nobits
 776              		.align	2
 777              		.set	.LANCHOR3,. + 0
 780              	mqttData:
 781 0000 00000000 		.space	120
 781      00000000 
 781      00000000 
 781      00000000 
 781      00000000 
 782              		.section	.data.mqttClient,"aw"
 783              		.align	2
 784              		.set	.LANCHOR1,. + 0
 787              	mqttClient:
 788 0000 00000000 		.word	.LC23
 789 0004 00000000 		.word	.LC23
 790 0008 04000000 		.word	.LC24
 791 000c 5A00     		.short	90
 792 000e 0000     		.space	2
 793 0010 00000000 		.word	0
 794 0014 00000000 		.word	0
 795              		.section	.data.mqttServer,"aw"
 796              		.align	2
 797              		.set	.LANCHOR2,. + 0
 800              	mqttServer:
 801 0000 1C000000 		.word	.LC25
 802 0004 5B07     		.short	1883
 803 0006 0000     		.space	2
 804 0008 00000000 		.word	0
 805              		.text
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 20


 806              	.Letext0:
 807              		.file 2 "d:\\10 2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 808              		.file 3 "d:\\10 2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 809              		.file 4 "Core/Inc/mqtt.h"
 810              		.file 5 "d:\\10 2021.10\\arm-none-eabi\\include\\string.h"
 811              		.file 6 "Core/Inc/debug.h"
 812              		.file 7 "<built-in>"
 813              		.file 8 "d:\\10 2021.10\\arm-none-eabi\\include\\stdio.h"
 814              		.file 9 "Core/Inc/sim4g_lte.h"
 815              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s 			page 21


DEFINED SYMBOLS
                            *ABS*:00000000 mqtt.c
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:18     .rodata.mqtt_disconnectServer.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:34     .text.mqtt_disconnectServer:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:40     .text.mqtt_disconnectServer:00000000 mqtt_disconnectServer
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:149    .text.mqtt_disconnectServer:00000084 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:160    .rodata.mqtt_connectServer.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:186    .text.mqtt_connectServer:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:192    .text.mqtt_connectServer:00000000 mqtt_connectServer
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:325    .text.mqtt_connectServer:000000a8 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:340    .rodata.mqtt_pub.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:356    .text.mqtt_pub:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:362    .text.mqtt_pub:00000000 mqtt_pub
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:506    .text.mqtt_pub:000000a4 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:518    .rodata.mqtt_sub.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:534    .text.mqtt_sub:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:540    .text.mqtt_sub:00000000 mqtt_sub
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:740    .text.mqtt_sub:000000dc $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:773    .bss.ATcommand:00000000 ATcommand
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:780    .bss.mqttData:00000000 mqttData
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:787    .data.mqttClient:00000000 mqttClient
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:758    .rodata.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:800    .data.mqttServer:00000000 mqttServer
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:769    .bss.ATcommand:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:776    .bss.mqttData:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:783    .data.mqttClient:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccly0jKd.s:796    .data.mqttServer:00000000 $d

UNDEFINED SYMBOLS
memset
sprintf
sim7672_send_command
HAL_Delay
sim7672_errorHandle
strlen
strstr
strchr
strncpy
log_data
simRxResponse
