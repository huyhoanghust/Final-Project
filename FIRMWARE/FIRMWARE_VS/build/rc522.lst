ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"rc522.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.rc522_writeRegister,"ax",%progbits
  18              		.align	1
  19              		.global	rc522_writeRegister
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	rc522_writeRegister:
  25              	.LVL0:
  26              	.LFB68:
  27              		.file 1 "Core/Src/rc522.c"
   1:Core/Src/rc522.c **** /**
   2:Core/Src/rc522.c ****  * @file rc522.c
   3:Core/Src/rc522.c ****  * @author hoanghuyhust (hoangnh191855@sis.hust.edu.vn)
   4:Core/Src/rc522.c ****  * @brief 
   5:Core/Src/rc522.c ****  * @version 0.1
   6:Core/Src/rc522.c ****  * @date 2022-09-25
   7:Core/Src/rc522.c ****  * 
   8:Core/Src/rc522.c ****  * @copyright Copyright (c) 2022
   9:Core/Src/rc522.c ****  * 
  10:Core/Src/rc522.c ****  */
  11:Core/Src/rc522.c **** #include "rc522.h"
  12:Core/Src/rc522.c **** 
  13:Core/Src/rc522.c **** /*
  14:Core/Src/rc522.c ****  * Function Name: rc522_writeRegister
  15:Core/Src/rc522.c ****  * Function Description: To a certain MFRC522 register to write a byte of data
  16:Core/Src/rc522.c ****  * Input Parameter: addr - register address; val - the value to be written
  17:Core/Src/rc522.c ****  * Return value: None
  18:Core/Src/rc522.c ****  */
  19:Core/Src/rc522.c **** void rc522_writeRegister(uint8_t addr, uint8_t val)
  20:Core/Src/rc522.c **** {
  28              		.loc 1 20 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 20 1 is_stmt 0 view .LVU1
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 82B0     		sub	sp, sp, #8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 2


  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 16
  21:Core/Src/rc522.c **** 	uint8_t arr[2] = {0};
  41              		.loc 1 21 2 is_stmt 1 view .LVU2
  42              		.loc 1 21 10 is_stmt 0 view .LVU3
  43 0004 0022     		movs	r2, #0
  44 0006 ADF80420 		strh	r2, [sp, #4]	@ movhi
  22:Core/Src/rc522.c ****     addr = (addr << 1) & 0x7E; // Address format: 0XXXXXX0
  45              		.loc 1 22 5 is_stmt 1 view .LVU4
  46              		.loc 1 22 18 is_stmt 0 view .LVU5
  47 000a 4000     		lsls	r0, r0, #1
  48              	.LVL1:
  49              		.loc 1 22 10 view .LVU6
  50 000c 00F07E00 		and	r0, r0, #126
  51              	.LVL2:
  23:Core/Src/rc522.c **** 	*arr = addr;
  52              		.loc 1 23 2 is_stmt 1 view .LVU7
  53              		.loc 1 23 7 is_stmt 0 view .LVU8
  54 0010 8DF80400 		strb	r0, [sp, #4]
  24:Core/Src/rc522.c **** 	*(arr + 1) = val;
  55              		.loc 1 24 2 is_stmt 1 view .LVU9
  56              		.loc 1 24 13 is_stmt 0 view .LVU10
  57 0014 8DF80510 		strb	r1, [sp, #5]
  25:Core/Src/rc522.c **** 	// CS Low
  26:Core/Src/rc522.c ****     HAL_GPIO_WritePin(RC522_CS_GPIO_Port, RC522_CS_Pin, RESET);
  58              		.loc 1 26 5 is_stmt 1 view .LVU11
  59 0018 084C     		ldr	r4, .L3
  60 001a 1021     		movs	r1, #16
  61              	.LVL3:
  62              		.loc 1 26 5 is_stmt 0 view .LVU12
  63 001c 2046     		mov	r0, r4
  64              	.LVL4:
  65              		.loc 1 26 5 view .LVU13
  66 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
  67              	.LVL5:
  27:Core/Src/rc522.c **** 	// send 2 bytes
  28:Core/Src/rc522.c **** 	//  - top 8 bits are the address. Per the spec, we shift the address left
  29:Core/Src/rc522.c **** 	//   1 bit, clear the LSb, and clear the MSb to indicate a write
  30:Core/Src/rc522.c **** 	// - bottom 8 bits are the data bits being sent for that address,
  31:Core/Src/rc522.c **** 	HAL_SPI_Transmit(&hspi1, arr, 2, 100);
  68              		.loc 1 31 2 is_stmt 1 view .LVU14
  69 0022 6423     		movs	r3, #100
  70 0024 0222     		movs	r2, #2
  71 0026 01A9     		add	r1, sp, #4
  72 0028 0548     		ldr	r0, .L3+4
  73 002a FFF7FEFF 		bl	HAL_SPI_Transmit
  74              	.LVL6:
  32:Core/Src/rc522.c **** 	// cs high
  33:Core/Src/rc522.c ****     HAL_GPIO_WritePin(RC522_CS_GPIO_Port, RC522_CS_Pin, SET);
  75              		.loc 1 33 5 view .LVU15
  76 002e 0122     		movs	r2, #1
  77 0030 1021     		movs	r1, #16
  78 0032 2046     		mov	r0, r4
  79 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
  80              	.LVL7:
  34:Core/Src/rc522.c **** }
  81              		.loc 1 34 1 is_stmt 0 view .LVU16
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 3


  82 0038 02B0     		add	sp, sp, #8
  83              	.LCFI2:
  84              		.cfi_def_cfa_offset 8
  85              		@ sp needed
  86 003a 10BD     		pop	{r4, pc}
  87              	.L4:
  88              		.align	2
  89              	.L3:
  90 003c 00080140 		.word	1073809408
  91 0040 00000000 		.word	hspi1
  92              		.cfi_endproc
  93              	.LFE68:
  95              		.section	.text.rc522_readRegister,"ax",%progbits
  96              		.align	1
  97              		.global	rc522_readRegister
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 102              	rc522_readRegister:
 103              	.LVL8:
 104              	.LFB69:
  35:Core/Src/rc522.c **** 
  36:Core/Src/rc522.c **** /*
  37:Core/Src/rc522.c ****  * Function Name: rc522_readRegister
  38:Core/Src/rc522.c ****  * Description: From a certain MFRC522 read a byte of data register
  39:Core/Src/rc522.c ****  * Input Parameters: addr - register address
  40:Core/Src/rc522.c ****  * Returns: a byte of data read from the register
  41:Core/Src/rc522.c ****  */
  42:Core/Src/rc522.c **** uint8_t rc522_readRegister(uint8_t addr)
  43:Core/Src/rc522.c **** {
 105              		.loc 1 43 1 is_stmt 1 view -0
 106              		.cfi_startproc
 107              		@ args = 0, pretend = 0, frame = 16
 108              		@ frame_needed = 0, uses_anonymous_args = 0
 109              		.loc 1 43 1 is_stmt 0 view .LVU18
 110 0000 70B5     		push	{r4, r5, r6, lr}
 111              	.LCFI3:
 112              		.cfi_def_cfa_offset 16
 113              		.cfi_offset 4, -16
 114              		.cfi_offset 5, -12
 115              		.cfi_offset 6, -8
 116              		.cfi_offset 14, -4
 117 0002 86B0     		sub	sp, sp, #24
 118              	.LCFI4:
 119              		.cfi_def_cfa_offset 40
 120 0004 8DF80F00 		strb	r0, [sp, #15]
  44:Core/Src/rc522.c ****     uint8_t val = 0, temp = 0x00;
 121              		.loc 1 44 5 is_stmt 1 view .LVU19
 122              		.loc 1 44 13 is_stmt 0 view .LVU20
 123 0008 0022     		movs	r2, #0
 124 000a 8DF81720 		strb	r2, [sp, #23]
 125              		.loc 1 44 22 view .LVU21
 126 000e 8DF81620 		strb	r2, [sp, #22]
  45:Core/Src/rc522.c ****     addr = ((addr << 1) & 0x7E) | 0x80; // Address format: 1XXXXXX0
 127              		.loc 1 45 5 is_stmt 1 view .LVU22
 128              		.loc 1 45 19 is_stmt 0 view .LVU23
 129 0012 C3B2     		uxtb	r3, r0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 4


 130 0014 5B00     		lsls	r3, r3, #1
 131              		.loc 1 45 25 view .LVU24
 132 0016 03F07E03 		and	r3, r3, #126
 133              		.loc 1 45 33 view .LVU25
 134 001a 43F08003 		orr	r3, r3, #128
 135              		.loc 1 45 10 view .LVU26
 136 001e 8DF80F30 		strb	r3, [sp, #15]
  46:Core/Src/rc522.c ****     HAL_GPIO_WritePin(RC522_CS_GPIO_Port, RC522_CS_Pin, RESET);
 137              		.loc 1 46 5 is_stmt 1 view .LVU27
 138 0022 114C     		ldr	r4, .L7
 139 0024 1021     		movs	r1, #16
 140 0026 2046     		mov	r0, r4
 141              	.LVL9:
 142              		.loc 1 46 5 is_stmt 0 view .LVU28
 143 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 144              	.LVL10:
  47:Core/Src/rc522.c ****     HAL_SPI_TransmitReceive(&hspi1, &addr, &val, 1, 100);
 145              		.loc 1 47 5 is_stmt 1 view .LVU29
 146 002c 0F4D     		ldr	r5, .L7+4
 147 002e 6426     		movs	r6, #100
 148 0030 0096     		str	r6, [sp]
 149 0032 0123     		movs	r3, #1
 150 0034 0DF11702 		add	r2, sp, #23
 151 0038 0DF10F01 		add	r1, sp, #15
 152 003c 2846     		mov	r0, r5
 153 003e FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 154              	.LVL11:
  48:Core/Src/rc522.c **** 	HAL_SPI_TransmitReceive(&hspi1, &temp, &val, 1, 100);
 155              		.loc 1 48 2 view .LVU30
 156 0042 0096     		str	r6, [sp]
 157 0044 0123     		movs	r3, #1
 158 0046 0DF11702 		add	r2, sp, #23
 159 004a 0DF11601 		add	r1, sp, #22
 160 004e 2846     		mov	r0, r5
 161 0050 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 162              	.LVL12:
  49:Core/Src/rc522.c ****     HAL_GPIO_WritePin(RC522_CS_GPIO_Port, RC522_CS_Pin, SET);
 163              		.loc 1 49 5 view .LVU31
 164 0054 0122     		movs	r2, #1
 165 0056 1021     		movs	r1, #16
 166 0058 2046     		mov	r0, r4
 167 005a FFF7FEFF 		bl	HAL_GPIO_WritePin
 168              	.LVL13:
  50:Core/Src/rc522.c ****     return val;
 169              		.loc 1 50 5 view .LVU32
  51:Core/Src/rc522.c **** }
 170              		.loc 1 51 1 is_stmt 0 view .LVU33
 171 005e 9DF81700 		ldrb	r0, [sp, #23]	@ zero_extendqisi2
 172 0062 06B0     		add	sp, sp, #24
 173              	.LCFI5:
 174              		.cfi_def_cfa_offset 16
 175              		@ sp needed
 176 0064 70BD     		pop	{r4, r5, r6, pc}
 177              	.L8:
 178 0066 00BF     		.align	2
 179              	.L7:
 180 0068 00080140 		.word	1073809408
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 5


 181 006c 00000000 		.word	hspi1
 182              		.cfi_endproc
 183              	.LFE69:
 185              		.section	.text.rc522_reset,"ax",%progbits
 186              		.align	1
 187              		.global	rc522_reset
 188              		.syntax unified
 189              		.thumb
 190              		.thumb_func
 192              	rc522_reset:
 193              	.LFB72:
  52:Core/Src/rc522.c **** 
  53:Core/Src/rc522.c **** /*
  54:Core/Src/rc522.c ****  * Function Name: rc522_init
  55:Core/Src/rc522.c ****  * Description: Initialize RC522
  56:Core/Src/rc522.c ****  * Input: None
  57:Core/Src/rc522.c ****  * Return value: None
  58:Core/Src/rc522.c **** */
  59:Core/Src/rc522.c **** void rc522_init(void)
  60:Core/Src/rc522.c **** {
  61:Core/Src/rc522.c ****     rc522_reset();
  62:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_T_MODE, 0x80);
  63:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_T_PRESCALER, 0xA9);
  64:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_T_RELOAD_L, 0xE8);
  65:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_T_RELOAD_H, 0x03);
  66:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_RF_CFG, 0x70);
  67:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_TX_AUTO, 0x40);
  68:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_MODE, 0x3D);
  69:Core/Src/rc522.c ****     rc522_controlAntenna(ANTENNA_ON);
  70:Core/Src/rc522.c **** }
  71:Core/Src/rc522.c **** 
  72:Core/Src/rc522.c **** /*
  73:Core/Src/rc522.c ****  * Function Name: rc522_controlAntenna
  74:Core/Src/rc522.c ****  * Description: Open or close antennas, each time you start or shut down the natural barrier betwee
  75:Core/Src/rc522.c ****  * Input: ANTENNA_ON or OFF
  76:Core/Src/rc522.c ****  * Return value: None
  77:Core/Src/rc522.c ****  */
  78:Core/Src/rc522.c **** void rc522_controlAntenna(uint8_t mode)
  79:Core/Src/rc522.c **** {
  80:Core/Src/rc522.c **** 	uint8_t temp = 0;
  81:Core/Src/rc522.c ****     if(mode == ANTENNA_OFF)
  82:Core/Src/rc522.c ****     {
  83:Core/Src/rc522.c ****         rc522_clearBitMask(MFRC522_REG_TX_CONTROL, 0x03);
  84:Core/Src/rc522.c ****     }
  85:Core/Src/rc522.c ****     else if(mode == ANTENNA_ON)
  86:Core/Src/rc522.c ****     {
  87:Core/Src/rc522.c **** 		temp = rc522_readRegister(MFRC522_REG_TX_CONTROL);
  88:Core/Src/rc522.c **** 		if(!(temp & 0x03))
  89:Core/Src/rc522.c **** 		{
  90:Core/Src/rc522.c **** 			rc522_setBitMask(MFRC522_REG_TX_CONTROL, 0x03);
  91:Core/Src/rc522.c **** 		}
  92:Core/Src/rc522.c ****         
  93:Core/Src/rc522.c ****     }
  94:Core/Src/rc522.c **** }
  95:Core/Src/rc522.c **** 
  96:Core/Src/rc522.c **** /*
  97:Core/Src/rc522.c ****  * Function Name: rc522_reset
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 6


  98:Core/Src/rc522.c ****  * Description: Reset RC522
  99:Core/Src/rc522.c ****  * Input: None
 100:Core/Src/rc522.c ****  * Return value: None
 101:Core/Src/rc522.c ****  */
 102:Core/Src/rc522.c **** void rc522_reset(void)
 103:Core/Src/rc522.c **** {
 194              		.loc 1 103 1 is_stmt 1 view -0
 195              		.cfi_startproc
 196              		@ args = 0, pretend = 0, frame = 0
 197              		@ frame_needed = 0, uses_anonymous_args = 0
 198 0000 08B5     		push	{r3, lr}
 199              	.LCFI6:
 200              		.cfi_def_cfa_offset 8
 201              		.cfi_offset 3, -8
 202              		.cfi_offset 14, -4
 104:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_COMMAND, PCD_RESETPHASE);
 203              		.loc 1 104 5 view .LVU35
 204 0002 0F21     		movs	r1, #15
 205 0004 0120     		movs	r0, #1
 206 0006 FFF7FEFF 		bl	rc522_writeRegister
 207              	.LVL14:
 105:Core/Src/rc522.c **** }
 208              		.loc 1 105 1 is_stmt 0 view .LVU36
 209 000a 08BD     		pop	{r3, pc}
 210              		.cfi_endproc
 211              	.LFE72:
 213              		.section	.text.rc522_setBitMask,"ax",%progbits
 214              		.align	1
 215              		.global	rc522_setBitMask
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 220              	rc522_setBitMask:
 221              	.LVL15:
 222              	.LFB76:
 106:Core/Src/rc522.c **** 
 107:Core/Src/rc522.c **** 
 108:Core/Src/rc522.c **** RC522_Status_t rc522_check(uint8_t *id)
 109:Core/Src/rc522.c **** {
 110:Core/Src/rc522.c ****     RC522_Status_t status;
 111:Core/Src/rc522.c ****     status = rc522_request(PICC_REQIDL, id);
 112:Core/Src/rc522.c ****     if(status == RC522_OK)
 113:Core/Src/rc522.c ****     {
 114:Core/Src/rc522.c ****         status = rc522_anticoll(id);
 115:Core/Src/rc522.c ****     }
 116:Core/Src/rc522.c ****     rc522_halt();
 117:Core/Src/rc522.c ****     return status;
 118:Core/Src/rc522.c **** }
 119:Core/Src/rc522.c **** 
 120:Core/Src/rc522.c **** /*
 121:Core/Src/rc522.c ****  * Function Name: rc522_request
 122:Core/Src/rc522.c ****  * Description: Find cards, read the card type number
 123:Core/Src/rc522.c ****  * Input parameters: reqMode - find cards way
 124:Core/Src/rc522.c ****  *   TagType - Return Card Type
 125:Core/Src/rc522.c ****  *    0x4400 = Mifare_UltraLight
 126:Core/Src/rc522.c ****  *    0x0400 = Mifare_One(S50)
 127:Core/Src/rc522.c ****  *    0x0200 = Mifare_One(S70)
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 7


 128:Core/Src/rc522.c ****  *    0x0800 = Mifare_Pro(X)
 129:Core/Src/rc522.c ****  *    0x4403 = Mifare_DESFire
 130:Core/Src/rc522.c ****  * Return value: the successful return MI_OK
 131:Core/Src/rc522.c ****  */
 132:Core/Src/rc522.c **** RC522_Status_t rc522_request(uint8_t reqMode, uint8_t *tagType)
 133:Core/Src/rc522.c **** {
 134:Core/Src/rc522.c ****     RC522_Status_t status;
 135:Core/Src/rc522.c ****     uint16_t backbits;
 136:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_BIT_FRAMING, 0x07);
 137:Core/Src/rc522.c ****     tagType[0] = reqMode;
 138:Core/Src/rc522.c ****     status = rc522_toCard(PCD_TRANSCEIVE, tagType, 1, tagType, &backbits);
 139:Core/Src/rc522.c ****     if((status != RC522_OK) || (backbits != 0x10)) 
 140:Core/Src/rc522.c ****     {    
 141:Core/Src/rc522.c **** 		status = RC522_ERR;
 142:Core/Src/rc522.c **** 	}
 143:Core/Src/rc522.c **** 	return status;
 144:Core/Src/rc522.c **** }
 145:Core/Src/rc522.c **** 
 146:Core/Src/rc522.c **** /*
 147:Core/Src/rc522.c ****  * Function Name: rc522_toCard
 148:Core/Src/rc522.c ****  * Description: RC522 and ISO14443 card communication
 149:Core/Src/rc522.c ****  * Input Parameters: command - MF522 command word,
 150:Core/Src/rc522.c ****  *			 sendData--RC522 sent to the card by the data
 151:Core/Src/rc522.c ****  *			 sendLen--Length of data sent
 152:Core/Src/rc522.c ****  *			 backData--Received the card returns data,
 153:Core/Src/rc522.c ****  *			 backLen--Return data bit length
 154:Core/Src/rc522.c ****  * Return value: the successful return MI_OK
 155:Core/Src/rc522.c ****  */
 156:Core/Src/rc522.c **** RC522_Status_t rc522_toCard(uint8_t command, uint8_t *sendData, uint8_t sendLen, uint8_t *backData,
 157:Core/Src/rc522.c **** {
 158:Core/Src/rc522.c ****     uint8_t status = RC522_ERR;
 159:Core/Src/rc522.c **** 	uint8_t irqEn = 0x00;
 160:Core/Src/rc522.c **** 	uint8_t waitIRq = 0x00;
 161:Core/Src/rc522.c **** 	uint8_t lastBits;
 162:Core/Src/rc522.c **** 	uint8_t n;
 163:Core/Src/rc522.c **** 	uint16_t i;
 164:Core/Src/rc522.c **** 
 165:Core/Src/rc522.c **** 	switch(command)
 166:Core/Src/rc522.c ****     {
 167:Core/Src/rc522.c **** 		case PCD_AUTHENT:
 168:Core/Src/rc522.c ****         {
 169:Core/Src/rc522.c **** 			irqEn = 0x12;
 170:Core/Src/rc522.c **** 			waitIRq = 0x10;
 171:Core/Src/rc522.c **** 			break;
 172:Core/Src/rc522.c **** 		}
 173:Core/Src/rc522.c **** 		case PCD_TRANSCEIVE:
 174:Core/Src/rc522.c ****         {
 175:Core/Src/rc522.c **** 			irqEn = 0x77;
 176:Core/Src/rc522.c **** 			waitIRq = 0x30;
 177:Core/Src/rc522.c **** 			break;
 178:Core/Src/rc522.c **** 		}
 179:Core/Src/rc522.c **** 		default:
 180:Core/Src/rc522.c **** 		    break;
 181:Core/Src/rc522.c **** 	}
 182:Core/Src/rc522.c **** 	rc522_writeRegister(MFRC522_REG_COMM_IE_N, irqEn | 0x80);
 183:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_COMM_IRQ, 0x80);
 184:Core/Src/rc522.c **** 	rc522_setBitMask(MFRC522_REG_FIFO_LEVEL, 0x80);
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 8


 185:Core/Src/rc522.c **** 	rc522_writeRegister(MFRC522_REG_COMMAND, PCD_IDLE);
 186:Core/Src/rc522.c **** 	// Writing data to the FIFO
 187:Core/Src/rc522.c **** 	for(i = 0; i < sendLen; i++) 
 188:Core/Src/rc522.c ****     {
 189:Core/Src/rc522.c ****         rc522_writeRegister(MFRC522_REG_FIFO_DATA, sendData[i]);
 190:Core/Src/rc522.c ****     }
 191:Core/Src/rc522.c **** 	// Execute the command
 192:Core/Src/rc522.c **** 	rc522_writeRegister(MFRC522_REG_COMMAND, command);
 193:Core/Src/rc522.c **** 	if(command == PCD_TRANSCEIVE) 
 194:Core/Src/rc522.c ****     {
 195:Core/Src/rc522.c ****         rc522_setBitMask(MFRC522_REG_BIT_FRAMING, 0x80);		// StartSend=1, transmission of data star
 196:Core/Src/rc522.c ****     }
 197:Core/Src/rc522.c ****     // Waiting to receive data to complete
 198:Core/Src/rc522.c **** 	i = 2000;	// i according to the clock frequency adjustment, the operator M1 card maximum waiting t
 199:Core/Src/rc522.c **** 	do
 200:Core/Src/rc522.c ****     {
 201:Core/Src/rc522.c **** 		// CommIrqReg[7..0]
 202:Core/Src/rc522.c **** 		// Set1 TxIRq RxIRq IdleIRq HiAlerIRq LoAlertIRq ErrIRq TimerIRq
 203:Core/Src/rc522.c **** 		n = rc522_readRegister(MFRC522_REG_COMM_IRQ);
 204:Core/Src/rc522.c **** 		i--;
 205:Core/Src/rc522.c **** 	} while ((i != 0) && !(n & 0x01) && !(n & waitIRq));
 206:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_BIT_FRAMING, 0x80);      // StartSend=0
 207:Core/Src/rc522.c **** 	if(i != 0)
 208:Core/Src/rc522.c ****     {
 209:Core/Src/rc522.c **** 		if(!(rc522_readRegister(MFRC522_REG_ERROR) & 0x1B)) 
 210:Core/Src/rc522.c ****         {
 211:Core/Src/rc522.c **** 			status = RC522_OK;
 212:Core/Src/rc522.c **** 			if(n & irqEn & 0x01)
 213:Core/Src/rc522.c ****             {
 214:Core/Src/rc522.c ****                 status = RC522_NOTAGERR;
 215:Core/Src/rc522.c ****             }
 216:Core/Src/rc522.c ****             if(command == PCD_TRANSCEIVE) 
 217:Core/Src/rc522.c ****             {
 218:Core/Src/rc522.c **** 				n = rc522_readRegister(MFRC522_REG_FIFO_LEVEL);
 219:Core/Src/rc522.c **** 				lastBits = rc522_readRegister(MFRC522_REG_CONTROL) & 0x07;
 220:Core/Src/rc522.c **** 				if(lastBits)
 221:Core/Src/rc522.c ****                 { 
 222:Core/Src/rc522.c ****                     *backLen = (n - 1) * 8 + lastBits; 
 223:Core/Src/rc522.c ****                 }
 224:Core/Src/rc522.c ****                 else 
 225:Core/Src/rc522.c ****                 {
 226:Core/Src/rc522.c ****                     *backLen = n * 8;
 227:Core/Src/rc522.c ****                 }
 228:Core/Src/rc522.c ****                 if(n == 0)
 229:Core/Src/rc522.c ****                 {
 230:Core/Src/rc522.c ****                     n = 1;
 231:Core/Src/rc522.c ****                 }
 232:Core/Src/rc522.c ****                 if(n > MFRC522_MAX_LEN)
 233:Core/Src/rc522.c ****                 {
 234:Core/Src/rc522.c ****                     n = MFRC522_MAX_LEN;
 235:Core/Src/rc522.c ****                 }
 236:Core/Src/rc522.c ****                 for(i = 0; i < n; i++)
 237:Core/Src/rc522.c ****                 {
 238:Core/Src/rc522.c ****                     backData[i] = rc522_readRegister(MFRC522_REG_FIFO_DATA);		// Reading the receiv
 239:Core/Src/rc522.c ****                 }
 240:Core/Src/rc522.c ****             }
 241:Core/Src/rc522.c **** 		} 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 9


 242:Core/Src/rc522.c ****         else 
 243:Core/Src/rc522.c ****         {
 244:Core/Src/rc522.c ****             status = RC522_ERR;
 245:Core/Src/rc522.c ****         }
 246:Core/Src/rc522.c ****     }
 247:Core/Src/rc522.c **** 	return status;
 248:Core/Src/rc522.c **** }
 249:Core/Src/rc522.c **** 
 250:Core/Src/rc522.c **** /*
 251:Core/Src/rc522.c ****  * Function Name: rc522_setBitMask
 252:Core/Src/rc522.c ****  * Description: Set RC522 register bit
 253:Core/Src/rc522.c ****  * Input parameters: reg - register address; mask - set bit value
 254:Core/Src/rc522.c ****  * Return value: None
 255:Core/Src/rc522.c ****  */
 256:Core/Src/rc522.c **** void rc522_setBitMask(uint8_t reg, uint8_t mask) 
 257:Core/Src/rc522.c **** {
 223              		.loc 1 257 1 is_stmt 1 view -0
 224              		.cfi_startproc
 225              		@ args = 0, pretend = 0, frame = 0
 226              		@ frame_needed = 0, uses_anonymous_args = 0
 227              		.loc 1 257 1 is_stmt 0 view .LVU38
 228 0000 38B5     		push	{r3, r4, r5, lr}
 229              	.LCFI7:
 230              		.cfi_def_cfa_offset 16
 231              		.cfi_offset 3, -16
 232              		.cfi_offset 4, -12
 233              		.cfi_offset 5, -8
 234              		.cfi_offset 14, -4
 235 0002 0446     		mov	r4, r0
 236 0004 0D46     		mov	r5, r1
 258:Core/Src/rc522.c ****     uint8_t temp = rc522_readRegister(reg);
 237              		.loc 1 258 5 is_stmt 1 view .LVU39
 238              		.loc 1 258 20 is_stmt 0 view .LVU40
 239 0006 FFF7FEFF 		bl	rc522_readRegister
 240              	.LVL16:
 259:Core/Src/rc522.c **** 	rc522_writeRegister(reg, temp | mask);
 241              		.loc 1 259 2 is_stmt 1 view .LVU41
 242 000a 40EA0501 		orr	r1, r0, r5
 243 000e C9B2     		uxtb	r1, r1
 244 0010 2046     		mov	r0, r4
 245              	.LVL17:
 246              		.loc 1 259 2 is_stmt 0 view .LVU42
 247 0012 FFF7FEFF 		bl	rc522_writeRegister
 248              	.LVL18:
 260:Core/Src/rc522.c **** }
 249              		.loc 1 260 1 view .LVU43
 250 0016 38BD     		pop	{r3, r4, r5, pc}
 251              		.cfi_endproc
 252              	.LFE76:
 254              		.section	.text.rc522_clearBitMask,"ax",%progbits
 255              		.align	1
 256              		.global	rc522_clearBitMask
 257              		.syntax unified
 258              		.thumb
 259              		.thumb_func
 261              	rc522_clearBitMask:
 262              	.LVL19:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 10


 263              	.LFB77:
 261:Core/Src/rc522.c **** 
 262:Core/Src/rc522.c **** /*
 263:Core/Src/rc522.c ****  * Function Name: rc522_clearBitMask
 264:Core/Src/rc522.c ****  * Description: clear RC522 register bit
 265:Core/Src/rc522.c ****  * Input parameters: reg - register address; mask - clear bit value
 266:Core/Src/rc522.c ****  * Return value: None
 267:Core/Src/rc522.c **** */
 268:Core/Src/rc522.c **** void rc522_clearBitMask(uint8_t reg, uint8_t mask)
 269:Core/Src/rc522.c **** {
 264              		.loc 1 269 1 is_stmt 1 view -0
 265              		.cfi_startproc
 266              		@ args = 0, pretend = 0, frame = 0
 267              		@ frame_needed = 0, uses_anonymous_args = 0
 268              		.loc 1 269 1 is_stmt 0 view .LVU45
 269 0000 38B5     		push	{r3, r4, r5, lr}
 270              	.LCFI8:
 271              		.cfi_def_cfa_offset 16
 272              		.cfi_offset 3, -16
 273              		.cfi_offset 4, -12
 274              		.cfi_offset 5, -8
 275              		.cfi_offset 14, -4
 276 0002 0446     		mov	r4, r0
 277 0004 0D46     		mov	r5, r1
 270:Core/Src/rc522.c ****     uint8_t temp = rc522_readRegister(reg);
 278              		.loc 1 270 5 is_stmt 1 view .LVU46
 279              		.loc 1 270 20 is_stmt 0 view .LVU47
 280 0006 FFF7FEFF 		bl	rc522_readRegister
 281              	.LVL20:
 271:Core/Src/rc522.c **** 	rc522_writeRegister(reg, temp & (~mask));
 282              		.loc 1 271 2 is_stmt 1 view .LVU48
 283              		.loc 1 271 32 is_stmt 0 view .LVU49
 284 000a 20EA0501 		bic	r1, r0, r5
 285              		.loc 1 271 2 view .LVU50
 286 000e C9B2     		uxtb	r1, r1
 287 0010 2046     		mov	r0, r4
 288              	.LVL21:
 289              		.loc 1 271 2 view .LVU51
 290 0012 FFF7FEFF 		bl	rc522_writeRegister
 291              	.LVL22:
 272:Core/Src/rc522.c **** }
 292              		.loc 1 272 1 view .LVU52
 293 0016 38BD     		pop	{r3, r4, r5, pc}
 294              		.cfi_endproc
 295              	.LFE77:
 297              		.section	.text.rc522_controlAntenna,"ax",%progbits
 298              		.align	1
 299              		.global	rc522_controlAntenna
 300              		.syntax unified
 301              		.thumb
 302              		.thumb_func
 304              	rc522_controlAntenna:
 305              	.LVL23:
 306              	.LFB71:
  79:Core/Src/rc522.c **** 	uint8_t temp = 0;
 307              		.loc 1 79 1 is_stmt 1 view -0
 308              		.cfi_startproc
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 11


 309              		@ args = 0, pretend = 0, frame = 0
 310              		@ frame_needed = 0, uses_anonymous_args = 0
  79:Core/Src/rc522.c **** 	uint8_t temp = 0;
 311              		.loc 1 79 1 is_stmt 0 view .LVU54
 312 0000 08B5     		push	{r3, lr}
 313              	.LCFI9:
 314              		.cfi_def_cfa_offset 8
 315              		.cfi_offset 3, -8
 316              		.cfi_offset 14, -4
  80:Core/Src/rc522.c ****     if(mode == ANTENNA_OFF)
 317              		.loc 1 80 2 is_stmt 1 view .LVU55
 318              	.LVL24:
  81:Core/Src/rc522.c ****     {
 319              		.loc 1 81 5 view .LVU56
  81:Core/Src/rc522.c ****     {
 320              		.loc 1 81 7 is_stmt 0 view .LVU57
 321 0002 10B1     		cbz	r0, .L19
  85:Core/Src/rc522.c ****     {
 322              		.loc 1 85 10 is_stmt 1 view .LVU58
  85:Core/Src/rc522.c ****     {
 323              		.loc 1 85 12 is_stmt 0 view .LVU59
 324 0004 0128     		cmp	r0, #1
 325 0006 05D0     		beq	.L20
 326              	.LVL25:
 327              	.L15:
  94:Core/Src/rc522.c **** 
 328              		.loc 1 94 1 view .LVU60
 329 0008 08BD     		pop	{r3, pc}
 330              	.LVL26:
 331              	.L19:
  83:Core/Src/rc522.c ****     }
 332              		.loc 1 83 9 is_stmt 1 view .LVU61
 333 000a 0321     		movs	r1, #3
 334 000c 1420     		movs	r0, #20
 335              	.LVL27:
  83:Core/Src/rc522.c ****     }
 336              		.loc 1 83 9 is_stmt 0 view .LVU62
 337 000e FFF7FEFF 		bl	rc522_clearBitMask
 338              	.LVL28:
 339 0012 F9E7     		b	.L15
 340              	.LVL29:
 341              	.L20:
  87:Core/Src/rc522.c **** 		if(!(temp & 0x03))
 342              		.loc 1 87 3 is_stmt 1 view .LVU63
  87:Core/Src/rc522.c **** 		if(!(temp & 0x03))
 343              		.loc 1 87 10 is_stmt 0 view .LVU64
 344 0014 1420     		movs	r0, #20
 345              	.LVL30:
  87:Core/Src/rc522.c **** 		if(!(temp & 0x03))
 346              		.loc 1 87 10 view .LVU65
 347 0016 FFF7FEFF 		bl	rc522_readRegister
 348              	.LVL31:
  88:Core/Src/rc522.c **** 		{
 349              		.loc 1 88 3 is_stmt 1 view .LVU66
  88:Core/Src/rc522.c **** 		{
 350              		.loc 1 88 5 is_stmt 0 view .LVU67
 351 001a 10F0030F 		tst	r0, #3
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 12


 352 001e F3D1     		bne	.L15
  90:Core/Src/rc522.c **** 		}
 353              		.loc 1 90 4 is_stmt 1 view .LVU68
 354 0020 0321     		movs	r1, #3
 355 0022 1420     		movs	r0, #20
 356              	.LVL32:
  90:Core/Src/rc522.c **** 		}
 357              		.loc 1 90 4 is_stmt 0 view .LVU69
 358 0024 FFF7FEFF 		bl	rc522_setBitMask
 359              	.LVL33:
  94:Core/Src/rc522.c **** 
 360              		.loc 1 94 1 view .LVU70
 361 0028 EEE7     		b	.L15
 362              		.cfi_endproc
 363              	.LFE71:
 365              		.section	.text.rc522_init,"ax",%progbits
 366              		.align	1
 367              		.global	rc522_init
 368              		.syntax unified
 369              		.thumb
 370              		.thumb_func
 372              	rc522_init:
 373              	.LFB70:
  60:Core/Src/rc522.c ****     rc522_reset();
 374              		.loc 1 60 1 is_stmt 1 view -0
 375              		.cfi_startproc
 376              		@ args = 0, pretend = 0, frame = 0
 377              		@ frame_needed = 0, uses_anonymous_args = 0
 378 0000 08B5     		push	{r3, lr}
 379              	.LCFI10:
 380              		.cfi_def_cfa_offset 8
 381              		.cfi_offset 3, -8
 382              		.cfi_offset 14, -4
  61:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_T_MODE, 0x80);
 383              		.loc 1 61 5 view .LVU72
 384 0002 FFF7FEFF 		bl	rc522_reset
 385              	.LVL34:
  62:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_T_PRESCALER, 0xA9);
 386              		.loc 1 62 5 view .LVU73
 387 0006 8021     		movs	r1, #128
 388 0008 2A20     		movs	r0, #42
 389 000a FFF7FEFF 		bl	rc522_writeRegister
 390              	.LVL35:
  63:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_T_RELOAD_L, 0xE8);
 391              		.loc 1 63 5 view .LVU74
 392 000e A921     		movs	r1, #169
 393 0010 2B20     		movs	r0, #43
 394 0012 FFF7FEFF 		bl	rc522_writeRegister
 395              	.LVL36:
  64:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_T_RELOAD_H, 0x03);
 396              		.loc 1 64 5 view .LVU75
 397 0016 E821     		movs	r1, #232
 398 0018 2D20     		movs	r0, #45
 399 001a FFF7FEFF 		bl	rc522_writeRegister
 400              	.LVL37:
  65:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_RF_CFG, 0x70);
 401              		.loc 1 65 5 view .LVU76
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 13


 402 001e 0321     		movs	r1, #3
 403 0020 2C20     		movs	r0, #44
 404 0022 FFF7FEFF 		bl	rc522_writeRegister
 405              	.LVL38:
  66:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_TX_AUTO, 0x40);
 406              		.loc 1 66 5 view .LVU77
 407 0026 7021     		movs	r1, #112
 408 0028 2620     		movs	r0, #38
 409 002a FFF7FEFF 		bl	rc522_writeRegister
 410              	.LVL39:
  67:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_MODE, 0x3D);
 411              		.loc 1 67 5 view .LVU78
 412 002e 4021     		movs	r1, #64
 413 0030 1520     		movs	r0, #21
 414 0032 FFF7FEFF 		bl	rc522_writeRegister
 415              	.LVL40:
  68:Core/Src/rc522.c ****     rc522_controlAntenna(ANTENNA_ON);
 416              		.loc 1 68 5 view .LVU79
 417 0036 3D21     		movs	r1, #61
 418 0038 1120     		movs	r0, #17
 419 003a FFF7FEFF 		bl	rc522_writeRegister
 420              	.LVL41:
  69:Core/Src/rc522.c **** }
 421              		.loc 1 69 5 view .LVU80
 422 003e 0120     		movs	r0, #1
 423 0040 FFF7FEFF 		bl	rc522_controlAntenna
 424              	.LVL42:
  70:Core/Src/rc522.c **** 
 425              		.loc 1 70 1 is_stmt 0 view .LVU81
 426 0044 08BD     		pop	{r3, pc}
 427              		.cfi_endproc
 428              	.LFE70:
 430              		.section	.text.rc522_toCard,"ax",%progbits
 431              		.align	1
 432              		.global	rc522_toCard
 433              		.syntax unified
 434              		.thumb
 435              		.thumb_func
 437              	rc522_toCard:
 438              	.LVL43:
 439              	.LFB75:
 157:Core/Src/rc522.c ****     uint8_t status = RC522_ERR;
 440              		.loc 1 157 1 is_stmt 1 view -0
 441              		.cfi_startproc
 442              		@ args = 4, pretend = 0, frame = 0
 443              		@ frame_needed = 0, uses_anonymous_args = 0
 157:Core/Src/rc522.c ****     uint8_t status = RC522_ERR;
 444              		.loc 1 157 1 is_stmt 0 view .LVU83
 445 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 446              	.LCFI11:
 447              		.cfi_def_cfa_offset 32
 448              		.cfi_offset 4, -32
 449              		.cfi_offset 5, -28
 450              		.cfi_offset 6, -24
 451              		.cfi_offset 7, -20
 452              		.cfi_offset 8, -16
 453              		.cfi_offset 9, -12
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 14


 454              		.cfi_offset 10, -8
 455              		.cfi_offset 14, -4
 456 0004 0746     		mov	r7, r0
 457 0006 8A46     		mov	r10, r1
 458 0008 1546     		mov	r5, r2
 459 000a 9946     		mov	r9, r3
 158:Core/Src/rc522.c **** 	uint8_t irqEn = 0x00;
 460              		.loc 1 158 5 is_stmt 1 view .LVU84
 461              	.LVL44:
 159:Core/Src/rc522.c **** 	uint8_t waitIRq = 0x00;
 462              		.loc 1 159 2 view .LVU85
 160:Core/Src/rc522.c **** 	uint8_t lastBits;
 463              		.loc 1 160 2 view .LVU86
 161:Core/Src/rc522.c **** 	uint8_t n;
 464              		.loc 1 161 2 view .LVU87
 162:Core/Src/rc522.c **** 	uint16_t i;
 465              		.loc 1 162 2 view .LVU88
 163:Core/Src/rc522.c **** 
 466              		.loc 1 163 2 view .LVU89
 165:Core/Src/rc522.c ****     {
 467              		.loc 1 165 2 view .LVU90
 468 000c 0C28     		cmp	r0, #12
 469 000e 17D0     		beq	.L37
 470 0010 0E28     		cmp	r0, #14
 471 0012 19D1     		bne	.L38
 170:Core/Src/rc522.c **** 			break;
 472              		.loc 1 170 12 is_stmt 0 view .LVU91
 473 0014 1026     		movs	r6, #16
 169:Core/Src/rc522.c **** 			waitIRq = 0x10;
 474              		.loc 1 169 10 view .LVU92
 475 0016 4FF01208 		mov	r8, #18
 476              	.L24:
 477              	.LVL45:
 182:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_COMM_IRQ, 0x80);
 478              		.loc 1 182 2 is_stmt 1 view .LVU93
 479 001a 48F08001 		orr	r1, r8, #128
 480              	.LVL46:
 182:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_COMM_IRQ, 0x80);
 481              		.loc 1 182 2 is_stmt 0 view .LVU94
 482 001e 0220     		movs	r0, #2
 483              	.LVL47:
 182:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_COMM_IRQ, 0x80);
 484              		.loc 1 182 2 view .LVU95
 485 0020 FFF7FEFF 		bl	rc522_writeRegister
 486              	.LVL48:
 183:Core/Src/rc522.c **** 	rc522_setBitMask(MFRC522_REG_FIFO_LEVEL, 0x80);
 487              		.loc 1 183 2 is_stmt 1 view .LVU96
 488 0024 8021     		movs	r1, #128
 489 0026 0420     		movs	r0, #4
 490 0028 FFF7FEFF 		bl	rc522_clearBitMask
 491              	.LVL49:
 184:Core/Src/rc522.c **** 	rc522_writeRegister(MFRC522_REG_COMMAND, PCD_IDLE);
 492              		.loc 1 184 2 view .LVU97
 493 002c 8021     		movs	r1, #128
 494 002e 0A20     		movs	r0, #10
 495 0030 FFF7FEFF 		bl	rc522_setBitMask
 496              	.LVL50:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 15


 185:Core/Src/rc522.c **** 	// Writing data to the FIFO
 497              		.loc 1 185 2 view .LVU98
 498 0034 0021     		movs	r1, #0
 499 0036 0120     		movs	r0, #1
 500 0038 FFF7FEFF 		bl	rc522_writeRegister
 501              	.LVL51:
 187:Core/Src/rc522.c ****     {
 502              		.loc 1 187 2 view .LVU99
 187:Core/Src/rc522.c ****     {
 503              		.loc 1 187 8 is_stmt 0 view .LVU100
 504 003c 0024     		movs	r4, #0
 187:Core/Src/rc522.c ****     {
 505              		.loc 1 187 2 view .LVU101
 506 003e 0DE0     		b	.L25
 507              	.LVL52:
 508              	.L37:
 176:Core/Src/rc522.c **** 			break;
 509              		.loc 1 176 12 view .LVU102
 510 0040 3026     		movs	r6, #48
 175:Core/Src/rc522.c **** 			waitIRq = 0x30;
 511              		.loc 1 175 10 view .LVU103
 512 0042 4FF07708 		mov	r8, #119
 513 0046 E8E7     		b	.L24
 514              	.L38:
 165:Core/Src/rc522.c ****     {
 515              		.loc 1 165 2 view .LVU104
 516 0048 0026     		movs	r6, #0
 517 004a B046     		mov	r8, r6
 518 004c E5E7     		b	.L24
 519              	.LVL53:
 520              	.L26:
 189:Core/Src/rc522.c ****     }
 521              		.loc 1 189 9 is_stmt 1 discriminator 3 view .LVU105
 522 004e 1AF80410 		ldrb	r1, [r10, r4]	@ zero_extendqisi2
 523 0052 0920     		movs	r0, #9
 524 0054 FFF7FEFF 		bl	rc522_writeRegister
 525              	.LVL54:
 187:Core/Src/rc522.c ****     {
 526              		.loc 1 187 26 discriminator 3 view .LVU106
 187:Core/Src/rc522.c ****     {
 527              		.loc 1 187 27 is_stmt 0 discriminator 3 view .LVU107
 528 0058 0134     		adds	r4, r4, #1
 529              	.LVL55:
 187:Core/Src/rc522.c ****     {
 530              		.loc 1 187 27 discriminator 3 view .LVU108
 531 005a A4B2     		uxth	r4, r4
 532              	.LVL56:
 533              	.L25:
 187:Core/Src/rc522.c ****     {
 534              		.loc 1 187 13 is_stmt 1 discriminator 1 view .LVU109
 187:Core/Src/rc522.c ****     {
 535              		.loc 1 187 15 is_stmt 0 discriminator 1 view .LVU110
 536 005c ABB2     		uxth	r3, r5
 187:Core/Src/rc522.c ****     {
 537              		.loc 1 187 2 discriminator 1 view .LVU111
 538 005e A342     		cmp	r3, r4
 539 0060 F5D8     		bhi	.L26
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 16


 192:Core/Src/rc522.c **** 	if(command == PCD_TRANSCEIVE) 
 540              		.loc 1 192 2 is_stmt 1 view .LVU112
 541 0062 3946     		mov	r1, r7
 542 0064 0120     		movs	r0, #1
 543 0066 FFF7FEFF 		bl	rc522_writeRegister
 544              	.LVL57:
 193:Core/Src/rc522.c ****     {
 545              		.loc 1 193 2 view .LVU113
 193:Core/Src/rc522.c ****     {
 546              		.loc 1 193 4 is_stmt 0 view .LVU114
 547 006a 0C2F     		cmp	r7, #12
 548 006c 16D0     		beq	.L45
 549              	.L27:
 187:Core/Src/rc522.c ****     {
 550              		.loc 1 187 8 discriminator 3 view .LVU115
 551 006e 4FF4FA64 		mov	r4, #2000
 552              	.LVL58:
 553              	.L29:
 199:Core/Src/rc522.c ****     {
 554              		.loc 1 199 2 is_stmt 1 discriminator 3 view .LVU116
 203:Core/Src/rc522.c **** 		i--;
 555              		.loc 1 203 3 discriminator 3 view .LVU117
 203:Core/Src/rc522.c **** 		i--;
 556              		.loc 1 203 7 is_stmt 0 discriminator 3 view .LVU118
 557 0072 0420     		movs	r0, #4
 558 0074 FFF7FEFF 		bl	rc522_readRegister
 559              	.LVL59:
 560 0078 0546     		mov	r5, r0
 561              	.LVL60:
 204:Core/Src/rc522.c **** 	} while ((i != 0) && !(n & 0x01) && !(n & waitIRq));
 562              		.loc 1 204 3 is_stmt 1 discriminator 3 view .LVU119
 204:Core/Src/rc522.c **** 	} while ((i != 0) && !(n & 0x01) && !(n & waitIRq));
 563              		.loc 1 204 4 is_stmt 0 discriminator 3 view .LVU120
 564 007a 013C     		subs	r4, r4, #1
 565              	.LVL61:
 204:Core/Src/rc522.c **** 	} while ((i != 0) && !(n & 0x01) && !(n & waitIRq));
 566              		.loc 1 204 4 discriminator 3 view .LVU121
 567 007c A4B2     		uxth	r4, r4
 568              	.LVL62:
 205:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_BIT_FRAMING, 0x80);      // StartSend=0
 569              		.loc 1 205 10 is_stmt 1 discriminator 3 view .LVU122
 205:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_BIT_FRAMING, 0x80);      // StartSend=0
 570              		.loc 1 205 2 is_stmt 0 discriminator 3 view .LVU123
 571 007e 24B1     		cbz	r4, .L28
 205:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_BIT_FRAMING, 0x80);      // StartSend=0
 572              		.loc 1 205 20 discriminator 1 view .LVU124
 573 0080 10F0010F 		tst	r0, #1
 574 0084 01D1     		bne	.L28
 205:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_BIT_FRAMING, 0x80);      // StartSend=0
 575              		.loc 1 205 35 discriminator 2 view .LVU125
 576 0086 0642     		tst	r6, r0
 577 0088 F3D0     		beq	.L29
 578              	.L28:
 206:Core/Src/rc522.c **** 	if(i != 0)
 579              		.loc 1 206 2 is_stmt 1 view .LVU126
 580 008a 8021     		movs	r1, #128
 581 008c 0D20     		movs	r0, #13
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 17


 582              	.LVL63:
 206:Core/Src/rc522.c **** 	if(i != 0)
 583              		.loc 1 206 2 is_stmt 0 view .LVU127
 584 008e FFF7FEFF 		bl	rc522_clearBitMask
 585              	.LVL64:
 207:Core/Src/rc522.c ****     {
 586              		.loc 1 207 2 is_stmt 1 view .LVU128
 207:Core/Src/rc522.c ****     {
 587              		.loc 1 207 4 is_stmt 0 view .LVU129
 588 0092 44B9     		cbnz	r4, .L46
 158:Core/Src/rc522.c **** 	uint8_t irqEn = 0x00;
 589              		.loc 1 158 13 view .LVU130
 590 0094 0225     		movs	r5, #2
 591              	.LVL65:
 592              	.L30:
 247:Core/Src/rc522.c **** }
 593              		.loc 1 247 2 is_stmt 1 view .LVU131
 248:Core/Src/rc522.c **** 
 594              		.loc 1 248 1 is_stmt 0 view .LVU132
 595 0096 2846     		mov	r0, r5
 596 0098 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 597              	.LVL66:
 598              	.L45:
 195:Core/Src/rc522.c ****     }
 599              		.loc 1 195 9 is_stmt 1 view .LVU133
 600 009c 8021     		movs	r1, #128
 601 009e 0D20     		movs	r0, #13
 602 00a0 FFF7FEFF 		bl	rc522_setBitMask
 603              	.LVL67:
 604 00a4 E3E7     		b	.L27
 605              	.L46:
 209:Core/Src/rc522.c ****         {
 606              		.loc 1 209 3 view .LVU134
 209:Core/Src/rc522.c ****         {
 607              		.loc 1 209 8 is_stmt 0 view .LVU135
 608 00a6 0620     		movs	r0, #6
 609 00a8 FFF7FEFF 		bl	rc522_readRegister
 610              	.LVL68:
 209:Core/Src/rc522.c ****         {
 611              		.loc 1 209 5 view .LVU136
 612 00ac 10F01B0F 		tst	r0, #27
 613 00b0 2CD1     		bne	.L40
 211:Core/Src/rc522.c **** 			if(n & irqEn & 0x01)
 614              		.loc 1 211 4 is_stmt 1 view .LVU137
 615              	.LVL69:
 212:Core/Src/rc522.c ****             {
 616              		.loc 1 212 4 view .LVU138
 212:Core/Src/rc522.c ****             {
 617              		.loc 1 212 17 is_stmt 0 view .LVU139
 618 00b2 08EA0505 		and	r5, r8, r5
 212:Core/Src/rc522.c ****             {
 619              		.loc 1 212 6 view .LVU140
 620 00b6 15F00105 		ands	r5, r5, #1
 621 00ba 00D0     		beq	.L31
 214:Core/Src/rc522.c ****             }
 622              		.loc 1 214 24 view .LVU141
 623 00bc 0125     		movs	r5, #1
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 18


 624              	.L31:
 625              	.LVL70:
 216:Core/Src/rc522.c ****             {
 626              		.loc 1 216 13 is_stmt 1 view .LVU142
 216:Core/Src/rc522.c ****             {
 627              		.loc 1 216 15 is_stmt 0 view .LVU143
 628 00be 0C2F     		cmp	r7, #12
 629 00c0 E9D1     		bne	.L30
 218:Core/Src/rc522.c **** 				lastBits = rc522_readRegister(MFRC522_REG_CONTROL) & 0x07;
 630              		.loc 1 218 5 is_stmt 1 view .LVU144
 218:Core/Src/rc522.c **** 				lastBits = rc522_readRegister(MFRC522_REG_CONTROL) & 0x07;
 631              		.loc 1 218 9 is_stmt 0 view .LVU145
 632 00c2 0A20     		movs	r0, #10
 633 00c4 FFF7FEFF 		bl	rc522_readRegister
 634              	.LVL71:
 635 00c8 0646     		mov	r6, r0
 636              	.LVL72:
 219:Core/Src/rc522.c **** 				if(lastBits)
 637              		.loc 1 219 5 is_stmt 1 view .LVU146
 219:Core/Src/rc522.c **** 				if(lastBits)
 638              		.loc 1 219 16 is_stmt 0 view .LVU147
 639 00ca 0C20     		movs	r0, #12
 640 00cc FFF7FEFF 		bl	rc522_readRegister
 641              	.LVL73:
 220:Core/Src/rc522.c ****                 { 
 642              		.loc 1 220 5 is_stmt 1 view .LVU148
 220:Core/Src/rc522.c ****                 { 
 643              		.loc 1 220 7 is_stmt 0 view .LVU149
 644 00d0 10F00700 		ands	r0, r0, #7
 645              	.LVL74:
 220:Core/Src/rc522.c ****                 { 
 646              		.loc 1 220 7 view .LVU150
 647 00d4 09D0     		beq	.L32
 222:Core/Src/rc522.c ****                 }
 648              		.loc 1 222 21 is_stmt 1 view .LVU151
 222:Core/Src/rc522.c ****                 }
 649              		.loc 1 222 35 is_stmt 0 view .LVU152
 650 00d6 731E     		subs	r3, r6, #1
 222:Core/Src/rc522.c ****                 }
 651              		.loc 1 222 44 view .LVU153
 652 00d8 00EBC300 		add	r0, r0, r3, lsl #3
 222:Core/Src/rc522.c ****                 }
 653              		.loc 1 222 30 view .LVU154
 654 00dc 089B     		ldr	r3, [sp, #32]
 655 00de 1880     		strh	r0, [r3]	@ movhi
 656              	.L33:
 228:Core/Src/rc522.c ****                 {
 657              		.loc 1 228 17 is_stmt 1 view .LVU155
 228:Core/Src/rc522.c ****                 {
 658              		.loc 1 228 19 is_stmt 0 view .LVU156
 659 00e0 3EB1     		cbz	r6, .L42
 232:Core/Src/rc522.c ****                 {
 660              		.loc 1 232 17 is_stmt 1 view .LVU157
 232:Core/Src/rc522.c ****                 {
 661              		.loc 1 232 19 is_stmt 0 view .LVU158
 662 00e2 102E     		cmp	r6, #16
 663 00e4 06D9     		bls	.L34
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 19


 234:Core/Src/rc522.c ****                 }
 664              		.loc 1 234 23 view .LVU159
 665 00e6 1026     		movs	r6, #16
 666              	.LVL75:
 234:Core/Src/rc522.c ****                 }
 667              		.loc 1 234 23 view .LVU160
 668 00e8 04E0     		b	.L34
 669              	.LVL76:
 670              	.L32:
 226:Core/Src/rc522.c ****                 }
 671              		.loc 1 226 21 is_stmt 1 view .LVU161
 226:Core/Src/rc522.c ****                 }
 672              		.loc 1 226 30 is_stmt 0 view .LVU162
 673 00ea F300     		lsls	r3, r6, #3
 674 00ec 089A     		ldr	r2, [sp, #32]
 675 00ee 1380     		strh	r3, [r2]	@ movhi
 676 00f0 F6E7     		b	.L33
 677              	.L42:
 230:Core/Src/rc522.c ****                 }
 678              		.loc 1 230 23 view .LVU163
 679 00f2 0126     		movs	r6, #1
 680              	.LVL77:
 681              	.L34:
 236:Core/Src/rc522.c ****                 {
 682              		.loc 1 236 17 is_stmt 1 view .LVU164
 236:Core/Src/rc522.c ****                 {
 683              		.loc 1 236 23 is_stmt 0 view .LVU165
 684 00f4 0024     		movs	r4, #0
 685              	.LVL78:
 686              	.L35:
 236:Core/Src/rc522.c ****                 {
 687              		.loc 1 236 28 is_stmt 1 discriminator 1 view .LVU166
 236:Core/Src/rc522.c ****                 {
 688              		.loc 1 236 30 is_stmt 0 discriminator 1 view .LVU167
 689 00f6 B3B2     		uxth	r3, r6
 236:Core/Src/rc522.c ****                 {
 690              		.loc 1 236 17 discriminator 1 view .LVU168
 691 00f8 A342     		cmp	r3, r4
 692 00fa CCD9     		bls	.L30
 238:Core/Src/rc522.c ****                 }
 693              		.loc 1 238 21 is_stmt 1 discriminator 3 view .LVU169
 238:Core/Src/rc522.c ****                 }
 694              		.loc 1 238 35 is_stmt 0 discriminator 3 view .LVU170
 695 00fc 0920     		movs	r0, #9
 696 00fe FFF7FEFF 		bl	rc522_readRegister
 697              	.LVL79:
 238:Core/Src/rc522.c ****                 }
 698              		.loc 1 238 33 discriminator 3 view .LVU171
 699 0102 09F80400 		strb	r0, [r9, r4]
 236:Core/Src/rc522.c ****                 {
 700              		.loc 1 236 35 is_stmt 1 discriminator 3 view .LVU172
 236:Core/Src/rc522.c ****                 {
 701              		.loc 1 236 36 is_stmt 0 discriminator 3 view .LVU173
 702 0106 0134     		adds	r4, r4, #1
 703              	.LVL80:
 236:Core/Src/rc522.c ****                 {
 704              		.loc 1 236 36 discriminator 3 view .LVU174
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 20


 705 0108 A4B2     		uxth	r4, r4
 706              	.LVL81:
 236:Core/Src/rc522.c ****                 {
 707              		.loc 1 236 36 discriminator 3 view .LVU175
 708 010a F4E7     		b	.L35
 709              	.LVL82:
 710              	.L40:
 244:Core/Src/rc522.c ****         }
 711              		.loc 1 244 20 view .LVU176
 712 010c 0225     		movs	r5, #2
 713 010e C2E7     		b	.L30
 714              		.cfi_endproc
 715              	.LFE75:
 717              		.section	.text.rc522_request,"ax",%progbits
 718              		.align	1
 719              		.global	rc522_request
 720              		.syntax unified
 721              		.thumb
 722              		.thumb_func
 724              	rc522_request:
 725              	.LVL83:
 726              	.LFB74:
 133:Core/Src/rc522.c ****     RC522_Status_t status;
 727              		.loc 1 133 1 is_stmt 1 view -0
 728              		.cfi_startproc
 729              		@ args = 0, pretend = 0, frame = 8
 730              		@ frame_needed = 0, uses_anonymous_args = 0
 133:Core/Src/rc522.c ****     RC522_Status_t status;
 731              		.loc 1 133 1 is_stmt 0 view .LVU178
 732 0000 30B5     		push	{r4, r5, lr}
 733              	.LCFI12:
 734              		.cfi_def_cfa_offset 12
 735              		.cfi_offset 4, -12
 736              		.cfi_offset 5, -8
 737              		.cfi_offset 14, -4
 738 0002 85B0     		sub	sp, sp, #20
 739              	.LCFI13:
 740              		.cfi_def_cfa_offset 32
 741 0004 0546     		mov	r5, r0
 742 0006 0C46     		mov	r4, r1
 134:Core/Src/rc522.c ****     uint16_t backbits;
 743              		.loc 1 134 5 is_stmt 1 view .LVU179
 135:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_BIT_FRAMING, 0x07);
 744              		.loc 1 135 5 view .LVU180
 136:Core/Src/rc522.c ****     tagType[0] = reqMode;
 745              		.loc 1 136 5 view .LVU181
 746 0008 0721     		movs	r1, #7
 747              	.LVL84:
 136:Core/Src/rc522.c ****     tagType[0] = reqMode;
 748              		.loc 1 136 5 is_stmt 0 view .LVU182
 749 000a 0D20     		movs	r0, #13
 750              	.LVL85:
 136:Core/Src/rc522.c ****     tagType[0] = reqMode;
 751              		.loc 1 136 5 view .LVU183
 752 000c FFF7FEFF 		bl	rc522_writeRegister
 753              	.LVL86:
 137:Core/Src/rc522.c ****     status = rc522_toCard(PCD_TRANSCEIVE, tagType, 1, tagType, &backbits);
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 21


 754              		.loc 1 137 5 is_stmt 1 view .LVU184
 137:Core/Src/rc522.c ****     status = rc522_toCard(PCD_TRANSCEIVE, tagType, 1, tagType, &backbits);
 755              		.loc 1 137 16 is_stmt 0 view .LVU185
 756 0010 2570     		strb	r5, [r4]
 138:Core/Src/rc522.c ****     if((status != RC522_OK) || (backbits != 0x10)) 
 757              		.loc 1 138 5 is_stmt 1 view .LVU186
 138:Core/Src/rc522.c ****     if((status != RC522_OK) || (backbits != 0x10)) 
 758              		.loc 1 138 14 is_stmt 0 view .LVU187
 759 0012 0DF10E03 		add	r3, sp, #14
 760 0016 0093     		str	r3, [sp]
 761 0018 2346     		mov	r3, r4
 762 001a 0122     		movs	r2, #1
 763 001c 2146     		mov	r1, r4
 764 001e 0C20     		movs	r0, #12
 765 0020 FFF7FEFF 		bl	rc522_toCard
 766              	.LVL87:
 139:Core/Src/rc522.c ****     {    
 767              		.loc 1 139 5 is_stmt 1 view .LVU188
 139:Core/Src/rc522.c ****     {    
 768              		.loc 1 139 7 is_stmt 0 view .LVU189
 769 0024 28B9     		cbnz	r0, .L49
 139:Core/Src/rc522.c ****     {    
 770              		.loc 1 139 42 discriminator 1 view .LVU190
 771 0026 BDF80E30 		ldrh	r3, [sp, #14]
 139:Core/Src/rc522.c ****     {    
 772              		.loc 1 139 29 discriminator 1 view .LVU191
 773 002a 102B     		cmp	r3, #16
 774 002c 02D0     		beq	.L48
 141:Core/Src/rc522.c **** 	}
 775              		.loc 1 141 10 view .LVU192
 776 002e 0220     		movs	r0, #2
 777 0030 00E0     		b	.L48
 778              	.L49:
 779 0032 0220     		movs	r0, #2
 780              	.L48:
 781              	.LVL88:
 143:Core/Src/rc522.c **** }
 782              		.loc 1 143 2 is_stmt 1 view .LVU193
 144:Core/Src/rc522.c **** 
 783              		.loc 1 144 1 is_stmt 0 view .LVU194
 784 0034 05B0     		add	sp, sp, #20
 785              	.LCFI14:
 786              		.cfi_def_cfa_offset 12
 787              		@ sp needed
 788 0036 30BD     		pop	{r4, r5, pc}
 144:Core/Src/rc522.c **** 
 789              		.loc 1 144 1 view .LVU195
 790              		.cfi_endproc
 791              	.LFE74:
 793              		.section	.text.rc522_anticoll,"ax",%progbits
 794              		.align	1
 795              		.global	rc522_anticoll
 796              		.syntax unified
 797              		.thumb
 798              		.thumb_func
 800              	rc522_anticoll:
 801              	.LVL89:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 22


 802              	.LFB78:
 273:Core/Src/rc522.c **** 
 274:Core/Src/rc522.c **** /*
 275:Core/Src/rc522.c ****  * Function Name: rc522_anticoll
 276:Core/Src/rc522.c ****  * Description: Anti-collision detection, reading selected card serial number card
 277:Core/Src/rc522.c ****  * Input parameters: serNum - returns 4 bytes card serial number, the first 5 bytes for the checksu
 278:Core/Src/rc522.c ****  * Return value: the successful return MI_OK
 279:Core/Src/rc522.c ****  */
 280:Core/Src/rc522.c **** uint8_t rc522_anticoll(uint8_t *serNum)
 281:Core/Src/rc522.c **** {
 803              		.loc 1 281 1 is_stmt 1 view -0
 804              		.cfi_startproc
 805              		@ args = 0, pretend = 0, frame = 8
 806              		@ frame_needed = 0, uses_anonymous_args = 0
 807              		.loc 1 281 1 is_stmt 0 view .LVU197
 808 0000 10B5     		push	{r4, lr}
 809              	.LCFI15:
 810              		.cfi_def_cfa_offset 8
 811              		.cfi_offset 4, -8
 812              		.cfi_offset 14, -4
 813 0002 84B0     		sub	sp, sp, #16
 814              	.LCFI16:
 815              		.cfi_def_cfa_offset 24
 816 0004 0446     		mov	r4, r0
 282:Core/Src/rc522.c **** 	uint8_t status;
 817              		.loc 1 282 2 is_stmt 1 view .LVU198
 283:Core/Src/rc522.c **** 	uint8_t i;
 818              		.loc 1 283 2 view .LVU199
 284:Core/Src/rc522.c **** 	uint8_t serNumCheck = 0;
 819              		.loc 1 284 2 view .LVU200
 820              	.LVL90:
 285:Core/Src/rc522.c **** 	uint16_t unLen;
 821              		.loc 1 285 2 view .LVU201
 286:Core/Src/rc522.c **** 
 287:Core/Src/rc522.c **** 	rc522_writeRegister(MFRC522_REG_BIT_FRAMING, 0x00);												// TxLastBists = BitFramingReg[2..0
 822              		.loc 1 287 2 view .LVU202
 823 0006 0021     		movs	r1, #0
 824 0008 0D20     		movs	r0, #13
 825              	.LVL91:
 826              		.loc 1 287 2 is_stmt 0 view .LVU203
 827 000a FFF7FEFF 		bl	rc522_writeRegister
 828              	.LVL92:
 288:Core/Src/rc522.c **** 	serNum[0] = PICC_ANTICOLL;
 829              		.loc 1 288 2 is_stmt 1 view .LVU204
 830              		.loc 1 288 12 is_stmt 0 view .LVU205
 831 000e 9323     		movs	r3, #147
 832 0010 2370     		strb	r3, [r4]
 289:Core/Src/rc522.c **** 	serNum[1] = 0x20;
 833              		.loc 1 289 2 is_stmt 1 view .LVU206
 834              		.loc 1 289 12 is_stmt 0 view .LVU207
 835 0012 2023     		movs	r3, #32
 836 0014 6370     		strb	r3, [r4, #1]
 290:Core/Src/rc522.c **** 	status = rc522_toCard(PCD_TRANSCEIVE, serNum, 2, serNum, &unLen);
 837              		.loc 1 290 2 is_stmt 1 view .LVU208
 838              		.loc 1 290 11 is_stmt 0 view .LVU209
 839 0016 0DF10E03 		add	r3, sp, #14
 840 001a 0093     		str	r3, [sp]
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 23


 841 001c 2346     		mov	r3, r4
 842 001e 0222     		movs	r2, #2
 843 0020 2146     		mov	r1, r4
 844 0022 0C20     		movs	r0, #12
 845 0024 FFF7FEFF 		bl	rc522_toCard
 846              	.LVL93:
 291:Core/Src/rc522.c **** 	if(status == RC522_OK) 
 847              		.loc 1 291 2 is_stmt 1 view .LVU210
 848              		.loc 1 291 4 is_stmt 0 view .LVU211
 849 0028 68B1     		cbz	r0, .L56
 850              	.LVL94:
 851              	.L54:
 292:Core/Src/rc522.c ****     {
 293:Core/Src/rc522.c **** 		// Check card serial number
 294:Core/Src/rc522.c **** 		for(i = 0; i < 4; i++)
 295:Core/Src/rc522.c ****         {
 296:Core/Src/rc522.c ****             serNumCheck ^= serNum[i];
 297:Core/Src/rc522.c ****         } 
 298:Core/Src/rc522.c **** 		if(serNumCheck != serNum[i])
 299:Core/Src/rc522.c ****         {
 300:Core/Src/rc522.c ****             status = RC522_ERR;
 301:Core/Src/rc522.c ****         } 
 302:Core/Src/rc522.c **** 	}
 303:Core/Src/rc522.c **** 	return status;
 852              		.loc 1 303 2 is_stmt 1 view .LVU212
 304:Core/Src/rc522.c **** }
 853              		.loc 1 304 1 is_stmt 0 view .LVU213
 854 002a 04B0     		add	sp, sp, #16
 855              	.LCFI17:
 856              		.cfi_remember_state
 857              		.cfi_def_cfa_offset 8
 858              		@ sp needed
 859 002c 10BD     		pop	{r4, pc}
 860              	.LVL95:
 861              	.L55:
 862              	.LCFI18:
 863              		.cfi_restore_state
 296:Core/Src/rc522.c ****         } 
 864              		.loc 1 296 13 is_stmt 1 discriminator 3 view .LVU214
 296:Core/Src/rc522.c ****         } 
 865              		.loc 1 296 34 is_stmt 0 discriminator 3 view .LVU215
 866 002e A15C     		ldrb	r1, [r4, r2]	@ zero_extendqisi2
 296:Core/Src/rc522.c ****         } 
 867              		.loc 1 296 25 discriminator 3 view .LVU216
 868 0030 4B40     		eors	r3, r3, r1
 869              	.LVL96:
 296:Core/Src/rc522.c ****         } 
 870              		.loc 1 296 25 discriminator 3 view .LVU217
 871 0032 DBB2     		uxtb	r3, r3
 872              	.LVL97:
 294:Core/Src/rc522.c ****         {
 873              		.loc 1 294 21 is_stmt 1 discriminator 3 view .LVU218
 294:Core/Src/rc522.c ****         {
 874              		.loc 1 294 22 is_stmt 0 discriminator 3 view .LVU219
 875 0034 0132     		adds	r2, r2, #1
 876              	.LVL98:
 294:Core/Src/rc522.c ****         {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 24


 877              		.loc 1 294 22 discriminator 3 view .LVU220
 878 0036 D2B2     		uxtb	r2, r2
 879              	.LVL99:
 880              	.L53:
 294:Core/Src/rc522.c ****         {
 881              		.loc 1 294 14 is_stmt 1 discriminator 1 view .LVU221
 294:Core/Src/rc522.c ****         {
 882              		.loc 1 294 3 is_stmt 0 discriminator 1 view .LVU222
 883 0038 032A     		cmp	r2, #3
 884 003a F8D9     		bls	.L55
 298:Core/Src/rc522.c ****         {
 885              		.loc 1 298 3 is_stmt 1 view .LVU223
 298:Core/Src/rc522.c ****         {
 886              		.loc 1 298 27 is_stmt 0 view .LVU224
 887 003c A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 888              	.LVL100:
 298:Core/Src/rc522.c ****         {
 889              		.loc 1 298 5 view .LVU225
 890 003e 9A42     		cmp	r2, r3
 891 0040 F3D0     		beq	.L54
 300:Core/Src/rc522.c ****         } 
 892              		.loc 1 300 20 view .LVU226
 893 0042 0220     		movs	r0, #2
 894 0044 F1E7     		b	.L54
 895              	.LVL101:
 896              	.L56:
 284:Core/Src/rc522.c **** 	uint16_t unLen;
 897              		.loc 1 284 10 view .LVU227
 898 0046 0346     		mov	r3, r0
 294:Core/Src/rc522.c ****         {
 899              		.loc 1 294 9 view .LVU228
 900 0048 0246     		mov	r2, r0
 901 004a F5E7     		b	.L53
 902              		.cfi_endproc
 903              	.LFE78:
 905              		.section	.text.rc522_calculateCRC,"ax",%progbits
 906              		.align	1
 907              		.global	rc522_calculateCRC
 908              		.syntax unified
 909              		.thumb
 910              		.thumb_func
 912              	rc522_calculateCRC:
 913              	.LVL102:
 914              	.LFB80:
 305:Core/Src/rc522.c **** 
 306:Core/Src/rc522.c **** /*
 307:Core/Src/rc522.c ****  * Function Name: MFRC522_Halt
 308:Core/Src/rc522.c ****  * Description: Command card into hibernation
 309:Core/Src/rc522.c ****  * Input: None
 310:Core/Src/rc522.c ****  * Return value: None
 311:Core/Src/rc522.c ****  */
 312:Core/Src/rc522.c **** void rc522_halt(void)
 313:Core/Src/rc522.c **** {
 314:Core/Src/rc522.c ****     uint16_t unLen;
 315:Core/Src/rc522.c **** 	uint8_t buff[4]; 
 316:Core/Src/rc522.c **** 
 317:Core/Src/rc522.c **** 	buff[0] = PICC_HALT;
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 25


 318:Core/Src/rc522.c **** 	buff[1] = 0;
 319:Core/Src/rc522.c **** 	rc522_calculateCRC(buff, 2, &buff[2]);
 320:Core/Src/rc522.c **** 
 321:Core/Src/rc522.c **** 	rc522_toCard(PCD_TRANSCEIVE, buff, 4, buff, &unLen);
 322:Core/Src/rc522.c **** }
 323:Core/Src/rc522.c **** 
 324:Core/Src/rc522.c **** /*
 325:Core/Src/rc522.c ****  * Function Name: rc522_calculateCRC
 326:Core/Src/rc522.c ****  * Description: CRC calculation with MF522
 327:Core/Src/rc522.c ****  * Input parameters: pIndata - To calculate the CRC data, len - the data length, pOutData - CRC cal
 328:Core/Src/rc522.c ****  * Return value: None
 329:Core/Src/rc522.c ****  */
 330:Core/Src/rc522.c **** void rc522_calculateCRC(uint8_t *pInData, uint8_t len, uint8_t *pOutData)
 331:Core/Src/rc522.c **** {
 915              		.loc 1 331 1 is_stmt 1 view -0
 916              		.cfi_startproc
 917              		@ args = 0, pretend = 0, frame = 0
 918              		@ frame_needed = 0, uses_anonymous_args = 0
 919              		.loc 1 331 1 is_stmt 0 view .LVU230
 920 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 921              	.LCFI19:
 922              		.cfi_def_cfa_offset 24
 923              		.cfi_offset 3, -24
 924              		.cfi_offset 4, -20
 925              		.cfi_offset 5, -16
 926              		.cfi_offset 6, -12
 927              		.cfi_offset 7, -8
 928              		.cfi_offset 14, -4
 929 0002 0746     		mov	r7, r0
 930 0004 0D46     		mov	r5, r1
 931 0006 1646     		mov	r6, r2
 332:Core/Src/rc522.c ****     uint8_t i, n;
 932              		.loc 1 332 5 is_stmt 1 view .LVU231
 333:Core/Src/rc522.c **** 	rc522_clearBitMask(MFRC522_REG_DIV_IRQ, 0x04);													// CRCIrq = 0
 933              		.loc 1 333 2 view .LVU232
 934 0008 0421     		movs	r1, #4
 935              	.LVL103:
 936              		.loc 1 333 2 is_stmt 0 view .LVU233
 937 000a 0520     		movs	r0, #5
 938              	.LVL104:
 939              		.loc 1 333 2 view .LVU234
 940 000c FFF7FEFF 		bl	rc522_clearBitMask
 941              	.LVL105:
 334:Core/Src/rc522.c **** 	rc522_setBitMask(MFRC522_REG_FIFO_LEVEL, 0x80);													// Clear the FIFO pointer
 942              		.loc 1 334 2 is_stmt 1 view .LVU235
 943 0010 8021     		movs	r1, #128
 944 0012 0A20     		movs	r0, #10
 945 0014 FFF7FEFF 		bl	rc522_setBitMask
 946              	.LVL106:
 335:Core/Src/rc522.c **** 	// Writing data to the FIFO	
 336:Core/Src/rc522.c **** 	for(i = 0; i < len; i++)
 947              		.loc 1 336 2 view .LVU236
 948              		.loc 1 336 8 is_stmt 0 view .LVU237
 949 0018 0024     		movs	r4, #0
 950              		.loc 1 336 2 view .LVU238
 951 001a 05E0     		b	.L60
 952              	.LVL107:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 26


 953              	.L61:
 337:Core/Src/rc522.c ****     {
 338:Core/Src/rc522.c ****         rc522_writeRegister(MFRC522_REG_FIFO_DATA, *(pInData + i));
 954              		.loc 1 338 9 is_stmt 1 discriminator 3 view .LVU239
 955 001c 395D     		ldrb	r1, [r7, r4]	@ zero_extendqisi2
 956 001e 0920     		movs	r0, #9
 957 0020 FFF7FEFF 		bl	rc522_writeRegister
 958              	.LVL108:
 336:Core/Src/rc522.c ****     {
 959              		.loc 1 336 22 discriminator 3 view .LVU240
 336:Core/Src/rc522.c ****     {
 960              		.loc 1 336 23 is_stmt 0 discriminator 3 view .LVU241
 961 0024 0134     		adds	r4, r4, #1
 962              	.LVL109:
 336:Core/Src/rc522.c ****     {
 963              		.loc 1 336 23 discriminator 3 view .LVU242
 964 0026 E4B2     		uxtb	r4, r4
 965              	.LVL110:
 966              	.L60:
 336:Core/Src/rc522.c ****     {
 967              		.loc 1 336 13 is_stmt 1 discriminator 1 view .LVU243
 336:Core/Src/rc522.c ****     {
 968              		.loc 1 336 2 is_stmt 0 discriminator 1 view .LVU244
 969 0028 AC42     		cmp	r4, r5
 970 002a F7D3     		bcc	.L61
 339:Core/Src/rc522.c ****     }
 340:Core/Src/rc522.c ****     rc522_writeRegister(MFRC522_REG_COMMAND, PCD_CALCCRC);
 971              		.loc 1 340 5 is_stmt 1 view .LVU245
 972 002c 0321     		movs	r1, #3
 973 002e 0120     		movs	r0, #1
 974 0030 FFF7FEFF 		bl	rc522_writeRegister
 975              	.LVL111:
 341:Core/Src/rc522.c **** 
 342:Core/Src/rc522.c **** 	// Wait CRC calculation is complete
 343:Core/Src/rc522.c **** 	i = 0xFF;
 976              		.loc 1 343 2 view .LVU246
 977              		.loc 1 343 4 is_stmt 0 view .LVU247
 978 0034 FF24     		movs	r4, #255
 979              	.LVL112:
 980              	.L63:
 344:Core/Src/rc522.c **** 	do 
 981              		.loc 1 344 2 is_stmt 1 discriminator 2 view .LVU248
 345:Core/Src/rc522.c ****     {
 346:Core/Src/rc522.c **** 		n = rc522_readRegister(MFRC522_REG_DIV_IRQ);
 982              		.loc 1 346 3 discriminator 2 view .LVU249
 983              		.loc 1 346 7 is_stmt 0 discriminator 2 view .LVU250
 984 0036 0520     		movs	r0, #5
 985 0038 FFF7FEFF 		bl	rc522_readRegister
 986              	.LVL113:
 347:Core/Src/rc522.c **** 		i--;
 987              		.loc 1 347 3 is_stmt 1 discriminator 2 view .LVU251
 988              		.loc 1 347 4 is_stmt 0 discriminator 2 view .LVU252
 989 003c 631E     		subs	r3, r4, #1
 990              	.LVL114:
 348:Core/Src/rc522.c **** 	} while((i != 0) && !(n & 0x04));																						// CRCIrq = 1
 991              		.loc 1 348 9 is_stmt 1 discriminator 2 view .LVU253
 992              		.loc 1 348 2 is_stmt 0 discriminator 2 view .LVU254
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 27


 993 003e 13F0FF04 		ands	r4, r3, #255
 994 0042 02D0     		beq	.L62
 995              		.loc 1 348 19 discriminator 1 view .LVU255
 996 0044 10F0040F 		tst	r0, #4
 997 0048 F5D0     		beq	.L63
 998              	.L62:
 349:Core/Src/rc522.c **** 
 350:Core/Src/rc522.c **** 	// Read CRC calculation result
 351:Core/Src/rc522.c **** 	pOutData[0] = rc522_readRegister(MFRC522_REG_CRC_RESULT_L);
 999              		.loc 1 351 2 is_stmt 1 view .LVU256
 1000              		.loc 1 351 16 is_stmt 0 view .LVU257
 1001 004a 2220     		movs	r0, #34
 1002              	.LVL115:
 1003              		.loc 1 351 16 view .LVU258
 1004 004c FFF7FEFF 		bl	rc522_readRegister
 1005              	.LVL116:
 1006              		.loc 1 351 14 view .LVU259
 1007 0050 3070     		strb	r0, [r6]
 352:Core/Src/rc522.c **** 	pOutData[1] = rc522_readRegister(MFRC522_REG_CRC_RESULT_M);
 1008              		.loc 1 352 2 is_stmt 1 view .LVU260
 1009              		.loc 1 352 16 is_stmt 0 view .LVU261
 1010 0052 2120     		movs	r0, #33
 1011 0054 FFF7FEFF 		bl	rc522_readRegister
 1012              	.LVL117:
 1013              		.loc 1 352 14 view .LVU262
 1014 0058 7070     		strb	r0, [r6, #1]
 353:Core/Src/rc522.c **** }
 1015              		.loc 1 353 1 view .LVU263
 1016 005a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1017              		.loc 1 353 1 view .LVU264
 1018              		.cfi_endproc
 1019              	.LFE80:
 1021              		.section	.text.rc522_halt,"ax",%progbits
 1022              		.align	1
 1023              		.global	rc522_halt
 1024              		.syntax unified
 1025              		.thumb
 1026              		.thumb_func
 1028              	rc522_halt:
 1029              	.LFB79:
 313:Core/Src/rc522.c ****     uint16_t unLen;
 1030              		.loc 1 313 1 is_stmt 1 view -0
 1031              		.cfi_startproc
 1032              		@ args = 0, pretend = 0, frame = 8
 1033              		@ frame_needed = 0, uses_anonymous_args = 0
 1034 0000 00B5     		push	{lr}
 1035              	.LCFI20:
 1036              		.cfi_def_cfa_offset 4
 1037              		.cfi_offset 14, -4
 1038 0002 85B0     		sub	sp, sp, #20
 1039              	.LCFI21:
 1040              		.cfi_def_cfa_offset 24
 314:Core/Src/rc522.c **** 	uint8_t buff[4]; 
 1041              		.loc 1 314 5 view .LVU266
 315:Core/Src/rc522.c **** 
 1042              		.loc 1 315 2 view .LVU267
 317:Core/Src/rc522.c **** 	buff[1] = 0;
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 28


 1043              		.loc 1 317 2 view .LVU268
 317:Core/Src/rc522.c **** 	buff[1] = 0;
 1044              		.loc 1 317 10 is_stmt 0 view .LVU269
 1045 0004 5023     		movs	r3, #80
 1046 0006 8DF80830 		strb	r3, [sp, #8]
 318:Core/Src/rc522.c **** 	rc522_calculateCRC(buff, 2, &buff[2]);
 1047              		.loc 1 318 2 is_stmt 1 view .LVU270
 318:Core/Src/rc522.c **** 	rc522_calculateCRC(buff, 2, &buff[2]);
 1048              		.loc 1 318 10 is_stmt 0 view .LVU271
 1049 000a 0023     		movs	r3, #0
 1050 000c 8DF80930 		strb	r3, [sp, #9]
 319:Core/Src/rc522.c **** 
 1051              		.loc 1 319 2 is_stmt 1 view .LVU272
 1052 0010 0DF10A02 		add	r2, sp, #10
 1053 0014 0221     		movs	r1, #2
 1054 0016 02A8     		add	r0, sp, #8
 1055 0018 FFF7FEFF 		bl	rc522_calculateCRC
 1056              	.LVL118:
 321:Core/Src/rc522.c **** }
 1057              		.loc 1 321 2 view .LVU273
 1058 001c 0DF10E03 		add	r3, sp, #14
 1059 0020 0093     		str	r3, [sp]
 1060 0022 02AB     		add	r3, sp, #8
 1061 0024 0422     		movs	r2, #4
 1062 0026 1946     		mov	r1, r3
 1063 0028 0C20     		movs	r0, #12
 1064 002a FFF7FEFF 		bl	rc522_toCard
 1065              	.LVL119:
 322:Core/Src/rc522.c **** 
 1066              		.loc 1 322 1 is_stmt 0 view .LVU274
 1067 002e 05B0     		add	sp, sp, #20
 1068              	.LCFI22:
 1069              		.cfi_def_cfa_offset 4
 1070              		@ sp needed
 1071 0030 5DF804FB 		ldr	pc, [sp], #4
 1072              		.cfi_endproc
 1073              	.LFE79:
 1075              		.section	.text.rc522_check,"ax",%progbits
 1076              		.align	1
 1077              		.global	rc522_check
 1078              		.syntax unified
 1079              		.thumb
 1080              		.thumb_func
 1082              	rc522_check:
 1083              	.LVL120:
 1084              	.LFB73:
 109:Core/Src/rc522.c ****     RC522_Status_t status;
 1085              		.loc 1 109 1 is_stmt 1 view -0
 1086              		.cfi_startproc
 1087              		@ args = 0, pretend = 0, frame = 0
 1088              		@ frame_needed = 0, uses_anonymous_args = 0
 109:Core/Src/rc522.c ****     RC522_Status_t status;
 1089              		.loc 1 109 1 is_stmt 0 view .LVU276
 1090 0000 38B5     		push	{r3, r4, r5, lr}
 1091              	.LCFI23:
 1092              		.cfi_def_cfa_offset 16
 1093              		.cfi_offset 3, -16
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 29


 1094              		.cfi_offset 4, -12
 1095              		.cfi_offset 5, -8
 1096              		.cfi_offset 14, -4
 1097 0002 0446     		mov	r4, r0
 110:Core/Src/rc522.c ****     status = rc522_request(PICC_REQIDL, id);
 1098              		.loc 1 110 5 is_stmt 1 view .LVU277
 111:Core/Src/rc522.c ****     if(status == RC522_OK)
 1099              		.loc 1 111 5 view .LVU278
 111:Core/Src/rc522.c ****     if(status == RC522_OK)
 1100              		.loc 1 111 14 is_stmt 0 view .LVU279
 1101 0004 0146     		mov	r1, r0
 1102 0006 2620     		movs	r0, #38
 1103              	.LVL121:
 111:Core/Src/rc522.c ****     if(status == RC522_OK)
 1104              		.loc 1 111 14 view .LVU280
 1105 0008 FFF7FEFF 		bl	rc522_request
 1106              	.LVL122:
 112:Core/Src/rc522.c ****     {
 1107              		.loc 1 112 5 is_stmt 1 view .LVU281
 112:Core/Src/rc522.c ****     {
 1108              		.loc 1 112 7 is_stmt 0 view .LVU282
 1109 000c 0546     		mov	r5, r0
 1110 000e 18B1     		cbz	r0, .L70
 1111              	.LVL123:
 1112              	.L68:
 116:Core/Src/rc522.c ****     return status;
 1113              		.loc 1 116 5 is_stmt 1 view .LVU283
 1114 0010 FFF7FEFF 		bl	rc522_halt
 1115              	.LVL124:
 117:Core/Src/rc522.c **** }
 1116              		.loc 1 117 5 view .LVU284
 118:Core/Src/rc522.c **** 
 1117              		.loc 1 118 1 is_stmt 0 view .LVU285
 1118 0014 2846     		mov	r0, r5
 1119 0016 38BD     		pop	{r3, r4, r5, pc}
 1120              	.LVL125:
 1121              	.L70:
 114:Core/Src/rc522.c ****     }
 1122              		.loc 1 114 9 is_stmt 1 view .LVU286
 114:Core/Src/rc522.c ****     }
 1123              		.loc 1 114 18 is_stmt 0 view .LVU287
 1124 0018 2046     		mov	r0, r4
 1125              	.LVL126:
 114:Core/Src/rc522.c ****     }
 1126              		.loc 1 114 18 view .LVU288
 1127 001a FFF7FEFF 		bl	rc522_anticoll
 1128              	.LVL127:
 1129 001e 0546     		mov	r5, r0
 1130              	.LVL128:
 114:Core/Src/rc522.c ****     }
 1131              		.loc 1 114 18 view .LVU289
 1132 0020 F6E7     		b	.L68
 1133              		.cfi_endproc
 1134              	.LFE73:
 1136              		.section	.text.rc522_selectTag,"ax",%progbits
 1137              		.align	1
 1138              		.global	rc522_selectTag
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 30


 1139              		.syntax unified
 1140              		.thumb
 1141              		.thumb_func
 1143              	rc522_selectTag:
 1144              	.LVL129:
 1145              	.LFB81:
 354:Core/Src/rc522.c **** 
 355:Core/Src/rc522.c **** /*
 356:Core/Src/rc522.c ****  * Function Name: rc522_selectTag
 357:Core/Src/rc522.c ****  * Description: election card, read the card memory capacity
 358:Core/Src/rc522.c ****  * Input parameters: serNum - Incoming card serial number
 359:Core/Src/rc522.c ****  * Return value: the successful return of card capacity
 360:Core/Src/rc522.c ****  */
 361:Core/Src/rc522.c **** uint8_t rc522_selectTag(uint8_t *serNum)
 362:Core/Src/rc522.c **** {
 1146              		.loc 1 362 1 is_stmt 1 view -0
 1147              		.cfi_startproc
 1148              		@ args = 0, pretend = 0, frame = 16
 1149              		@ frame_needed = 0, uses_anonymous_args = 0
 1150              		.loc 1 362 1 is_stmt 0 view .LVU291
 1151 0000 00B5     		push	{lr}
 1152              	.LCFI24:
 1153              		.cfi_def_cfa_offset 4
 1154              		.cfi_offset 14, -4
 1155 0002 87B0     		sub	sp, sp, #28
 1156              	.LCFI25:
 1157              		.cfi_def_cfa_offset 32
 363:Core/Src/rc522.c ****     uint8_t i;
 1158              		.loc 1 363 5 is_stmt 1 view .LVU292
 364:Core/Src/rc522.c **** 	RC522_Status_t status;
 1159              		.loc 1 364 2 view .LVU293
 365:Core/Src/rc522.c **** 	uint8_t size;
 1160              		.loc 1 365 2 view .LVU294
 366:Core/Src/rc522.c **** 	uint16_t recvBits;
 1161              		.loc 1 366 2 view .LVU295
 367:Core/Src/rc522.c **** 	uint8_t buffer[9]; 
 1162              		.loc 1 367 2 view .LVU296
 368:Core/Src/rc522.c **** 
 369:Core/Src/rc522.c **** 	buffer[0] = PICC_SELECTTAG;
 1163              		.loc 1 369 2 view .LVU297
 1164              		.loc 1 369 12 is_stmt 0 view .LVU298
 1165 0004 9323     		movs	r3, #147
 1166 0006 8DF80C30 		strb	r3, [sp, #12]
 370:Core/Src/rc522.c **** 	buffer[1] = 0x70;
 1167              		.loc 1 370 2 is_stmt 1 view .LVU299
 1168              		.loc 1 370 12 is_stmt 0 view .LVU300
 1169 000a 7023     		movs	r3, #112
 1170 000c 8DF80D30 		strb	r3, [sp, #13]
 371:Core/Src/rc522.c **** 	for (i = 0; i < 5; i++) 
 1171              		.loc 1 371 2 is_stmt 1 view .LVU301
 1172              	.LVL130:
 1173              		.loc 1 371 9 is_stmt 0 view .LVU302
 1174 0010 0023     		movs	r3, #0
 1175              		.loc 1 371 2 view .LVU303
 1176 0012 07E0     		b	.L72
 1177              	.LVL131:
 1178              	.L73:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 31


 372:Core/Src/rc522.c ****     {
 373:Core/Src/rc522.c **** 		buffer[i + 2] = *(serNum + i);
 1179              		.loc 1 373 3 is_stmt 1 discriminator 3 view .LVU304
 1180              		.loc 1 373 19 is_stmt 0 discriminator 3 view .LVU305
 1181 0014 C15C     		ldrb	r1, [r0, r3]	@ zero_extendqisi2
 1182              		.loc 1 373 17 discriminator 3 view .LVU306
 1183 0016 03F11A02 		add	r2, r3, #26
 1184 001a 6A44     		add	r2, sp, r2
 1185 001c 02F80C1C 		strb	r1, [r2, #-12]
 371:Core/Src/rc522.c **** 	for (i = 0; i < 5; i++) 
 1186              		.loc 1 371 21 is_stmt 1 discriminator 3 view .LVU307
 371:Core/Src/rc522.c **** 	for (i = 0; i < 5; i++) 
 1187              		.loc 1 371 22 is_stmt 0 discriminator 3 view .LVU308
 1188 0020 0133     		adds	r3, r3, #1
 1189              	.LVL132:
 371:Core/Src/rc522.c **** 	for (i = 0; i < 5; i++) 
 1190              		.loc 1 371 22 discriminator 3 view .LVU309
 1191 0022 DBB2     		uxtb	r3, r3
 1192              	.LVL133:
 1193              	.L72:
 371:Core/Src/rc522.c **** 	for (i = 0; i < 5; i++) 
 1194              		.loc 1 371 14 is_stmt 1 discriminator 1 view .LVU310
 371:Core/Src/rc522.c **** 	for (i = 0; i < 5; i++) 
 1195              		.loc 1 371 2 is_stmt 0 discriminator 1 view .LVU311
 1196 0024 042B     		cmp	r3, #4
 1197 0026 F5D9     		bls	.L73
 374:Core/Src/rc522.c **** 	}
 375:Core/Src/rc522.c **** 	rc522_calculateCRC(buffer, 7, &buffer[7]);		
 1198              		.loc 1 375 2 is_stmt 1 view .LVU312
 1199 0028 0DF11302 		add	r2, sp, #19
 1200 002c 0721     		movs	r1, #7
 1201 002e 03A8     		add	r0, sp, #12
 1202              	.LVL134:
 1203              		.loc 1 375 2 is_stmt 0 view .LVU313
 1204 0030 FFF7FEFF 		bl	rc522_calculateCRC
 1205              	.LVL135:
 376:Core/Src/rc522.c **** 	status = rc522_toCard(PCD_TRANSCEIVE, buffer, 9, buffer, &recvBits);
 1206              		.loc 1 376 2 is_stmt 1 view .LVU314
 1207              		.loc 1 376 11 is_stmt 0 view .LVU315
 1208 0034 0DF11603 		add	r3, sp, #22
 1209 0038 0093     		str	r3, [sp]
 1210 003a 03AB     		add	r3, sp, #12
 1211 003c 0922     		movs	r2, #9
 1212 003e 1946     		mov	r1, r3
 1213 0040 0C20     		movs	r0, #12
 1214 0042 FFF7FEFF 		bl	rc522_toCard
 1215              	.LVL136:
 377:Core/Src/rc522.c **** 
 378:Core/Src/rc522.c **** 	if((status == RC522_OK) && (recvBits == 0x18)) 
 1216              		.loc 1 378 2 is_stmt 1 view .LVU316
 1217              		.loc 1 378 4 is_stmt 0 view .LVU317
 1218 0046 30B9     		cbnz	r0, .L75
 1219              		.loc 1 378 39 discriminator 1 view .LVU318
 1220 0048 BDF81630 		ldrh	r3, [sp, #22]
 1221              		.loc 1 378 26 discriminator 1 view .LVU319
 1222 004c 182B     		cmp	r3, #24
 1223 004e 03D1     		bne	.L74
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 32


 379:Core/Src/rc522.c ****     {   
 380:Core/Src/rc522.c **** 		size = buffer[0]; 
 1224              		.loc 1 380 3 is_stmt 1 view .LVU320
 1225              		.loc 1 380 8 is_stmt 0 view .LVU321
 1226 0050 9DF80C00 		ldrb	r0, [sp, #12]	@ zero_extendqisi2
 1227              	.LVL137:
 1228              		.loc 1 380 8 view .LVU322
 1229 0054 00E0     		b	.L74
 1230              	.LVL138:
 1231              	.L75:
 381:Core/Src/rc522.c **** 	} 
 382:Core/Src/rc522.c ****     else 
 383:Core/Src/rc522.c ****     {   
 384:Core/Src/rc522.c **** 		size = 0;    
 1232              		.loc 1 384 8 view .LVU323
 1233 0056 0020     		movs	r0, #0
 1234              	.LVL139:
 1235              	.L74:
 385:Core/Src/rc522.c **** 	}
 386:Core/Src/rc522.c **** 	return size;
 1236              		.loc 1 386 2 is_stmt 1 view .LVU324
 387:Core/Src/rc522.c **** }
 1237              		.loc 1 387 1 is_stmt 0 view .LVU325
 1238 0058 07B0     		add	sp, sp, #28
 1239              	.LCFI26:
 1240              		.cfi_def_cfa_offset 4
 1241              		@ sp needed
 1242 005a 5DF804FB 		ldr	pc, [sp], #4
 1243              		.cfi_endproc
 1244              	.LFE81:
 1246              		.section	.text.rc522_auth,"ax",%progbits
 1247              		.align	1
 1248              		.global	rc522_auth
 1249              		.syntax unified
 1250              		.thumb
 1251              		.thumb_func
 1253              	rc522_auth:
 1254              	.LVL140:
 1255              	.LFB82:
 388:Core/Src/rc522.c **** 
 389:Core/Src/rc522.c **** /*
 390:Core/Src/rc522.c ****  * Function Name: rc522_auth
 391:Core/Src/rc522.c ****  * Description: Verify card password
 392:Core/Src/rc522.c ****  * Input parameters: authMode - Password Authentication Mode
 393:Core/Src/rc522.c ****                  0x60 = A key authentication
 394:Core/Src/rc522.c ****                  0x61 = Authentication Key B
 395:Core/Src/rc522.c ****              BlockAddr--Block address
 396:Core/Src/rc522.c ****              Sectorkey--Sector password
 397:Core/Src/rc522.c ****              serNum--Card serial number, 4-byte
 398:Core/Src/rc522.c ****  * Return value: the successful return MI_OK
 399:Core/Src/rc522.c ****  */
 400:Core/Src/rc522.c **** RC522_Status_t rc522_auth(uint8_t authMode, uint8_t blockAddr, uint8_t* sectorkey, uint8_t* serNum)
 401:Core/Src/rc522.c **** {
 1256              		.loc 1 401 1 is_stmt 1 view -0
 1257              		.cfi_startproc
 1258              		@ args = 0, pretend = 0, frame = 16
 1259              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 33


 1260              		.loc 1 401 1 is_stmt 0 view .LVU327
 1261 0000 10B5     		push	{r4, lr}
 1262              	.LCFI27:
 1263              		.cfi_def_cfa_offset 8
 1264              		.cfi_offset 4, -8
 1265              		.cfi_offset 14, -4
 1266 0002 86B0     		sub	sp, sp, #24
 1267              	.LCFI28:
 1268              		.cfi_def_cfa_offset 32
 402:Core/Src/rc522.c ****     RC522_Status_t status;
 1269              		.loc 1 402 5 is_stmt 1 view .LVU328
 403:Core/Src/rc522.c **** 	uint16_t recvBits;
 1270              		.loc 1 403 2 view .LVU329
 404:Core/Src/rc522.c **** 	uint8_t i;
 1271              		.loc 1 404 2 view .LVU330
 405:Core/Src/rc522.c **** 	uint8_t buff[12]; 
 1272              		.loc 1 405 2 view .LVU331
 406:Core/Src/rc522.c **** 	//Verify the command block address + sector + password + card serial number
 407:Core/Src/rc522.c **** 	buff[0] = authMode;
 1273              		.loc 1 407 2 view .LVU332
 1274              		.loc 1 407 10 is_stmt 0 view .LVU333
 1275 0004 8DF80800 		strb	r0, [sp, #8]
 408:Core/Src/rc522.c **** 	buff[1] = blockAddr;
 1276              		.loc 1 408 2 is_stmt 1 view .LVU334
 1277              		.loc 1 408 10 is_stmt 0 view .LVU335
 1278 0008 8DF80910 		strb	r1, [sp, #9]
 409:Core/Src/rc522.c **** 	for(i = 0; i < 6; i++) 
 1279              		.loc 1 409 2 is_stmt 1 view .LVU336
 1280              	.LVL141:
 1281              		.loc 1 409 8 is_stmt 0 view .LVU337
 1282 000c 0021     		movs	r1, #0
 1283              	.LVL142:
 1284              		.loc 1 409 2 view .LVU338
 1285 000e 08E0     		b	.L78
 1286              	.LVL143:
 1287              	.L79:
 410:Core/Src/rc522.c ****     {    
 411:Core/Src/rc522.c **** 		buff[i + 2] = *(sectorkey + i);   
 1288              		.loc 1 411 3 is_stmt 1 discriminator 3 view .LVU339
 1289              		.loc 1 411 17 is_stmt 0 discriminator 3 view .LVU340
 1290 0010 12F801C0 		ldrb	ip, [r2, r1]	@ zero_extendqisi2
 1291              		.loc 1 411 15 discriminator 3 view .LVU341
 1292 0014 01F11A00 		add	r0, r1, #26
 1293 0018 6844     		add	r0, sp, r0
 1294 001a 00F810CC 		strb	ip, [r0, #-16]
 409:Core/Src/rc522.c **** 	for(i = 0; i < 6; i++) 
 1295              		.loc 1 409 20 is_stmt 1 discriminator 3 view .LVU342
 409:Core/Src/rc522.c **** 	for(i = 0; i < 6; i++) 
 1296              		.loc 1 409 21 is_stmt 0 discriminator 3 view .LVU343
 1297 001e 0131     		adds	r1, r1, #1
 1298              	.LVL144:
 409:Core/Src/rc522.c **** 	for(i = 0; i < 6; i++) 
 1299              		.loc 1 409 21 discriminator 3 view .LVU344
 1300 0020 C9B2     		uxtb	r1, r1
 1301              	.LVL145:
 1302              	.L78:
 409:Core/Src/rc522.c **** 	for(i = 0; i < 6; i++) 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 34


 1303              		.loc 1 409 13 is_stmt 1 discriminator 1 view .LVU345
 409:Core/Src/rc522.c **** 	for(i = 0; i < 6; i++) 
 1304              		.loc 1 409 2 is_stmt 0 discriminator 1 view .LVU346
 1305 0022 0529     		cmp	r1, #5
 1306 0024 F4D9     		bls	.L79
 412:Core/Src/rc522.c **** 	}
 413:Core/Src/rc522.c **** 	for(i = 0; i < 4; i++) 
 1307              		.loc 1 413 8 view .LVU347
 1308 0026 0022     		movs	r2, #0
 1309              	.LVL146:
 1310              		.loc 1 413 8 view .LVU348
 1311 0028 07E0     		b	.L80
 1312              	.LVL147:
 1313              	.L81:
 414:Core/Src/rc522.c ****     {    
 415:Core/Src/rc522.c **** 		buff[i + 8] = *(serNum + i);   
 1314              		.loc 1 415 3 is_stmt 1 discriminator 3 view .LVU349
 1315              		.loc 1 415 17 is_stmt 0 discriminator 3 view .LVU350
 1316 002a 985C     		ldrb	r0, [r3, r2]	@ zero_extendqisi2
 1317              		.loc 1 415 15 discriminator 3 view .LVU351
 1318 002c 02F12001 		add	r1, r2, #32
 1319 0030 6944     		add	r1, sp, r1
 1320 0032 01F8100C 		strb	r0, [r1, #-16]
 413:Core/Src/rc522.c ****     {    
 1321              		.loc 1 413 20 is_stmt 1 discriminator 3 view .LVU352
 413:Core/Src/rc522.c ****     {    
 1322              		.loc 1 413 21 is_stmt 0 discriminator 3 view .LVU353
 1323 0036 0132     		adds	r2, r2, #1
 1324              	.LVL148:
 413:Core/Src/rc522.c ****     {    
 1325              		.loc 1 413 21 discriminator 3 view .LVU354
 1326 0038 D2B2     		uxtb	r2, r2
 1327              	.LVL149:
 1328              	.L80:
 413:Core/Src/rc522.c ****     {    
 1329              		.loc 1 413 13 is_stmt 1 discriminator 1 view .LVU355
 413:Core/Src/rc522.c ****     {    
 1330              		.loc 1 413 2 is_stmt 0 discriminator 1 view .LVU356
 1331 003a 032A     		cmp	r2, #3
 1332 003c F5D9     		bls	.L81
 416:Core/Src/rc522.c **** 	}
 417:Core/Src/rc522.c **** 	status = rc522_toCard(PCD_AUTHENT, buff, 12, buff, &recvBits);
 1333              		.loc 1 417 2 is_stmt 1 view .LVU357
 1334              		.loc 1 417 11 is_stmt 0 view .LVU358
 1335 003e 0DF11603 		add	r3, sp, #22
 1336              	.LVL150:
 1337              		.loc 1 417 11 view .LVU359
 1338 0042 0093     		str	r3, [sp]
 1339 0044 02AB     		add	r3, sp, #8
 1340 0046 0C22     		movs	r2, #12
 1341              	.LVL151:
 1342              		.loc 1 417 11 view .LVU360
 1343 0048 1946     		mov	r1, r3
 1344 004a 0E20     		movs	r0, #14
 1345 004c FFF7FEFF 		bl	rc522_toCard
 1346              	.LVL152:
 418:Core/Src/rc522.c **** 	if ((status != RC522_OK) ||(!(rc522_readRegister(MFRC522_REG_STATUS2) & 0x08))) 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 35


 1347              		.loc 1 418 2 is_stmt 1 view .LVU361
 1348              		.loc 1 418 5 is_stmt 0 view .LVU362
 1349 0050 0446     		mov	r4, r0
 1350 0052 18B1     		cbz	r0, .L86
 419:Core/Src/rc522.c ****     {   
 420:Core/Src/rc522.c **** 		status = RC522_ERR;   
 1351              		.loc 1 420 10 view .LVU363
 1352 0054 0224     		movs	r4, #2
 1353              	.LVL153:
 1354              	.L82:
 421:Core/Src/rc522.c **** 	}
 422:Core/Src/rc522.c **** 	return status;
 1355              		.loc 1 422 2 is_stmt 1 view .LVU364
 423:Core/Src/rc522.c **** }
 1356              		.loc 1 423 1 is_stmt 0 view .LVU365
 1357 0056 2046     		mov	r0, r4
 1358 0058 06B0     		add	sp, sp, #24
 1359              	.LCFI29:
 1360              		.cfi_remember_state
 1361              		.cfi_def_cfa_offset 8
 1362              		@ sp needed
 1363 005a 10BD     		pop	{r4, pc}
 1364              	.LVL154:
 1365              	.L86:
 1366              	.LCFI30:
 1367              		.cfi_restore_state
 418:Core/Src/rc522.c ****     {   
 1368              		.loc 1 418 32 discriminator 1 view .LVU366
 1369 005c 0820     		movs	r0, #8
 1370              	.LVL155:
 418:Core/Src/rc522.c ****     {   
 1371              		.loc 1 418 32 discriminator 1 view .LVU367
 1372 005e FFF7FEFF 		bl	rc522_readRegister
 1373              	.LVL156:
 418:Core/Src/rc522.c ****     {   
 1374              		.loc 1 418 27 discriminator 1 view .LVU368
 1375 0062 10F0080F 		tst	r0, #8
 1376 0066 F6D1     		bne	.L82
 420:Core/Src/rc522.c **** 	}
 1377              		.loc 1 420 10 view .LVU369
 1378 0068 0224     		movs	r4, #2
 1379 006a F4E7     		b	.L82
 1380              		.cfi_endproc
 1381              	.LFE82:
 1383              		.section	.text.rc522_read,"ax",%progbits
 1384              		.align	1
 1385              		.global	rc522_read
 1386              		.syntax unified
 1387              		.thumb
 1388              		.thumb_func
 1390              	rc522_read:
 1391              	.LVL157:
 1392              	.LFB83:
 424:Core/Src/rc522.c **** 
 425:Core/Src/rc522.c **** /*
 426:Core/Src/rc522.c ****  * Function Name: rc522_read
 427:Core/Src/rc522.c ****  * Description: Read block data
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 36


 428:Core/Src/rc522.c ****  * Input parameters: blockAddr - block address; recvData - read block data
 429:Core/Src/rc522.c ****  * Return value: the successful return MI_OK
 430:Core/Src/rc522.c ****  */
 431:Core/Src/rc522.c **** RC522_Status_t rc522_read(uint8_t blockAddr, uint8_t* recvData)
 432:Core/Src/rc522.c **** {
 1393              		.loc 1 432 1 is_stmt 1 view -0
 1394              		.cfi_startproc
 1395              		@ args = 0, pretend = 0, frame = 8
 1396              		@ frame_needed = 0, uses_anonymous_args = 0
 1397              		.loc 1 432 1 is_stmt 0 view .LVU371
 1398 0000 10B5     		push	{r4, lr}
 1399              	.LCFI31:
 1400              		.cfi_def_cfa_offset 8
 1401              		.cfi_offset 4, -8
 1402              		.cfi_offset 14, -4
 1403 0002 84B0     		sub	sp, sp, #16
 1404              	.LCFI32:
 1405              		.cfi_def_cfa_offset 24
 1406 0004 0C46     		mov	r4, r1
 433:Core/Src/rc522.c **** 	RC522_Status_t status;
 1407              		.loc 1 433 2 is_stmt 1 view .LVU372
 434:Core/Src/rc522.c **** 	uint16_t unLen;
 1408              		.loc 1 434 2 view .LVU373
 435:Core/Src/rc522.c **** 
 436:Core/Src/rc522.c **** 	recvData[0] = PICC_READ;
 1409              		.loc 1 436 2 view .LVU374
 1410              		.loc 1 436 14 is_stmt 0 view .LVU375
 1411 0006 3023     		movs	r3, #48
 1412 0008 0B70     		strb	r3, [r1]
 437:Core/Src/rc522.c **** 	recvData[1] = blockAddr;
 1413              		.loc 1 437 2 is_stmt 1 view .LVU376
 1414              		.loc 1 437 14 is_stmt 0 view .LVU377
 1415 000a 4870     		strb	r0, [r1, #1]
 438:Core/Src/rc522.c **** 	rc522_calculateCRC(recvData,2, &recvData[2]);
 1416              		.loc 1 438 2 is_stmt 1 view .LVU378
 1417 000c 8A1C     		adds	r2, r1, #2
 1418 000e 0221     		movs	r1, #2
 1419              	.LVL158:
 1420              		.loc 1 438 2 is_stmt 0 view .LVU379
 1421 0010 2046     		mov	r0, r4
 1422              	.LVL159:
 1423              		.loc 1 438 2 view .LVU380
 1424 0012 FFF7FEFF 		bl	rc522_calculateCRC
 1425              	.LVL160:
 439:Core/Src/rc522.c **** 	status = rc522_toCard(PCD_TRANSCEIVE, recvData, 4, recvData, &unLen);
 1426              		.loc 1 439 2 is_stmt 1 view .LVU381
 1427              		.loc 1 439 11 is_stmt 0 view .LVU382
 1428 0016 0DF10E03 		add	r3, sp, #14
 1429 001a 0093     		str	r3, [sp]
 1430 001c 2346     		mov	r3, r4
 1431 001e 0422     		movs	r2, #4
 1432 0020 2146     		mov	r1, r4
 1433 0022 0C20     		movs	r0, #12
 1434 0024 FFF7FEFF 		bl	rc522_toCard
 1435              	.LVL161:
 440:Core/Src/rc522.c **** 	if((status != RC522_OK) || (unLen != 0x90)) 
 1436              		.loc 1 440 2 is_stmt 1 view .LVU383
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 37


 1437              		.loc 1 440 4 is_stmt 0 view .LVU384
 1438 0028 28B9     		cbnz	r0, .L89
 1439              		.loc 1 440 36 discriminator 1 view .LVU385
 1440 002a BDF80E30 		ldrh	r3, [sp, #14]
 1441              		.loc 1 440 26 discriminator 1 view .LVU386
 1442 002e 902B     		cmp	r3, #144
 1443 0030 02D0     		beq	.L88
 441:Core/Src/rc522.c ****     {
 442:Core/Src/rc522.c **** 		status = RC522_ERR;
 1444              		.loc 1 442 10 view .LVU387
 1445 0032 0220     		movs	r0, #2
 1446 0034 00E0     		b	.L88
 1447              	.L89:
 1448 0036 0220     		movs	r0, #2
 1449              	.L88:
 1450              	.LVL162:
 443:Core/Src/rc522.c **** 	}
 444:Core/Src/rc522.c **** 	return status;
 1451              		.loc 1 444 2 is_stmt 1 view .LVU388
 445:Core/Src/rc522.c **** }
 1452              		.loc 1 445 1 is_stmt 0 view .LVU389
 1453 0038 04B0     		add	sp, sp, #16
 1454              	.LCFI33:
 1455              		.cfi_def_cfa_offset 8
 1456              		@ sp needed
 1457 003a 10BD     		pop	{r4, pc}
 1458              		.loc 1 445 1 view .LVU390
 1459              		.cfi_endproc
 1460              	.LFE83:
 1462              		.section	.text.rc522_write,"ax",%progbits
 1463              		.align	1
 1464              		.global	rc522_write
 1465              		.syntax unified
 1466              		.thumb
 1467              		.thumb_func
 1469              	rc522_write:
 1470              	.LVL163:
 1471              	.LFB84:
 446:Core/Src/rc522.c **** 
 447:Core/Src/rc522.c **** /*
 448:Core/Src/rc522.c ****  * Function Name: rc522_write
 449:Core/Src/rc522.c ****  * Description: Write block data
 450:Core/Src/rc522.c ****  * Input parameters: blockAddr - block address; writeData - to 16-byte data block write
 451:Core/Src/rc522.c ****  * Return value: the successful return MI_OK
 452:Core/Src/rc522.c ****  */
 453:Core/Src/rc522.c **** RC522_Status_t rc522_write(uint8_t blockAddr, uint8_t* writeData) 
 454:Core/Src/rc522.c **** {
 1472              		.loc 1 454 1 is_stmt 1 view -0
 1473              		.cfi_startproc
 1474              		@ args = 0, pretend = 0, frame = 24
 1475              		@ frame_needed = 0, uses_anonymous_args = 0
 1476              		.loc 1 454 1 is_stmt 0 view .LVU392
 1477 0000 10B5     		push	{r4, lr}
 1478              	.LCFI34:
 1479              		.cfi_def_cfa_offset 8
 1480              		.cfi_offset 4, -8
 1481              		.cfi_offset 14, -4
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 38


 1482 0002 88B0     		sub	sp, sp, #32
 1483              	.LCFI35:
 1484              		.cfi_def_cfa_offset 40
 1485 0004 0C46     		mov	r4, r1
 455:Core/Src/rc522.c **** 	RC522_Status_t status;
 1486              		.loc 1 455 2 is_stmt 1 view .LVU393
 456:Core/Src/rc522.c **** 	uint16_t recvBits;
 1487              		.loc 1 456 2 view .LVU394
 457:Core/Src/rc522.c **** 	uint8_t i;
 1488              		.loc 1 457 2 view .LVU395
 458:Core/Src/rc522.c **** 	uint8_t buff[18]; 
 1489              		.loc 1 458 2 view .LVU396
 459:Core/Src/rc522.c **** 
 460:Core/Src/rc522.c **** 	buff[0] = PICC_WRITE;
 1490              		.loc 1 460 2 view .LVU397
 1491              		.loc 1 460 10 is_stmt 0 view .LVU398
 1492 0006 A023     		movs	r3, #160
 1493 0008 8DF80C30 		strb	r3, [sp, #12]
 461:Core/Src/rc522.c **** 	buff[1] = blockAddr;
 1494              		.loc 1 461 2 is_stmt 1 view .LVU399
 1495              		.loc 1 461 10 is_stmt 0 view .LVU400
 1496 000c 8DF80D00 		strb	r0, [sp, #13]
 462:Core/Src/rc522.c **** 	rc522_calculateCRC(buff, 2, &buff[2]);
 1497              		.loc 1 462 2 is_stmt 1 view .LVU401
 1498 0010 0DF10E02 		add	r2, sp, #14
 1499 0014 0221     		movs	r1, #2
 1500              	.LVL164:
 1501              		.loc 1 462 2 is_stmt 0 view .LVU402
 1502 0016 03A8     		add	r0, sp, #12
 1503              	.LVL165:
 1504              		.loc 1 462 2 view .LVU403
 1505 0018 FFF7FEFF 		bl	rc522_calculateCRC
 1506              	.LVL166:
 463:Core/Src/rc522.c **** 	status = rc522_toCard(PCD_TRANSCEIVE, buff, 4, buff, &recvBits);
 1507              		.loc 1 463 2 is_stmt 1 view .LVU404
 1508              		.loc 1 463 11 is_stmt 0 view .LVU405
 1509 001c 0DF11E03 		add	r3, sp, #30
 1510 0020 0093     		str	r3, [sp]
 1511 0022 03AB     		add	r3, sp, #12
 1512 0024 0422     		movs	r2, #4
 1513 0026 1946     		mov	r1, r3
 1514 0028 0C20     		movs	r0, #12
 1515 002a FFF7FEFF 		bl	rc522_toCard
 1516              	.LVL167:
 464:Core/Src/rc522.c **** 
 465:Core/Src/rc522.c **** 	if((status != RC522_OK) || (recvBits != 4) || ((buff[0] & 0x0F) != 0x0A)) 
 1517              		.loc 1 465 2 is_stmt 1 view .LVU406
 1518              		.loc 1 465 4 is_stmt 0 view .LVU407
 1519 002e A8BB     		cbnz	r0, .L96
 1520 0030 0346     		mov	r3, r0
 1521              		.loc 1 465 39 discriminator 1 view .LVU408
 1522 0032 BDF81E20 		ldrh	r2, [sp, #30]
 1523              		.loc 1 465 26 discriminator 1 view .LVU409
 1524 0036 042A     		cmp	r2, #4
 1525 0038 01D0     		beq	.L103
 466:Core/Src/rc522.c ****     {   
 467:Core/Src/rc522.c **** 		status = RC522_ERR;   
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 39


 1526              		.loc 1 467 10 view .LVU410
 1527 003a 0220     		movs	r0, #2
 1528              	.LVL168:
 1529              		.loc 1 467 10 view .LVU411
 1530 003c 2FE0     		b	.L93
 1531              	.LVL169:
 1532              	.L103:
 465:Core/Src/rc522.c ****     {   
 1533              		.loc 1 465 54 discriminator 2 view .LVU412
 1534 003e 9DF80C20 		ldrb	r2, [sp, #12]	@ zero_extendqisi2
 465:Core/Src/rc522.c ****     {   
 1535              		.loc 1 465 45 discriminator 2 view .LVU413
 1536 0042 02F00F02 		and	r2, r2, #15
 1537 0046 0A2A     		cmp	r2, #10
 1538 0048 09D0     		beq	.L94
 1539              		.loc 1 467 10 view .LVU414
 1540 004a 0220     		movs	r0, #2
 1541              	.LVL170:
 1542              		.loc 1 467 10 view .LVU415
 1543 004c 27E0     		b	.L93
 1544              	.LVL171:
 1545              	.L95:
 468:Core/Src/rc522.c **** 	}
 469:Core/Src/rc522.c **** 
 470:Core/Src/rc522.c **** 	if(status == RC522_OK) 
 471:Core/Src/rc522.c ****     {
 472:Core/Src/rc522.c **** 		//Data to the FIFO write 16Byte
 473:Core/Src/rc522.c **** 		for(i = 0; i < 16; i++) 
 474:Core/Src/rc522.c ****         {    
 475:Core/Src/rc522.c **** 			buff[i] = *(writeData + i);   
 1546              		.loc 1 475 4 is_stmt 1 discriminator 3 view .LVU416
 1547              		.loc 1 475 14 is_stmt 0 discriminator 3 view .LVU417
 1548 004e E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 1549              		.loc 1 475 12 discriminator 3 view .LVU418
 1550 0050 03F12002 		add	r2, r3, #32
 1551 0054 6A44     		add	r2, sp, r2
 1552 0056 02F8141C 		strb	r1, [r2, #-20]
 473:Core/Src/rc522.c ****         {    
 1553              		.loc 1 473 22 is_stmt 1 discriminator 3 view .LVU419
 473:Core/Src/rc522.c ****         {    
 1554              		.loc 1 473 23 is_stmt 0 discriminator 3 view .LVU420
 1555 005a 0133     		adds	r3, r3, #1
 1556              	.LVL172:
 473:Core/Src/rc522.c ****         {    
 1557              		.loc 1 473 23 discriminator 3 view .LVU421
 1558 005c DBB2     		uxtb	r3, r3
 1559              	.LVL173:
 1560              	.L94:
 473:Core/Src/rc522.c ****         {    
 1561              		.loc 1 473 14 is_stmt 1 discriminator 1 view .LVU422
 473:Core/Src/rc522.c ****         {    
 1562              		.loc 1 473 3 is_stmt 0 discriminator 1 view .LVU423
 1563 005e 0F2B     		cmp	r3, #15
 1564 0060 F5D9     		bls	.L95
 476:Core/Src/rc522.c **** 		}
 477:Core/Src/rc522.c **** 		rc522_calculateCRC(buff, 16, &buff[16]);
 1565              		.loc 1 477 3 is_stmt 1 view .LVU424
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 40


 1566 0062 07AA     		add	r2, sp, #28
 1567 0064 1021     		movs	r1, #16
 1568 0066 03A8     		add	r0, sp, #12
 1569 0068 FFF7FEFF 		bl	rc522_calculateCRC
 1570              	.LVL174:
 478:Core/Src/rc522.c **** 		status = rc522_toCard(PCD_TRANSCEIVE, buff, 18, buff, &recvBits);
 1571              		.loc 1 478 3 view .LVU425
 1572              		.loc 1 478 12 is_stmt 0 view .LVU426
 1573 006c 0DF11E03 		add	r3, sp, #30
 1574 0070 0093     		str	r3, [sp]
 1575 0072 03AB     		add	r3, sp, #12
 1576 0074 1222     		movs	r2, #18
 1577 0076 1946     		mov	r1, r3
 1578 0078 0C20     		movs	r0, #12
 1579 007a FFF7FEFF 		bl	rc522_toCard
 1580              	.LVL175:
 479:Core/Src/rc522.c **** 
 480:Core/Src/rc522.c **** 		if((status != RC522_OK) || (recvBits != 4) || ((buff[0] & 0x0F) != 0x0A)) 
 1581              		.loc 1 480 3 is_stmt 1 view .LVU427
 1582              		.loc 1 480 5 is_stmt 0 view .LVU428
 1583 007e 80B9     		cbnz	r0, .L99
 1584              		.loc 1 480 40 discriminator 1 view .LVU429
 1585 0080 BDF81E30 		ldrh	r3, [sp, #30]
 1586              		.loc 1 480 27 discriminator 1 view .LVU430
 1587 0084 042B     		cmp	r3, #4
 1588 0086 01D0     		beq	.L104
 481:Core/Src/rc522.c ****         {   
 482:Core/Src/rc522.c **** 			status = RC522_ERR;   
 1589              		.loc 1 482 11 view .LVU431
 1590 0088 0220     		movs	r0, #2
 1591              	.LVL176:
 1592              		.loc 1 482 11 view .LVU432
 1593 008a 08E0     		b	.L93
 1594              	.LVL177:
 1595              	.L104:
 480:Core/Src/rc522.c ****         {   
 1596              		.loc 1 480 55 discriminator 2 view .LVU433
 1597 008c 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 480:Core/Src/rc522.c ****         {   
 1598              		.loc 1 480 46 discriminator 2 view .LVU434
 1599 0090 03F00F03 		and	r3, r3, #15
 1600 0094 0A2B     		cmp	r3, #10
 1601 0096 02D0     		beq	.L93
 1602              		.loc 1 482 11 view .LVU435
 1603 0098 0220     		movs	r0, #2
 1604              	.LVL178:
 1605              		.loc 1 482 11 view .LVU436
 1606 009a 00E0     		b	.L93
 1607              	.LVL179:
 1608              	.L96:
 467:Core/Src/rc522.c **** 	}
 1609              		.loc 1 467 10 view .LVU437
 1610 009c 0220     		movs	r0, #2
 1611              	.LVL180:
 1612              	.L93:
 483:Core/Src/rc522.c **** 		}
 484:Core/Src/rc522.c **** 	}
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 41


 485:Core/Src/rc522.c **** 	return status;
 1613              		.loc 1 485 2 is_stmt 1 view .LVU438
 486:Core/Src/rc522.c **** }
 1614              		.loc 1 486 1 is_stmt 0 view .LVU439
 1615 009e 08B0     		add	sp, sp, #32
 1616              	.LCFI36:
 1617              		.cfi_remember_state
 1618              		.cfi_def_cfa_offset 8
 1619              		@ sp needed
 1620 00a0 10BD     		pop	{r4, pc}
 1621              	.LVL181:
 1622              	.L99:
 1623              	.LCFI37:
 1624              		.cfi_restore_state
 482:Core/Src/rc522.c **** 		}
 1625              		.loc 1 482 11 view .LVU440
 1626 00a2 0220     		movs	r0, #2
 1627              	.LVL182:
 482:Core/Src/rc522.c **** 		}
 1628              		.loc 1 482 11 view .LVU441
 1629 00a4 FBE7     		b	.L93
 1630              		.cfi_endproc
 1631              	.LFE84:
 1633              		.text
 1634              	.Letext0:
 1635              		.file 2 "d:\\10 2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 1636              		.file 3 "d:\\10 2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 1637              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xe.h"
 1638              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f1xx.h"
 1639              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1640              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 1641              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 1642              		.file 9 "Core/Inc/rc522.h"
 1643              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s 			page 42


DEFINED SYMBOLS
                            *ABS*:00000000 rc522.c
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:18     .text.rc522_writeRegister:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:24     .text.rc522_writeRegister:00000000 rc522_writeRegister
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:90     .text.rc522_writeRegister:0000003c $d
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:96     .text.rc522_readRegister:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:102    .text.rc522_readRegister:00000000 rc522_readRegister
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:180    .text.rc522_readRegister:00000068 $d
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:186    .text.rc522_reset:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:192    .text.rc522_reset:00000000 rc522_reset
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:214    .text.rc522_setBitMask:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:220    .text.rc522_setBitMask:00000000 rc522_setBitMask
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:255    .text.rc522_clearBitMask:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:261    .text.rc522_clearBitMask:00000000 rc522_clearBitMask
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:298    .text.rc522_controlAntenna:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:304    .text.rc522_controlAntenna:00000000 rc522_controlAntenna
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:366    .text.rc522_init:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:372    .text.rc522_init:00000000 rc522_init
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:431    .text.rc522_toCard:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:437    .text.rc522_toCard:00000000 rc522_toCard
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:718    .text.rc522_request:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:724    .text.rc522_request:00000000 rc522_request
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:794    .text.rc522_anticoll:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:800    .text.rc522_anticoll:00000000 rc522_anticoll
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:906    .text.rc522_calculateCRC:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:912    .text.rc522_calculateCRC:00000000 rc522_calculateCRC
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1022   .text.rc522_halt:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1028   .text.rc522_halt:00000000 rc522_halt
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1076   .text.rc522_check:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1082   .text.rc522_check:00000000 rc522_check
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1137   .text.rc522_selectTag:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1143   .text.rc522_selectTag:00000000 rc522_selectTag
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1247   .text.rc522_auth:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1253   .text.rc522_auth:00000000 rc522_auth
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1384   .text.rc522_read:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1390   .text.rc522_read:00000000 rc522_read
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1463   .text.rc522_write:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccEKdsSw.s:1469   .text.rc522_write:00000000 rc522_write

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
hspi1
HAL_SPI_TransmitReceive
