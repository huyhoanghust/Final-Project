ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sim4g_lte.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.sim7672_reset.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 53494D20 		.ascii	"SIM RESET\012\000"
  20      52455345 
  20      540A00
  21              		.section	.text.sim7672_reset,"ax",%progbits
  22              		.align	1
  23              		.global	sim7672_reset
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	sim7672_reset:
  29              	.LFB68:
  30              		.file 1 "Core/Src/sim4g_lte.c"
   1:Core/Src/sim4g_lte.c **** /**
   2:Core/Src/sim4g_lte.c ****  * @file sim4g_lte.c
   3:Core/Src/sim4g_lte.c ****  * @author hoanghuyhust (hoangnh191855@sis.hust.edu.vn)
   4:Core/Src/sim4g_lte.c ****  * @brief
   5:Core/Src/sim4g_lte.c ****  * @version 0.1
   6:Core/Src/sim4g_lte.c ****  * @date 2023-11-05
   7:Core/Src/sim4g_lte.c ****  *
   8:Core/Src/sim4g_lte.c ****  * @copyright Copyright (c) 2023
   9:Core/Src/sim4g_lte.c ****  *
  10:Core/Src/sim4g_lte.c ****  */
  11:Core/Src/sim4g_lte.c **** #include "sim4g_lte.h"
  12:Core/Src/sim4g_lte.c **** 
  13:Core/Src/sim4g_lte.c **** char simRxBuf[200] = {0};
  14:Core/Src/sim4g_lte.c **** char simRxData;
  15:Core/Src/sim4g_lte.c **** simRxCplt_t simRxCplt = SIM_NOT_RX_CPLT;
  16:Core/Src/sim4g_lte.c **** char simRxResponse[200] = {0};
  17:Core/Src/sim4g_lte.c **** volatile int simRxIndex = 0;
  18:Core/Src/sim4g_lte.c **** volatile bool iswaiting4response = true;
  19:Core/Src/sim4g_lte.c **** simInfo_t sim7672 = {"m-wap", "mms", "mms", 0, 0};
  20:Core/Src/sim4g_lte.c **** 
  21:Core/Src/sim4g_lte.c **** 
  22:Core/Src/sim4g_lte.c **** 
  23:Core/Src/sim4g_lte.c **** void sim7672_reset(void)
  24:Core/Src/sim4g_lte.c **** {
  31              		.loc 1 24 1 view -0
  32              		.cfi_startproc
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 2


  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  25:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_RESET_GPIO_Port, SIM_RESET_Pin, GPIO_PIN_RESET);
  40              		.loc 1 25 5 view .LVU1
  41 0002 0F4C     		ldr	r4, .L3
  42 0004 0022     		movs	r2, #0
  43 0006 4FF40041 		mov	r1, #32768
  44 000a 2046     		mov	r0, r4
  45 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
  46              	.LVL0:
  26:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
  47              		.loc 1 26 5 view .LVU2
  48 0010 3220     		movs	r0, #50
  49 0012 FFF7FEFF 		bl	HAL_Delay
  50              	.LVL1:
  27:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_RESET_GPIO_Port, SIM_RESET_Pin, GPIO_PIN_SET);
  51              		.loc 1 27 5 view .LVU3
  52 0016 0122     		movs	r2, #1
  53 0018 4FF40041 		mov	r1, #32768
  54 001c 2046     		mov	r0, r4
  55 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
  56              	.LVL2:
  28:Core/Src/sim4g_lte.c ****     HAL_Delay(2500);
  57              		.loc 1 28 5 view .LVU4
  58 0022 40F6C410 		movw	r0, #2500
  59 0026 FFF7FEFF 		bl	HAL_Delay
  60              	.LVL3:
  29:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_RESET_GPIO_Port, SIM_RESET_Pin, GPIO_PIN_RESET);
  61              		.loc 1 29 5 view .LVU5
  62 002a 0022     		movs	r2, #0
  63 002c 4FF40041 		mov	r1, #32768
  64 0030 2046     		mov	r0, r4
  65 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
  66              	.LVL4:
  30:Core/Src/sim4g_lte.c ****     log_data("SIM RESET\n");
  67              		.loc 1 30 5 view .LVU6
  68 0036 0348     		ldr	r0, .L3+4
  69 0038 FFF7FEFF 		bl	log_data
  70              	.LVL5:
  31:Core/Src/sim4g_lte.c **** }
  71              		.loc 1 31 1 is_stmt 0 view .LVU7
  72 003c 10BD     		pop	{r4, pc}
  73              	.L4:
  74 003e 00BF     		.align	2
  75              	.L3:
  76 0040 00080140 		.word	1073809408
  77 0044 00000000 		.word	.LC0
  78              		.cfi_endproc
  79              	.LFE68:
  81              		.section	.text.sim7672_pwrOff,"ax",%progbits
  82              		.align	1
  83              		.global	sim7672_pwrOff
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 3


  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  88              	sim7672_pwrOff:
  89              	.LFB69:
  32:Core/Src/sim4g_lte.c **** 
  33:Core/Src/sim4g_lte.c **** void sim7672_pwrOff(void)
  34:Core/Src/sim4g_lte.c **** {
  90              		.loc 1 34 1 is_stmt 1 view -0
  91              		.cfi_startproc
  92              		@ args = 0, pretend = 0, frame = 0
  93              		@ frame_needed = 0, uses_anonymous_args = 0
  94 0000 08B5     		push	{r3, lr}
  95              	.LCFI1:
  96              		.cfi_def_cfa_offset 8
  97              		.cfi_offset 3, -8
  98              		.cfi_offset 14, -4
  35:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_CTRL_PWR_GPIO_Port, SIM_CTRL_PWR_Pin, GPIO_PIN_SET);
  99              		.loc 1 35 5 view .LVU9
 100 0002 0122     		movs	r2, #1
 101 0004 4FF40061 		mov	r1, #2048
 102 0008 0348     		ldr	r0, .L7
 103 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 104              	.LVL6:
  36:Core/Src/sim4g_lte.c ****     HAL_Delay(100);
 105              		.loc 1 36 5 view .LVU10
 106 000e 6420     		movs	r0, #100
 107 0010 FFF7FEFF 		bl	HAL_Delay
 108              	.LVL7:
  37:Core/Src/sim4g_lte.c **** }
 109              		.loc 1 37 1 is_stmt 0 view .LVU11
 110 0014 08BD     		pop	{r3, pc}
 111              	.L8:
 112 0016 00BF     		.align	2
 113              	.L7:
 114 0018 00080140 		.word	1073809408
 115              		.cfi_endproc
 116              	.LFE69:
 118              		.section	.text.sim7672_pwrOn,"ax",%progbits
 119              		.align	1
 120              		.global	sim7672_pwrOn
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
 125              	sim7672_pwrOn:
 126              	.LFB70:
  38:Core/Src/sim4g_lte.c **** 
  39:Core/Src/sim4g_lte.c **** void sim7672_pwrOn(void)
  40:Core/Src/sim4g_lte.c **** {
 127              		.loc 1 40 1 is_stmt 1 view -0
 128              		.cfi_startproc
 129              		@ args = 0, pretend = 0, frame = 0
 130              		@ frame_needed = 0, uses_anonymous_args = 0
 131 0000 08B5     		push	{r3, lr}
 132              	.LCFI2:
 133              		.cfi_def_cfa_offset 8
 134              		.cfi_offset 3, -8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 4


 135              		.cfi_offset 14, -4
  41:Core/Src/sim4g_lte.c ****     // EN power
  42:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_CTRL_PWR_GPIO_Port, SIM_CTRL_PWR_Pin, GPIO_PIN_RESET);
 136              		.loc 1 42 5 view .LVU13
 137 0002 0022     		movs	r2, #0
 138 0004 4FF40061 		mov	r1, #2048
 139 0008 0348     		ldr	r0, .L11
 140 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 141              	.LVL8:
  43:Core/Src/sim4g_lte.c ****     HAL_Delay(100);
 142              		.loc 1 43 5 view .LVU14
 143 000e 6420     		movs	r0, #100
 144 0010 FFF7FEFF 		bl	HAL_Delay
 145              	.LVL9:
  44:Core/Src/sim4g_lte.c **** }
 146              		.loc 1 44 1 is_stmt 0 view .LVU15
 147 0014 08BD     		pop	{r3, pc}
 148              	.L12:
 149 0016 00BF     		.align	2
 150              	.L11:
 151 0018 00080140 		.word	1073809408
 152              		.cfi_endproc
 153              	.LFE70:
 155              		.section	.text.sim7672_sendcmd_notresp,"ax",%progbits
 156              		.align	1
 157              		.global	sim7672_sendcmd_notresp
 158              		.syntax unified
 159              		.thumb
 160              		.thumb_func
 162              	sim7672_sendcmd_notresp:
 163              	.LVL10:
 164              	.LFB72:
  45:Core/Src/sim4g_lte.c **** 
  46:Core/Src/sim4g_lte.c **** void sim7672_init(void)
  47:Core/Src/sim4g_lte.c **** {
  48:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_PWRKEY_GPIO_Port, SIM_PWRKEY_Pin, GPIO_PIN_SET);
  49:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
  50:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_PWRKEY_GPIO_Port, SIM_PWRKEY_Pin, GPIO_PIN_RESET);
  51:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
  52:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_PWRKEY_GPIO_Port, SIM_PWRKEY_Pin, GPIO_PIN_SET);
  53:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
  54:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_PWRKEY_GPIO_Port, SIM_PWRKEY_Pin, GPIO_PIN_RESET);
  55:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
  56:Core/Src/sim4g_lte.c ****     log_data("SIM PWERKEY\n");
  57:Core/Src/sim4g_lte.c **** 
  58:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("ATE0\r\n", "OK\r\n",TIME_VERY_SHORT) != SIM_TRUE)
  59:Core/Src/sim4g_lte.c ****     {
  60:Core/Src/sim4g_lte.c ****         sim7672_errorHandle();
  61:Core/Src/sim4g_lte.c ****     }
  62:Core/Src/sim4g_lte.c ****     HAL_Delay(100);
  63:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT\r\n", "OK\r\n",TIME_VERY_SHORT) != SIM_TRUE)
  64:Core/Src/sim4g_lte.c ****     {
  65:Core/Src/sim4g_lte.c ****         sim7672_errorHandle();
  66:Core/Src/sim4g_lte.c ****     }
  67:Core/Src/sim4g_lte.c ****     HAL_Delay(100);
  68:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT+CFUN?\r\n", "1\r\n",TIME_VERY_SHORT) != SIM_TRUE)
  69:Core/Src/sim4g_lte.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 5


  70:Core/Src/sim4g_lte.c ****         sim7672_errorHandle();
  71:Core/Src/sim4g_lte.c ****     }
  72:Core/Src/sim4g_lte.c ****     HAL_Delay(100);
  73:Core/Src/sim4g_lte.c ****     
  74:Core/Src/sim4g_lte.c ****     sim7672_checkSIMCard();
  75:Core/Src/sim4g_lte.c **** 
  76:Core/Src/sim4g_lte.c **** }
  77:Core/Src/sim4g_lte.c **** 
  78:Core/Src/sim4g_lte.c **** void sim7672_sendcmd_notresp(char *cmd)
  79:Core/Src/sim4g_lte.c **** {
 165              		.loc 1 79 1 is_stmt 1 view -0
 166              		.cfi_startproc
 167              		@ args = 0, pretend = 0, frame = 0
 168              		@ frame_needed = 0, uses_anonymous_args = 0
 169              		.loc 1 79 1 is_stmt 0 view .LVU17
 170 0000 10B5     		push	{r4, lr}
 171              	.LCFI3:
 172              		.cfi_def_cfa_offset 8
 173              		.cfi_offset 4, -8
 174              		.cfi_offset 14, -4
 175 0002 0446     		mov	r4, r0
  80:Core/Src/sim4g_lte.c ****     HAL_UART_Transmit(&huart1, (uint8_t *)cmd, strlen(cmd), 100);
 176              		.loc 1 80 5 is_stmt 1 view .LVU18
 177              		.loc 1 80 48 is_stmt 0 view .LVU19
 178 0004 FFF7FEFF 		bl	strlen
 179              	.LVL11:
 180              		.loc 1 80 5 view .LVU20
 181 0008 6423     		movs	r3, #100
 182 000a 82B2     		uxth	r2, r0
 183 000c 2146     		mov	r1, r4
 184 000e 0248     		ldr	r0, .L15
 185 0010 FFF7FEFF 		bl	HAL_UART_Transmit
 186              	.LVL12:
  81:Core/Src/sim4g_lte.c **** }
 187              		.loc 1 81 1 view .LVU21
 188 0014 10BD     		pop	{r4, pc}
 189              	.LVL13:
 190              	.L16:
 191              		.loc 1 81 1 view .LVU22
 192 0016 00BF     		.align	2
 193              	.L15:
 194 0018 00000000 		.word	huart1
 195              		.cfi_endproc
 196              	.LFE72:
 198              		.section	.text.sim7672_send_command,"ax",%progbits
 199              		.align	1
 200              		.global	sim7672_send_command
 201              		.syntax unified
 202              		.thumb
 203              		.thumb_func
 205              	sim7672_send_command:
 206              	.LVL14:
 207              	.LFB73:
  82:Core/Src/sim4g_lte.c **** 
  83:Core/Src/sim4g_lte.c **** simState_t sim7672_send_command(char *simCommand, char *trueResponse, int waitms)
  84:Core/Src/sim4g_lte.c **** {
 208              		.loc 1 84 1 is_stmt 1 view -0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 6


 209              		.cfi_startproc
 210              		@ args = 0, pretend = 0, frame = 0
 211              		@ frame_needed = 0, uses_anonymous_args = 0
 212              		.loc 1 84 1 is_stmt 0 view .LVU24
 213 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 214              	.LCFI4:
 215              		.cfi_def_cfa_offset 24
 216              		.cfi_offset 4, -24
 217              		.cfi_offset 5, -20
 218              		.cfi_offset 6, -16
 219              		.cfi_offset 7, -12
 220              		.cfi_offset 8, -8
 221              		.cfi_offset 14, -4
 222 0004 0646     		mov	r6, r0
 223 0006 0F46     		mov	r7, r1
 224 0008 1546     		mov	r5, r2
  85:Core/Src/sim4g_lte.c ****     memset(simRxResponse, '\0', strlen(simRxResponse));
 225              		.loc 1 85 5 is_stmt 1 view .LVU25
 226 000a 2A4C     		ldr	r4, .L24
 227 000c 2046     		mov	r0, r4
 228              	.LVL15:
 229              		.loc 1 85 5 is_stmt 0 view .LVU26
 230 000e FFF7FEFF 		bl	strlen
 231              	.LVL16:
 232              		.loc 1 85 5 view .LVU27
 233 0012 0246     		mov	r2, r0
 234 0014 0021     		movs	r1, #0
 235 0016 2046     		mov	r0, r4
 236 0018 FFF7FEFF 		bl	memset
 237              	.LVL17:
  86:Core/Src/sim4g_lte.c ****     memset(simRxBuf, '\0', strlen(simRxBuf));
 238              		.loc 1 86 5 is_stmt 1 view .LVU28
 239 001c 264C     		ldr	r4, .L24+4
 240 001e 2046     		mov	r0, r4
 241 0020 FFF7FEFF 		bl	strlen
 242              	.LVL18:
 243 0024 0246     		mov	r2, r0
 244 0026 0021     		movs	r1, #0
 245 0028 2046     		mov	r0, r4
 246 002a FFF7FEFF 		bl	memset
 247              	.LVL19:
  87:Core/Src/sim4g_lte.c ****     simRxIndex = 0;
 248              		.loc 1 87 5 view .LVU29
 249              		.loc 1 87 16 is_stmt 0 view .LVU30
 250 002e 234B     		ldr	r3, .L24+8
 251 0030 0022     		movs	r2, #0
 252 0032 1A60     		str	r2, [r3]
  88:Core/Src/sim4g_lte.c **** 
  89:Core/Src/sim4g_lte.c ****     uint32_t timeout = HAL_GetTick();
 253              		.loc 1 89 5 is_stmt 1 view .LVU31
 254              		.loc 1 89 24 is_stmt 0 view .LVU32
 255 0034 FFF7FEFF 		bl	HAL_GetTick
 256              	.LVL20:
 257 0038 0446     		mov	r4, r0
 258              	.LVL21:
  90:Core/Src/sim4g_lte.c **** 
  91:Core/Src/sim4g_lte.c ****     HAL_UART_Receive_IT(&huart1, (uint8_t *)&simRxData, 1);
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 7


 259              		.loc 1 91 5 is_stmt 1 view .LVU33
 260 003a DFF88480 		ldr	r8, .L24+12
 261 003e 0122     		movs	r2, #1
 262 0040 2049     		ldr	r1, .L24+16
 263 0042 4046     		mov	r0, r8
 264              	.LVL22:
 265              		.loc 1 91 5 is_stmt 0 view .LVU34
 266 0044 FFF7FEFF 		bl	HAL_UART_Receive_IT
 267              	.LVL23:
  92:Core/Src/sim4g_lte.c ****     HAL_UART_Transmit(&huart1, (uint8_t *)simCommand, strlen(simCommand), 100);
 268              		.loc 1 92 5 is_stmt 1 view .LVU35
 269              		.loc 1 92 55 is_stmt 0 view .LVU36
 270 0048 3046     		mov	r0, r6
 271 004a FFF7FEFF 		bl	strlen
 272              	.LVL24:
 273              		.loc 1 92 5 view .LVU37
 274 004e 6423     		movs	r3, #100
 275 0050 82B2     		uxth	r2, r0
 276 0052 3146     		mov	r1, r6
 277 0054 4046     		mov	r0, r8
 278 0056 FFF7FEFF 		bl	HAL_UART_Transmit
 279              	.LVL25:
  93:Core/Src/sim4g_lte.c **** 
  94:Core/Src/sim4g_lte.c ****     log_data(simCommand);
 280              		.loc 1 94 5 is_stmt 1 view .LVU38
 281 005a 3046     		mov	r0, r6
 282 005c FFF7FEFF 		bl	log_data
 283              	.LVL26:
  95:Core/Src/sim4g_lte.c **** 
  96:Core/Src/sim4g_lte.c ****     while (HAL_GetTick()-timeout<=waitms)
 284              		.loc 1 96 5 view .LVU39
 285              		.loc 1 96 11 is_stmt 0 view .LVU40
 286 0060 02E0     		b	.L18
 287              	.L19:
  97:Core/Src/sim4g_lte.c ****     {
  98:Core/Src/sim4g_lte.c ****         HAL_Delay(50);
 288              		.loc 1 98 9 is_stmt 1 view .LVU41
 289 0062 3220     		movs	r0, #50
 290 0064 FFF7FEFF 		bl	HAL_Delay
 291              	.LVL27:
 292              	.L18:
  96:Core/Src/sim4g_lte.c ****     {
 293              		.loc 1 96 11 view .LVU42
  96:Core/Src/sim4g_lte.c ****     {
 294              		.loc 1 96 12 is_stmt 0 view .LVU43
 295 0068 FFF7FEFF 		bl	HAL_GetTick
 296              	.LVL28:
  96:Core/Src/sim4g_lte.c ****     {
 297              		.loc 1 96 25 view .LVU44
 298 006c 001B     		subs	r0, r0, r4
  96:Core/Src/sim4g_lte.c ****     {
 299              		.loc 1 96 11 view .LVU45
 300 006e A842     		cmp	r0, r5
 301 0070 F7D9     		bls	.L19
  99:Core/Src/sim4g_lte.c ****     }
 100:Core/Src/sim4g_lte.c ****     memcpy(simRxResponse, simRxBuf, strlen(simRxBuf));
 302              		.loc 1 100 5 is_stmt 1 view .LVU46
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 8


 303 0072 114D     		ldr	r5, .L24+4
 304              	.LVL29:
 305              		.loc 1 100 5 is_stmt 0 view .LVU47
 306 0074 2846     		mov	r0, r5
 307 0076 FFF7FEFF 		bl	strlen
 308              	.LVL30:
 309 007a 0246     		mov	r2, r0
 310 007c 0D4C     		ldr	r4, .L24
 311              	.LVL31:
 312              		.loc 1 100 5 view .LVU48
 313 007e 2946     		mov	r1, r5
 314 0080 2046     		mov	r0, r4
 315 0082 FFF7FEFF 		bl	memcpy
 316              	.LVL32:
 101:Core/Src/sim4g_lte.c ****     log_data(simRxResponse);
 317              		.loc 1 101 5 is_stmt 1 view .LVU49
 318 0086 2046     		mov	r0, r4
 319 0088 FFF7FEFF 		bl	log_data
 320              	.LVL33:
 102:Core/Src/sim4g_lte.c ****     if ((strstr(simRxResponse, trueResponse) == NULL))
 321              		.loc 1 102 5 view .LVU50
 322              		.loc 1 102 10 is_stmt 0 view .LVU51
 323 008c 3946     		mov	r1, r7
 324 008e 2046     		mov	r0, r4
 325 0090 FFF7FEFF 		bl	strstr
 326              	.LVL34:
 327              		.loc 1 102 8 view .LVU52
 328 0094 20B1     		cbz	r0, .L23
 103:Core/Src/sim4g_lte.c ****     {
 104:Core/Src/sim4g_lte.c ****         memset(simRxResponse, '\0', strlen(simRxResponse));
 105:Core/Src/sim4g_lte.c ****         // simRxCplt = SIM_NOT_RX_CPLT;
 106:Core/Src/sim4g_lte.c ****         return SIM_FALSE;
 107:Core/Src/sim4g_lte.c ****     }
 108:Core/Src/sim4g_lte.c **** 
 109:Core/Src/sim4g_lte.c ****     // simRxCplt = SIM_NOT_RX_CPLT;
 110:Core/Src/sim4g_lte.c ****     iswaiting4response = true;
 329              		.loc 1 110 5 is_stmt 1 view .LVU53
 330              		.loc 1 110 24 is_stmt 0 view .LVU54
 331 0096 0120     		movs	r0, #1
 332 0098 0B4B     		ldr	r3, .L24+20
 333 009a 1870     		strb	r0, [r3]
 111:Core/Src/sim4g_lte.c ****     return SIM_TRUE;
 334              		.loc 1 111 5 is_stmt 1 view .LVU55
 335              	.L21:
 112:Core/Src/sim4g_lte.c **** }
 336              		.loc 1 112 1 is_stmt 0 view .LVU56
 337 009c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 338              	.LVL35:
 339              	.L23:
 104:Core/Src/sim4g_lte.c ****         // simRxCplt = SIM_NOT_RX_CPLT;
 340              		.loc 1 104 9 is_stmt 1 view .LVU57
 341 00a0 2046     		mov	r0, r4
 342 00a2 FFF7FEFF 		bl	strlen
 343              	.LVL36:
 344 00a6 0246     		mov	r2, r0
 345 00a8 0021     		movs	r1, #0
 346 00aa 2046     		mov	r0, r4
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 9


 347 00ac FFF7FEFF 		bl	memset
 348              	.LVL37:
 106:Core/Src/sim4g_lte.c ****     }
 349              		.loc 1 106 9 view .LVU58
 106:Core/Src/sim4g_lte.c ****     }
 350              		.loc 1 106 16 is_stmt 0 view .LVU59
 351 00b0 0020     		movs	r0, #0
 352 00b2 F3E7     		b	.L21
 353              	.L25:
 354              		.align	2
 355              	.L24:
 356 00b4 00000000 		.word	.LANCHOR0
 357 00b8 00000000 		.word	.LANCHOR1
 358 00bc 00000000 		.word	.LANCHOR2
 359 00c0 00000000 		.word	huart1
 360 00c4 00000000 		.word	.LANCHOR3
 361 00c8 00000000 		.word	.LANCHOR4
 362              		.cfi_endproc
 363              	.LFE73:
 365              		.section	.rodata.sim7672_callback.str1.4,"aMS",%progbits,1
 366              		.align	2
 367              	.LC1:
 368 0000 0D0A00   		.ascii	"\015\012\000"
 369              		.section	.text.sim7672_callback,"ax",%progbits
 370              		.align	1
 371              		.global	sim7672_callback
 372              		.syntax unified
 373              		.thumb
 374              		.thumb_func
 376              	sim7672_callback:
 377              	.LFB74:
 113:Core/Src/sim4g_lte.c **** 
 114:Core/Src/sim4g_lte.c **** // Receive response from SIM and delete Buffer
 115:Core/Src/sim4g_lte.c **** // message response format: \r\n[Respone..]\r\\n
 116:Core/Src/sim4g_lte.c **** void sim7672_callback(void)
 117:Core/Src/sim4g_lte.c **** {
 378              		.loc 1 117 1 is_stmt 1 view -0
 379              		.cfi_startproc
 380              		@ args = 0, pretend = 0, frame = 0
 381              		@ frame_needed = 0, uses_anonymous_args = 0
 382 0000 10B5     		push	{r4, lr}
 383              	.LCFI5:
 384              		.cfi_def_cfa_offset 8
 385              		.cfi_offset 4, -8
 386              		.cfi_offset 14, -4
 118:Core/Src/sim4g_lte.c ****     simRxBuf[simRxIndex++] = simRxData;
 387              		.loc 1 118 5 view .LVU61
 388              		.loc 1 118 24 is_stmt 0 view .LVU62
 389 0002 114A     		ldr	r2, .L30
 390 0004 1368     		ldr	r3, [r2]
 391 0006 591C     		adds	r1, r3, #1
 392 0008 1160     		str	r1, [r2]
 393              		.loc 1 118 28 view .LVU63
 394 000a 1048     		ldr	r0, .L30+4
 395 000c 104A     		ldr	r2, .L30+8
 396 000e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 397 0010 C254     		strb	r2, [r0, r3]
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 10


 119:Core/Src/sim4g_lte.c **** 
 120:Core/Src/sim4g_lte.c ****     if ((strstr(simRxBuf, "\r\n") != NULL) && (simRxIndex == 2))
 398              		.loc 1 120 5 is_stmt 1 view .LVU64
 399              		.loc 1 120 10 is_stmt 0 view .LVU65
 400 0012 1049     		ldr	r1, .L30+12
 401 0014 FFF7FEFF 		bl	strstr
 402              	.LVL38:
 403              		.loc 1 120 8 view .LVU66
 404 0018 18B1     		cbz	r0, .L27
 405              		.loc 1 120 59 discriminator 1 view .LVU67
 406 001a 0B4B     		ldr	r3, .L30
 407 001c 1B68     		ldr	r3, [r3]
 408              		.loc 1 120 44 discriminator 1 view .LVU68
 409 001e 022B     		cmp	r3, #2
 410 0020 05D0     		beq	.L29
 411              	.L27:
 121:Core/Src/sim4g_lte.c ****     {
 122:Core/Src/sim4g_lte.c ****         memset(simRxBuf, '\0', strlen(simRxBuf));
 123:Core/Src/sim4g_lte.c ****         simRxIndex = 0;
 124:Core/Src/sim4g_lte.c ****     }
 125:Core/Src/sim4g_lte.c ****     // if ((strstr(simRxBuf, "\r\n") != NULL))
 126:Core/Src/sim4g_lte.c ****     // {
 127:Core/Src/sim4g_lte.c ****     //     // log_data(simRxBuf);
 128:Core/Src/sim4g_lte.c ****     //     memcpy(simRxResponse, simRxBuf, strlen(simRxBuf));
 129:Core/Src/sim4g_lte.c ****     //     memset(simRxBuf, '\0', strlen(simRxBuf));
 130:Core/Src/sim4g_lte.c ****     //     simRxIndex = 0;
 131:Core/Src/sim4g_lte.c ****     //     iswaiting4response = false;
 132:Core/Src/sim4g_lte.c ****     // }
 133:Core/Src/sim4g_lte.c ****     HAL_UART_Receive_IT(&huart1, (uint8_t *)&simRxData, 1);
 412              		.loc 1 133 5 is_stmt 1 view .LVU69
 413 0022 0122     		movs	r2, #1
 414 0024 0A49     		ldr	r1, .L30+8
 415 0026 0C48     		ldr	r0, .L30+16
 416 0028 FFF7FEFF 		bl	HAL_UART_Receive_IT
 417              	.LVL39:
 134:Core/Src/sim4g_lte.c **** }
 418              		.loc 1 134 1 is_stmt 0 view .LVU70
 419 002c 10BD     		pop	{r4, pc}
 420              	.L29:
 122:Core/Src/sim4g_lte.c ****         simRxIndex = 0;
 421              		.loc 1 122 9 is_stmt 1 view .LVU71
 422 002e 074C     		ldr	r4, .L30+4
 423 0030 2046     		mov	r0, r4
 424 0032 FFF7FEFF 		bl	strlen
 425              	.LVL40:
 426 0036 0246     		mov	r2, r0
 427 0038 0021     		movs	r1, #0
 428 003a 2046     		mov	r0, r4
 429 003c FFF7FEFF 		bl	memset
 430              	.LVL41:
 123:Core/Src/sim4g_lte.c ****     }
 431              		.loc 1 123 9 view .LVU72
 123:Core/Src/sim4g_lte.c ****     }
 432              		.loc 1 123 20 is_stmt 0 view .LVU73
 433 0040 014B     		ldr	r3, .L30
 434 0042 0022     		movs	r2, #0
 435 0044 1A60     		str	r2, [r3]
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 11


 436 0046 ECE7     		b	.L27
 437              	.L31:
 438              		.align	2
 439              	.L30:
 440 0048 00000000 		.word	.LANCHOR2
 441 004c 00000000 		.word	.LANCHOR1
 442 0050 00000000 		.word	.LANCHOR3
 443 0054 00000000 		.word	.LC1
 444 0058 00000000 		.word	huart1
 445              		.cfi_endproc
 446              	.LFE74:
 448              		.section	.rodata.sim7672_errorHandle.str1.4,"aMS",%progbits,1
 449              		.align	2
 450              	.LC2:
 451 0000 73696D20 		.ascii	"sim error\012\000"
 451      6572726F 
 451      720A00
 452              		.section	.text.sim7672_errorHandle,"ax",%progbits
 453              		.align	1
 454              		.global	sim7672_errorHandle
 455              		.syntax unified
 456              		.thumb
 457              		.thumb_func
 459              	sim7672_errorHandle:
 460              	.LFB78:
 135:Core/Src/sim4g_lte.c **** 
 136:Core/Src/sim4g_lte.c **** /*
 137:Core/Src/sim4g_lte.c **** 2 Automatic
 138:Core/Src/sim4g_lte.c **** 13 GSM Only
 139:Core/Src/sim4g_lte.c **** 14 WCDMA Only
 140:Core/Src/sim4g_lte.c **** 38 LTE Only
 141:Core/Src/sim4g_lte.c **** */
 142:Core/Src/sim4g_lte.c **** void sim7672_start_LTE(void)
 143:Core/Src/sim4g_lte.c **** {
 144:Core/Src/sim4g_lte.c ****     // // check connection  "AT+CGATT=1\r\n"
 145:Core/Src/sim4g_lte.c ****     // if (sim7672_send_command("AT+CGATT=1\r\n", "OK\r\n") != SIM_TRUE)
 146:Core/Src/sim4g_lte.c ****     // {
 147:Core/Src/sim4g_lte.c ****     //     sim7672_errorHandle();
 148:Core/Src/sim4g_lte.c ****     // }
 149:Core/Src/sim4g_lte.c ****     // HAL_Delay(100);
 150:Core/Src/sim4g_lte.c ****     /*
 151:Core/Src/sim4g_lte.c ****     setting APN:
 152:Core/Src/sim4g_lte.c ****     mobi: APN: m-wap
 153:Core/Src/sim4g_lte.c ****     vina: APN: m3-world
 154:Core/Src/sim4g_lte.c ****     vietnammobile: APN: internet
 155:Core/Src/sim4g_lte.c ****     viettel: APN: v-internet
 156:Core/Src/sim4g_lte.c ****     */
 157:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT+CGDCONT=1,\"IP\",\"v-internet\"\r\n", "OK\r\n",TIME_VERY_SHORT) !=
 158:Core/Src/sim4g_lte.c ****     {
 159:Core/Src/sim4g_lte.c ****         sim7672_errorHandle();
 160:Core/Src/sim4g_lte.c ****     }
 161:Core/Src/sim4g_lte.c ****     HAL_Delay(100);
 162:Core/Src/sim4g_lte.c ****     // // select network LTE
 163:Core/Src/sim4g_lte.c ****     // if (sim7672_send_command("AT+CNMP=38\r\n", "OK\r\n") != SIM_TRUE)
 164:Core/Src/sim4g_lte.c ****     // {
 165:Core/Src/sim4g_lte.c ****     //     sim7672_errorHandle();
 166:Core/Src/sim4g_lte.c ****     // }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 12


 167:Core/Src/sim4g_lte.c ****     // HAL_Delay(100);
 168:Core/Src/sim4g_lte.c ****     // start socket: 0 success
 169:Core/Src/sim4g_lte.c ****     // if(sim7672_send_command("AT+NETCLOSE\r\n","OK\r\n")!=SIM_TRUE)
 170:Core/Src/sim4g_lte.c ****     // {
 171:Core/Src/sim4g_lte.c ****     //     sim7672_errorHandle();
 172:Core/Src/sim4g_lte.c ****     // }
 173:Core/Src/sim4g_lte.c ****     // HAL_Delay(100);
 174:Core/Src/sim4g_lte.c ****     // select band any
 175:Core/Src/sim4g_lte.c ****     // if(sim7672_send_command("AT+CNBP=0x000700000FFF0380,0x000007FF3FDF3FFF\r\n", "OK\r\n")!=SIM_
 176:Core/Src/sim4g_lte.c ****     // {
 177:Core/Src/sim4g_lte.c ****     //     sim7672_errorHandle();
 178:Core/Src/sim4g_lte.c ****     // }
 179:Core/Src/sim4g_lte.c ****     // HAL_Delay(100);
 180:Core/Src/sim4g_lte.c ****     // normal message
 181:Core/Src/sim4g_lte.c ****     // if(sim7672_send_command("AT+CIPMODE=0\r\n", "OK\r\n")!=SIM_TRUE)
 182:Core/Src/sim4g_lte.c ****     // {
 183:Core/Src/sim4g_lte.c ****     //     sim7672_errorHandle();
 184:Core/Src/sim4g_lte.c ****     // }
 185:Core/Src/sim4g_lte.c ****     // HAL_Delay(100);
 186:Core/Src/sim4g_lte.c ****     // start socket: 0 success
 187:Core/Src/sim4g_lte.c ****     // if(sim7672_send_command("AT+NETOPEN\r\n","OK\r\n")!=SIM_TRUE)
 188:Core/Src/sim4g_lte.c ****     // {
 189:Core/Src/sim4g_lte.c ****     //     sim7672_errorHandle();
 190:Core/Src/sim4g_lte.c ****     // }
 191:Core/Src/sim4g_lte.c ****     // HAL_Delay(100);
 192:Core/Src/sim4g_lte.c **** }
 193:Core/Src/sim4g_lte.c **** 
 194:Core/Src/sim4g_lte.c **** uint8_t sim7672_check_signalStrength(void)
 195:Core/Src/sim4g_lte.c **** {
 196:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT+CSQ\r\n", "\r\n",TIME_VERY_SHORT) != SIM_TRUE)
 197:Core/Src/sim4g_lte.c ****     {
 198:Core/Src/sim4g_lte.c ****         sim7672_errorHandle();
 199:Core/Src/sim4g_lte.c ****     }
 200:Core/Src/sim4g_lte.c ****     sscanf((const char *)simRxResponse, "+CSQ: %i,", (int *)&sim7672.signalQuality);
 201:Core/Src/sim4g_lte.c ****     return sim7672.signalQuality;
 202:Core/Src/sim4g_lte.c **** }
 203:Core/Src/sim4g_lte.c **** 
 204:Core/Src/sim4g_lte.c **** void sim7672_checkSIMCard()
 205:Core/Src/sim4g_lte.c **** {
 206:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT+CPIN?\r\n", "READY\r\n",TIME_VERY_SHORT) != SIM_TRUE)
 207:Core/Src/sim4g_lte.c ****     {
 208:Core/Src/sim4g_lte.c ****         sim7672_errorHandle();
 209:Core/Src/sim4g_lte.c ****     }
 210:Core/Src/sim4g_lte.c **** }
 211:Core/Src/sim4g_lte.c **** 
 212:Core/Src/sim4g_lte.c **** void sim7672_errorHandle(void)
 213:Core/Src/sim4g_lte.c **** {
 461              		.loc 1 213 1 is_stmt 1 view -0
 462              		.cfi_startproc
 463              		@ Volatile: function does not return.
 464              		@ args = 0, pretend = 0, frame = 0
 465              		@ frame_needed = 0, uses_anonymous_args = 0
 466 0000 08B5     		push	{r3, lr}
 467              	.LCFI6:
 468              		.cfi_def_cfa_offset 8
 469              		.cfi_offset 3, -8
 470              		.cfi_offset 14, -4
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 13


 214:Core/Src/sim4g_lte.c ****     log_data("sim error\n");
 471              		.loc 1 214 5 view .LVU75
 472 0002 0248     		ldr	r0, .L35
 473 0004 FFF7FEFF 		bl	log_data
 474              	.LVL42:
 475              	.L33:
 215:Core/Src/sim4g_lte.c ****     // __disable_irq();
 216:Core/Src/sim4g_lte.c ****     while (1)
 476              		.loc 1 216 5 discriminator 1 view .LVU76
 217:Core/Src/sim4g_lte.c ****     {
 218:Core/Src/sim4g_lte.c ****     }
 477              		.loc 1 218 5 discriminator 1 view .LVU77
 216:Core/Src/sim4g_lte.c ****     {
 478              		.loc 1 216 11 discriminator 1 view .LVU78
 479 0008 FEE7     		b	.L33
 480              	.L36:
 481 000a 00BF     		.align	2
 482              	.L35:
 483 000c 00000000 		.word	.LC2
 484              		.cfi_endproc
 485              	.LFE78:
 487              		.section	.rodata.sim7672_start_LTE.str1.4,"aMS",%progbits,1
 488              		.align	2
 489              	.LC3:
 490 0000 4F4B0D0A 		.ascii	"OK\015\012\000"
 490      00
 491 0005 000000   		.align	2
 492              	.LC4:
 493 0008 41542B43 		.ascii	"AT+CGDCONT=1,\"IP\",\"v-internet\"\015\012\000"
 493      4744434F 
 493      4E543D31 
 493      2C224950 
 493      222C2276 
 494              		.section	.text.sim7672_start_LTE,"ax",%progbits
 495              		.align	1
 496              		.global	sim7672_start_LTE
 497              		.syntax unified
 498              		.thumb
 499              		.thumb_func
 501              	sim7672_start_LTE:
 502              	.LFB75:
 143:Core/Src/sim4g_lte.c ****     // // check connection  "AT+CGATT=1\r\n"
 503              		.loc 1 143 1 view -0
 504              		.cfi_startproc
 505              		@ args = 0, pretend = 0, frame = 0
 506              		@ frame_needed = 0, uses_anonymous_args = 0
 507 0000 08B5     		push	{r3, lr}
 508              	.LCFI7:
 509              		.cfi_def_cfa_offset 8
 510              		.cfi_offset 3, -8
 511              		.cfi_offset 14, -4
 157:Core/Src/sim4g_lte.c ****     {
 512              		.loc 1 157 5 view .LVU80
 157:Core/Src/sim4g_lte.c ****     {
 513              		.loc 1 157 9 is_stmt 0 view .LVU81
 514 0002 C822     		movs	r2, #200
 515 0004 0549     		ldr	r1, .L41
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 14


 516 0006 0648     		ldr	r0, .L41+4
 517 0008 FFF7FEFF 		bl	sim7672_send_command
 518              	.LVL43:
 157:Core/Src/sim4g_lte.c ****     {
 519              		.loc 1 157 8 view .LVU82
 520 000c 0128     		cmp	r0, #1
 521 000e 03D1     		bne	.L40
 161:Core/Src/sim4g_lte.c ****     // // select network LTE
 522              		.loc 1 161 5 is_stmt 1 view .LVU83
 523 0010 6420     		movs	r0, #100
 524 0012 FFF7FEFF 		bl	HAL_Delay
 525              	.LVL44:
 192:Core/Src/sim4g_lte.c **** 
 526              		.loc 1 192 1 is_stmt 0 view .LVU84
 527 0016 08BD     		pop	{r3, pc}
 528              	.L40:
 159:Core/Src/sim4g_lte.c ****     }
 529              		.loc 1 159 9 is_stmt 1 view .LVU85
 530 0018 FFF7FEFF 		bl	sim7672_errorHandle
 531              	.LVL45:
 532              	.L42:
 533              		.align	2
 534              	.L41:
 535 001c 00000000 		.word	.LC3
 536 0020 08000000 		.word	.LC4
 537              		.cfi_endproc
 538              	.LFE75:
 540              		.section	.rodata.sim7672_check_signalStrength.str1.4,"aMS",%progbits,1
 541              		.align	2
 542              	.LC5:
 543 0000 41542B43 		.ascii	"AT+CSQ\015\012\000"
 543      53510D0A 
 543      00
 544 0009 000000   		.align	2
 545              	.LC6:
 546 000c 2B435351 		.ascii	"+CSQ: %i,\000"
 546      3A202569 
 546      2C00
 547              		.section	.text.sim7672_check_signalStrength,"ax",%progbits
 548              		.align	1
 549              		.global	sim7672_check_signalStrength
 550              		.syntax unified
 551              		.thumb
 552              		.thumb_func
 554              	sim7672_check_signalStrength:
 555              	.LFB76:
 195:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT+CSQ\r\n", "\r\n",TIME_VERY_SHORT) != SIM_TRUE)
 556              		.loc 1 195 1 view -0
 557              		.cfi_startproc
 558              		@ args = 0, pretend = 0, frame = 0
 559              		@ frame_needed = 0, uses_anonymous_args = 0
 560 0000 10B5     		push	{r4, lr}
 561              	.LCFI8:
 562              		.cfi_def_cfa_offset 8
 563              		.cfi_offset 4, -8
 564              		.cfi_offset 14, -4
 196:Core/Src/sim4g_lte.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 15


 565              		.loc 1 196 5 view .LVU87
 196:Core/Src/sim4g_lte.c ****     {
 566              		.loc 1 196 9 is_stmt 0 view .LVU88
 567 0002 C822     		movs	r2, #200
 568 0004 0849     		ldr	r1, .L47
 569 0006 0948     		ldr	r0, .L47+4
 570 0008 FFF7FEFF 		bl	sim7672_send_command
 571              	.LVL46:
 196:Core/Src/sim4g_lte.c ****     {
 572              		.loc 1 196 8 view .LVU89
 573 000c 0128     		cmp	r0, #1
 574 000e 08D1     		bne	.L46
 200:Core/Src/sim4g_lte.c ****     return sim7672.signalQuality;
 575              		.loc 1 200 5 is_stmt 1 view .LVU90
 576 0010 074C     		ldr	r4, .L47+8
 577 0012 04F10C02 		add	r2, r4, #12
 578 0016 0749     		ldr	r1, .L47+12
 579 0018 0748     		ldr	r0, .L47+16
 580 001a FFF7FEFF 		bl	sscanf
 581              	.LVL47:
 201:Core/Src/sim4g_lte.c **** }
 582              		.loc 1 201 5 view .LVU91
 202:Core/Src/sim4g_lte.c **** 
 583              		.loc 1 202 1 is_stmt 0 view .LVU92
 584 001e 207B     		ldrb	r0, [r4, #12]	@ zero_extendqisi2
 585 0020 10BD     		pop	{r4, pc}
 586              	.L46:
 198:Core/Src/sim4g_lte.c ****     }
 587              		.loc 1 198 9 is_stmt 1 view .LVU93
 588 0022 FFF7FEFF 		bl	sim7672_errorHandle
 589              	.LVL48:
 590              	.L48:
 591 0026 00BF     		.align	2
 592              	.L47:
 593 0028 00000000 		.word	.LC1
 594 002c 00000000 		.word	.LC5
 595 0030 00000000 		.word	.LANCHOR5
 596 0034 0C000000 		.word	.LC6
 597 0038 00000000 		.word	.LANCHOR0
 598              		.cfi_endproc
 599              	.LFE76:
 601              		.section	.rodata.sim7672_checkSIMCard.str1.4,"aMS",%progbits,1
 602              		.align	2
 603              	.LC7:
 604 0000 52454144 		.ascii	"READY\015\012\000"
 604      590D0A00 
 605              		.align	2
 606              	.LC8:
 607 0008 41542B43 		.ascii	"AT+CPIN?\015\012\000"
 607      50494E3F 
 607      0D0A00
 608              		.section	.text.sim7672_checkSIMCard,"ax",%progbits
 609              		.align	1
 610              		.global	sim7672_checkSIMCard
 611              		.syntax unified
 612              		.thumb
 613              		.thumb_func
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 16


 615              	sim7672_checkSIMCard:
 616              	.LFB77:
 205:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT+CPIN?\r\n", "READY\r\n",TIME_VERY_SHORT) != SIM_TRUE)
 617              		.loc 1 205 1 view -0
 618              		.cfi_startproc
 619              		@ args = 0, pretend = 0, frame = 0
 620              		@ frame_needed = 0, uses_anonymous_args = 0
 621 0000 08B5     		push	{r3, lr}
 622              	.LCFI9:
 623              		.cfi_def_cfa_offset 8
 624              		.cfi_offset 3, -8
 625              		.cfi_offset 14, -4
 206:Core/Src/sim4g_lte.c ****     {
 626              		.loc 1 206 5 view .LVU95
 206:Core/Src/sim4g_lte.c ****     {
 627              		.loc 1 206 9 is_stmt 0 view .LVU96
 628 0002 C822     		movs	r2, #200
 629 0004 0449     		ldr	r1, .L53
 630 0006 0548     		ldr	r0, .L53+4
 631 0008 FFF7FEFF 		bl	sim7672_send_command
 632              	.LVL49:
 206:Core/Src/sim4g_lte.c ****     {
 633              		.loc 1 206 8 view .LVU97
 634 000c 0128     		cmp	r0, #1
 635 000e 00D1     		bne	.L52
 210:Core/Src/sim4g_lte.c **** 
 636              		.loc 1 210 1 view .LVU98
 637 0010 08BD     		pop	{r3, pc}
 638              	.L52:
 208:Core/Src/sim4g_lte.c ****     }
 639              		.loc 1 208 9 is_stmt 1 view .LVU99
 640 0012 FFF7FEFF 		bl	sim7672_errorHandle
 641              	.LVL50:
 642              	.L54:
 643 0016 00BF     		.align	2
 644              	.L53:
 645 0018 00000000 		.word	.LC7
 646 001c 08000000 		.word	.LC8
 647              		.cfi_endproc
 648              	.LFE77:
 650              		.section	.rodata.sim7672_init.str1.4,"aMS",%progbits,1
 651              		.align	2
 652              	.LC9:
 653 0000 53494D20 		.ascii	"SIM PWERKEY\012\000"
 653      50574552 
 653      4B45590A 
 653      00
 654 000d 000000   		.align	2
 655              	.LC10:
 656 0010 41544530 		.ascii	"ATE0\015\012\000"
 656      0D0A00
 657 0017 00       		.align	2
 658              	.LC11:
 659 0018 41540D0A 		.ascii	"AT\015\012\000"
 659      00
 660 001d 000000   		.align	2
 661              	.LC12:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 17


 662 0020 310D0A00 		.ascii	"1\015\012\000"
 663              		.align	2
 664              	.LC13:
 665 0024 41542B43 		.ascii	"AT+CFUN?\015\012\000"
 665      46554E3F 
 665      0D0A00
 666              		.section	.text.sim7672_init,"ax",%progbits
 667              		.align	1
 668              		.global	sim7672_init
 669              		.syntax unified
 670              		.thumb
 671              		.thumb_func
 673              	sim7672_init:
 674              	.LFB71:
  47:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_PWRKEY_GPIO_Port, SIM_PWRKEY_Pin, GPIO_PIN_SET);
 675              		.loc 1 47 1 view -0
 676              		.cfi_startproc
 677              		@ args = 0, pretend = 0, frame = 0
 678              		@ frame_needed = 0, uses_anonymous_args = 0
 679 0000 10B5     		push	{r4, lr}
 680              	.LCFI10:
 681              		.cfi_def_cfa_offset 8
 682              		.cfi_offset 4, -8
 683              		.cfi_offset 14, -4
  48:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
 684              		.loc 1 48 5 view .LVU101
 685 0002 274C     		ldr	r4, .L63
 686 0004 0122     		movs	r2, #1
 687 0006 4FF48051 		mov	r1, #4096
 688 000a 2046     		mov	r0, r4
 689 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 690              	.LVL51:
  49:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_PWRKEY_GPIO_Port, SIM_PWRKEY_Pin, GPIO_PIN_RESET);
 691              		.loc 1 49 5 view .LVU102
 692 0010 3220     		movs	r0, #50
 693 0012 FFF7FEFF 		bl	HAL_Delay
 694              	.LVL52:
  50:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
 695              		.loc 1 50 5 view .LVU103
 696 0016 0022     		movs	r2, #0
 697 0018 4FF48051 		mov	r1, #4096
 698 001c 2046     		mov	r0, r4
 699 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
 700              	.LVL53:
  51:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_PWRKEY_GPIO_Port, SIM_PWRKEY_Pin, GPIO_PIN_SET);
 701              		.loc 1 51 5 view .LVU104
 702 0022 3220     		movs	r0, #50
 703 0024 FFF7FEFF 		bl	HAL_Delay
 704              	.LVL54:
  52:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
 705              		.loc 1 52 5 view .LVU105
 706 0028 0122     		movs	r2, #1
 707 002a 4FF48051 		mov	r1, #4096
 708 002e 2046     		mov	r0, r4
 709 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
 710              	.LVL55:
  53:Core/Src/sim4g_lte.c ****     HAL_GPIO_WritePin(SIM_PWRKEY_GPIO_Port, SIM_PWRKEY_Pin, GPIO_PIN_RESET);
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 18


 711              		.loc 1 53 5 view .LVU106
 712 0034 3220     		movs	r0, #50
 713 0036 FFF7FEFF 		bl	HAL_Delay
 714              	.LVL56:
  54:Core/Src/sim4g_lte.c ****     HAL_Delay(50);
 715              		.loc 1 54 5 view .LVU107
 716 003a 0022     		movs	r2, #0
 717 003c 4FF48051 		mov	r1, #4096
 718 0040 2046     		mov	r0, r4
 719 0042 FFF7FEFF 		bl	HAL_GPIO_WritePin
 720              	.LVL57:
  55:Core/Src/sim4g_lte.c ****     log_data("SIM PWERKEY\n");
 721              		.loc 1 55 5 view .LVU108
 722 0046 3220     		movs	r0, #50
 723 0048 FFF7FEFF 		bl	HAL_Delay
 724              	.LVL58:
  56:Core/Src/sim4g_lte.c **** 
 725              		.loc 1 56 5 view .LVU109
 726 004c 1548     		ldr	r0, .L63+4
 727 004e FFF7FEFF 		bl	log_data
 728              	.LVL59:
  58:Core/Src/sim4g_lte.c ****     {
 729              		.loc 1 58 5 view .LVU110
  58:Core/Src/sim4g_lte.c ****     {
 730              		.loc 1 58 9 is_stmt 0 view .LVU111
 731 0052 C822     		movs	r2, #200
 732 0054 1449     		ldr	r1, .L63+8
 733 0056 1548     		ldr	r0, .L63+12
 734 0058 FFF7FEFF 		bl	sim7672_send_command
 735              	.LVL60:
  58:Core/Src/sim4g_lte.c ****     {
 736              		.loc 1 58 8 view .LVU112
 737 005c 0128     		cmp	r0, #1
 738 005e 19D1     		bne	.L60
  62:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT\r\n", "OK\r\n",TIME_VERY_SHORT) != SIM_TRUE)
 739              		.loc 1 62 5 is_stmt 1 view .LVU113
 740 0060 6420     		movs	r0, #100
 741 0062 FFF7FEFF 		bl	HAL_Delay
 742              	.LVL61:
  63:Core/Src/sim4g_lte.c ****     {
 743              		.loc 1 63 5 view .LVU114
  63:Core/Src/sim4g_lte.c ****     {
 744              		.loc 1 63 9 is_stmt 0 view .LVU115
 745 0066 C822     		movs	r2, #200
 746 0068 0F49     		ldr	r1, .L63+8
 747 006a 1148     		ldr	r0, .L63+16
 748 006c FFF7FEFF 		bl	sim7672_send_command
 749              	.LVL62:
  63:Core/Src/sim4g_lte.c ****     {
 750              		.loc 1 63 8 view .LVU116
 751 0070 0128     		cmp	r0, #1
 752 0072 11D1     		bne	.L61
  67:Core/Src/sim4g_lte.c ****     if (sim7672_send_command("AT+CFUN?\r\n", "1\r\n",TIME_VERY_SHORT) != SIM_TRUE)
 753              		.loc 1 67 5 is_stmt 1 view .LVU117
 754 0074 6420     		movs	r0, #100
 755 0076 FFF7FEFF 		bl	HAL_Delay
 756              	.LVL63:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 19


  68:Core/Src/sim4g_lte.c ****     {
 757              		.loc 1 68 5 view .LVU118
  68:Core/Src/sim4g_lte.c ****     {
 758              		.loc 1 68 9 is_stmt 0 view .LVU119
 759 007a C822     		movs	r2, #200
 760 007c 0D49     		ldr	r1, .L63+20
 761 007e 0E48     		ldr	r0, .L63+24
 762 0080 FFF7FEFF 		bl	sim7672_send_command
 763              	.LVL64:
  68:Core/Src/sim4g_lte.c ****     {
 764              		.loc 1 68 8 view .LVU120
 765 0084 0128     		cmp	r0, #1
 766 0086 09D1     		bne	.L62
  72:Core/Src/sim4g_lte.c ****     
 767              		.loc 1 72 5 is_stmt 1 view .LVU121
 768 0088 6420     		movs	r0, #100
 769 008a FFF7FEFF 		bl	HAL_Delay
 770              	.LVL65:
  74:Core/Src/sim4g_lte.c **** 
 771              		.loc 1 74 5 view .LVU122
 772 008e FFF7FEFF 		bl	sim7672_checkSIMCard
 773              	.LVL66:
  76:Core/Src/sim4g_lte.c **** 
 774              		.loc 1 76 1 is_stmt 0 view .LVU123
 775 0092 10BD     		pop	{r4, pc}
 776              	.L60:
  60:Core/Src/sim4g_lte.c ****     }
 777              		.loc 1 60 9 is_stmt 1 view .LVU124
 778 0094 FFF7FEFF 		bl	sim7672_errorHandle
 779              	.LVL67:
 780              	.L61:
  65:Core/Src/sim4g_lte.c ****     }
 781              		.loc 1 65 9 view .LVU125
 782 0098 FFF7FEFF 		bl	sim7672_errorHandle
 783              	.LVL68:
 784              	.L62:
  70:Core/Src/sim4g_lte.c ****     }
 785              		.loc 1 70 9 view .LVU126
 786 009c FFF7FEFF 		bl	sim7672_errorHandle
 787              	.LVL69:
 788              	.L64:
 789              		.align	2
 790              	.L63:
 791 00a0 00080140 		.word	1073809408
 792 00a4 00000000 		.word	.LC9
 793 00a8 00000000 		.word	.LC3
 794 00ac 10000000 		.word	.LC10
 795 00b0 18000000 		.word	.LC11
 796 00b4 20000000 		.word	.LC12
 797 00b8 24000000 		.word	.LC13
 798              		.cfi_endproc
 799              	.LFE71:
 801              		.global	sim7672
 802              		.section	.rodata.str1.4,"aMS",%progbits,1
 803              		.align	2
 804              	.LC14:
 805 0000 6D2D7761 		.ascii	"m-wap\000"
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 20


 805      7000
 806 0006 0000     		.align	2
 807              	.LC15:
 808 0008 6D6D7300 		.ascii	"mms\000"
 809              		.global	iswaiting4response
 810              		.global	simRxIndex
 811              		.global	simRxResponse
 812              		.global	simRxCplt
 813              		.global	simRxData
 814              		.global	simRxBuf
 815              		.section	.bss.simRxBuf,"aw",%nobits
 816              		.align	2
 817              		.set	.LANCHOR1,. + 0
 820              	simRxBuf:
 821 0000 00000000 		.space	200
 821      00000000 
 821      00000000 
 821      00000000 
 821      00000000 
 822              		.section	.bss.simRxCplt,"aw",%nobits
 825              	simRxCplt:
 826 0000 00       		.space	1
 827              		.section	.bss.simRxData,"aw",%nobits
 828              		.set	.LANCHOR3,. + 0
 831              	simRxData:
 832 0000 00       		.space	1
 833              		.section	.bss.simRxIndex,"aw",%nobits
 834              		.align	2
 835              		.set	.LANCHOR2,. + 0
 838              	simRxIndex:
 839 0000 00000000 		.space	4
 840              		.section	.bss.simRxResponse,"aw",%nobits
 841              		.align	2
 842              		.set	.LANCHOR0,. + 0
 845              	simRxResponse:
 846 0000 00000000 		.space	200
 846      00000000 
 846      00000000 
 846      00000000 
 846      00000000 
 847              		.section	.data.iswaiting4response,"aw"
 848              		.set	.LANCHOR4,. + 0
 851              	iswaiting4response:
 852 0000 01       		.byte	1
 853              		.section	.data.sim7672,"aw"
 854              		.align	2
 855              		.set	.LANCHOR5,. + 0
 858              	sim7672:
 859 0000 00000000 		.word	.LC14
 860 0004 08000000 		.word	.LC15
 861 0008 08000000 		.word	.LC15
 862 000c 00       		.byte	0
 863 000d 00       		.byte	0
 864 000e 0000     		.space	2
 865              		.text
 866              	.Letext0:
 867              		.file 2 "d:\\10 2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 21


 868              		.file 3 "d:\\10 2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 869              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xe.h"
 870              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 871              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 872              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 873              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_uart.h"
 874              		.file 9 "Core/Inc/sim4g_lte.h"
 875              		.file 10 "Core/Inc/debug.h"
 876              		.file 11 "d:\\10 2021.10\\arm-none-eabi\\include\\stdio.h"
 877              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 878              		.file 13 "d:\\10 2021.10\\arm-none-eabi\\include\\string.h"
 879              		.file 14 "<built-in>"
ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 22


DEFINED SYMBOLS
                            *ABS*:00000000 sim4g_lte.c
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:18     .rodata.sim7672_reset.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:22     .text.sim7672_reset:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:28     .text.sim7672_reset:00000000 sim7672_reset
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:76     .text.sim7672_reset:00000040 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:82     .text.sim7672_pwrOff:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:88     .text.sim7672_pwrOff:00000000 sim7672_pwrOff
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:114    .text.sim7672_pwrOff:00000018 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:119    .text.sim7672_pwrOn:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:125    .text.sim7672_pwrOn:00000000 sim7672_pwrOn
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:151    .text.sim7672_pwrOn:00000018 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:156    .text.sim7672_sendcmd_notresp:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:162    .text.sim7672_sendcmd_notresp:00000000 sim7672_sendcmd_notresp
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:194    .text.sim7672_sendcmd_notresp:00000018 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:199    .text.sim7672_send_command:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:205    .text.sim7672_send_command:00000000 sim7672_send_command
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:356    .text.sim7672_send_command:000000b4 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:366    .rodata.sim7672_callback.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:370    .text.sim7672_callback:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:376    .text.sim7672_callback:00000000 sim7672_callback
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:440    .text.sim7672_callback:00000048 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:449    .rodata.sim7672_errorHandle.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:453    .text.sim7672_errorHandle:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:459    .text.sim7672_errorHandle:00000000 sim7672_errorHandle
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:483    .text.sim7672_errorHandle:0000000c $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:488    .rodata.sim7672_start_LTE.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:495    .text.sim7672_start_LTE:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:501    .text.sim7672_start_LTE:00000000 sim7672_start_LTE
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:535    .text.sim7672_start_LTE:0000001c $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:541    .rodata.sim7672_check_signalStrength.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:548    .text.sim7672_check_signalStrength:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:554    .text.sim7672_check_signalStrength:00000000 sim7672_check_signalStrength
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:593    .text.sim7672_check_signalStrength:00000028 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:602    .rodata.sim7672_checkSIMCard.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:609    .text.sim7672_checkSIMCard:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:615    .text.sim7672_checkSIMCard:00000000 sim7672_checkSIMCard
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:645    .text.sim7672_checkSIMCard:00000018 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:651    .rodata.sim7672_init.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:667    .text.sim7672_init:00000000 $t
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:673    .text.sim7672_init:00000000 sim7672_init
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:791    .text.sim7672_init:000000a0 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:858    .data.sim7672:00000000 sim7672
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:803    .rodata.str1.4:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:851    .data.iswaiting4response:00000000 iswaiting4response
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:838    .bss.simRxIndex:00000000 simRxIndex
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:845    .bss.simRxResponse:00000000 simRxResponse
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:825    .bss.simRxCplt:00000000 simRxCplt
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:831    .bss.simRxData:00000000 simRxData
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:820    .bss.simRxBuf:00000000 simRxBuf
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:816    .bss.simRxBuf:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:826    .bss.simRxCplt:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:832    .bss.simRxData:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:834    .bss.simRxIndex:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:841    .bss.simRxResponse:00000000 $d
C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s:854    .data.sim7672:00000000 $d

ARM GAS  C:\Users\Admin\AppData\Local\Temp\ccl5i7HL.s 			page 23


UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_Delay
log_data
strlen
HAL_UART_Transmit
huart1
memset
HAL_GetTick
HAL_UART_Receive_IT
memcpy
strstr
sscanf
